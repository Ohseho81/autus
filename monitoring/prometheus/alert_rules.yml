# =============================================================================
# AUTUS ì•Œë¦¼ ê·œì¹™
# =============================================================================

groups:
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # AUTUS í•µì‹¬ ë©”íŠ¸ë¦­ ì•Œë¦¼
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - name: autus_core_alerts
    rules:
      # Inertia Debt ê²½ê³ 
      - alert: HighInertiaDebt
        expr: autus_inertia_debt > 0.6
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Inertia Debt ê²½ê³  ìˆ˜ì¤€ ({{ $value | printf \"%.2f\" }})"
          description: "Inertia Debtê°€ 0.6ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œ ë¶€í•˜ë¥¼ í™•ì¸í•˜ì„¸ìš”."

      # Inertia Debt ìœ„í—˜
      - alert: CriticalInertiaDebt
        expr: autus_inertia_debt > 0.8
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "ğŸš¨ Inertia Debt ìœ„í—˜ ({{ $value | printf \"%.2f\" }})"
          description: "Inertia Debtê°€ ìœ„í—˜ ìˆ˜ì¤€ì…ë‹ˆë‹¤. ì¦‰ì‹œ ì¡°ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤."

      # Î”á¹  ê¸‰ë“±
      - alert: HighEntropyChange
        expr: autus_delta_s_dot > 0.7
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Î”á¹  ìƒìŠ¹ ê°ì§€ ({{ $value | printf \"%.2f\" }})"
          description: "ì—”íŠ¸ë¡œí”¼ ë³€í™”ìœ¨ì´ ë†’ìŠµë‹ˆë‹¤. ì‹œìŠ¤í…œ ë¶ˆì•ˆì • ê°€ëŠ¥ì„±."

      # Î”á¹  ìœ„í—˜
      - alert: CriticalEntropyChange
        expr: autus_delta_s_dot > 0.9
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "ğŸš¨ Î”á¹  ìœ„í—˜ ìˆ˜ì¤€ ({{ $value | printf \"%.2f\" }})"
          description: "ì—”íŠ¸ë¡œí”¼ ë³€í™”ìœ¨ì´ ìœ„í—˜ ìˆ˜ì¤€ì…ë‹ˆë‹¤. Scale Lock í•„ìš”."

      # Stability Score ì €í•˜
      - alert: LowStabilityScore
        expr: autus_stability_score < 0.5
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: "ì•ˆì •ì„± ì ìˆ˜ ì €í•˜ ({{ $value | printf \"%.2f\" }})"
          description: "ì‚¬ìš©ì ì•ˆì •ì„± ì ìˆ˜ê°€ ë‚®ìŠµë‹ˆë‹¤. ìƒíƒœ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Safety Guard ì•Œë¦¼
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - name: autus_safety_alerts
    rules:
      # Safety Guard ë¹ˆë²ˆí•œ íŠ¸ë¦¬ê±°
      - alert: FrequentSafetyTriggers
        expr: increase(autus_safety_triggers_total[1h]) > 5
        for: 0m
        labels:
          severity: warning
        annotations:
          summary: "Safety Guard ë¹ˆë²ˆí•œ íŠ¸ë¦¬ê±°"
          description: "ì§€ë‚œ 1ì‹œê°„ ë™ì•ˆ Safety Guardê°€ {{ $value | printf \"%.0f\" }}íšŒ íŠ¸ë¦¬ê±°ë˜ì—ˆìŠµë‹ˆë‹¤."

      # Scale Lock ìœ„ë°˜
      - alert: ScaleLockViolation
        expr: increase(autus_scale_lock_violations_total[1h]) > 3
        for: 0m
        labels:
          severity: critical
        annotations:
          summary: "ğŸš¨ Scale Lock ìœ„ë°˜ ê°ì§€"
          description: "ì§€ë‚œ 1ì‹œê°„ ë™ì•ˆ Scale Lock ìœ„ë°˜ì´ {{ $value | printf \"%.0f\" }}íšŒ ë°œìƒí–ˆìŠµë‹ˆë‹¤."

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # ì„±ëŠ¥ ì•Œë¦¼
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - name: autus_performance_alerts
    rules:
      # ì›Œí¬í”Œë¡œìš° ì§€ì—°
      - alert: HighWorkflowLatency
        expr: histogram_quantile(0.95, rate(autus_workflow_latency_seconds_bucket[5m])) > 10
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "ì›Œí¬í”Œë¡œìš° ì§€ì—° ê°ì§€"
          description: "ì›Œí¬í”Œë¡œìš° p95 ì§€ì—° ì‹œê°„ì´ {{ $value | printf \"%.2f\" }}ì´ˆì…ë‹ˆë‹¤."

      # TFT ì˜ˆì¸¡ ì§€ì—°
      - alert: HighTFTPredictionLatency
        expr: histogram_quantile(0.95, rate(autus_tft_prediction_latency_seconds_bucket[5m])) > 5
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "TFT ì˜ˆì¸¡ ì§€ì—°"
          description: "TFT ì˜ˆì¸¡ p95 ì§€ì—° ì‹œê°„ì´ {{ $value | printf \"%.2f\" }}ì´ˆì…ë‹ˆë‹¤."

      # GNN ì„ë² ë”© ì§€ì—°
      - alert: HighGNNEmbeddingLatency
        expr: histogram_quantile(0.95, rate(autus_gnn_embedding_latency_seconds_bucket[5m])) > 3
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "GNN ì„ë² ë”© ì§€ì—°"
          description: "GNN ì„ë² ë”© p95 ì§€ì—° ì‹œê°„ì´ {{ $value | printf \"%.2f\" }}ì´ˆì…ë‹ˆë‹¤."

      # ì—ëŸ¬ìœ¨ ìƒìŠ¹
      - alert: HighErrorRate
        expr: rate(autus_workflow_runs_total{status="error"}[5m]) / rate(autus_workflow_runs_total[5m]) > 0.05
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "ì—ëŸ¬ìœ¨ ìƒìŠ¹"
          description: "ì›Œí¬í”Œë¡œìš° ì—ëŸ¬ìœ¨ì´ {{ $value | printf \"%.1f\" }}%ì…ë‹ˆë‹¤."

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # ê·¸ë˜í”„ ì•Œë¦¼
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - name: autus_graph_alerts
    rules:
      # ê·¸ë˜í”„ ë…¸ë“œ ê¸‰ì¦
      - alert: RapidGraphGrowth
        expr: increase(autus_graph_edges_total[1h]) > 100
        for: 0m
        labels:
          severity: info
        annotations:
          summary: "ê·¸ë˜í”„ ê¸‰ì„±ì¥"
          description: "ì§€ë‚œ 1ì‹œê°„ ë™ì•ˆ {{ $value | printf \"%.0f\" }}ê°œì˜ ì—£ì§€ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤."

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # ì‹œìŠ¤í…œ ì•Œë¦¼
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - name: autus_system_alerts
    rules:
      # AUTUS ì„œë¹„ìŠ¤ ë‹¤ìš´
      - alert: AUTUSServiceDown
        expr: up{job="autus-backend"} == 0
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "ğŸš¨ AUTUS ì„œë¹„ìŠ¤ ë‹¤ìš´"
          description: "AUTUS ë°±ì—”ë“œ ì„œë¹„ìŠ¤ê°€ ì‘ë‹µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."

      # Neo4j ë‹¤ìš´
      - alert: Neo4jDown
        expr: up{job="neo4j"} == 0
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: "ğŸš¨ Neo4j ì„œë¹„ìŠ¤ ë‹¤ìš´"
          description: "Neo4j ë°ì´í„°ë² ì´ìŠ¤ê°€ ì‘ë‹µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
