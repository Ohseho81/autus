{"version":3,"file":"app/api/churn/route.js","mappings":"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","sources":["webpack://_N_E/external commonjs \"node:async_hooks\"","webpack://_N_E/external commonjs \"node:buffer\"","webpack://_N_E/./app/api/churn/route.ts","webpack://_N_E/./app/api/churn/route.ts?18d3","webpack://_N_E/?79d8","webpack://_N_E/./node_modules/next/dist/compiled/ua-parser-js/ua-parser.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/spec-extension/user-agent.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/spec-extension/url-pattern.js","webpack://_N_E/./node_modules/next/dist/esm/server/web/exports/index.js","webpack://_N_E/./node_modules/next/dist/esm/api/server.js"],"sourcesContent":["module.exports = require(\"node:async_hooks\");","module.exports = require(\"node:buffer\");","// ============================================\n// AUTUS Churn Risk Detection API\n// ============================================\n// \n// \"í‡´ì› ë§‰ìœ¼ë©´ ëˆ ë²Œê³ , ëª» ë§‰ìœ¼ë©´ ë¬´ë£Œ\"\n// í‡´ì› ìœ„í—˜ í•™ìƒ ê°ì§€ ë° ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±\n//\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { createClient } from '@supabase/supabase-js';\n\nexport const runtime = 'edge';\n\nconst corsHeaders = {\n  'Access-Control-Allow-Origin': '*',\n  'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n  'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n};\n\nconst supabaseUrl = process.env.SUPABASE_URL || process.env.NEXT_PUBLIC_SUPABASE_URL;\nconst supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_ANON_KEY;\n\n// ìœ„í—˜ ë ˆë²¨ë³„ ê¶Œì¥ ì¡°ì¹˜\nconst RISK_ACTIONS = {\n  critical: {\n    urgency: 'ì¦‰ì‹œ',\n    actions: ['ì˜¤ëŠ˜ ì¤‘ í•™ë¶€ëª¨ ì „í™” ìƒë‹´', 'ì›ì¥ ì§ì ‘ ë©´ë‹´ ìš”ì²­', 'íŠ¹ë³„ ê´€ë¦¬ í”„ë¡œê·¸ë¨ ì œì•ˆ'],\n    template: 'AUTUS_CHURN_CRITICAL'\n  },\n  high: {\n    urgency: '1ì£¼ ë‚´',\n    actions: ['í•™ë¶€ëª¨ ìƒë‹´ ì¼ì • ì¡ê¸°', 'í•™ìƒ ë©´ë‹´ ì§„í–‰', 'ìˆ˜ì—… ë§Œì¡±ë„ ì²´í¬'],\n    template: 'AUTUS_CHURN_HIGH'\n  },\n  medium: {\n    urgency: '2ì£¼ ë‚´',\n    actions: ['í•™ë¶€ëª¨ ê·¼í™© í™•ì¸ ì—°ë½', 'ìˆ™ì œ/ì¶œì„ ê´€ë¦¬ ê°•í™”', 'ë³´ì¶© ìˆ˜ì—… ì œì•ˆ'],\n    template: 'AUTUS_CHURN_MEDIUM'\n  },\n  low: {\n    urgency: 'ì •ê¸°',\n    actions: ['ì›”ê°„ ì„±ì  ë¦¬í¬íŠ¸ ë°œì†¡', 'ì¹­ì°¬ ë¬¸ì ë°œì†¡'],\n    template: 'AUTUS_CHURN_LOW'\n  }\n};\n\nexport async function OPTIONS() {\n  return new NextResponse(null, { status: 200, headers: corsHeaders });\n}\n\n// GET: í‡´ì› ìœ„í—˜ í•™ìƒ ëª©ë¡ ì¡°íšŒ\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url);\n    const academyId = searchParams.get('academyId');\n    const riskLevel = searchParams.get('riskLevel'); // critical, high, medium, low\n    const limit = parseInt(searchParams.get('limit') || '20');\n\n    if (!supabaseUrl || !supabaseKey) {\n      // Demo ëª¨ë“œ\n      return NextResponse.json({\n        success: true,\n        demo_mode: true,\n        data: getDemoChurnData()\n      }, { status: 200, headers: corsHeaders });\n    }\n\n    const supabase = createClient(supabaseUrl, supabaseKey);\n\n    let query = supabase\n      .from('students')\n      .select('*')\n      .eq('status', 'active')\n      .order('churn_risk_score', { ascending: false })\n      .limit(limit);\n\n    if (academyId) {\n      query = query.eq('academy_id', academyId);\n    }\n\n    if (riskLevel) {\n      query = query.eq('churn_risk_level', riskLevel);\n    }\n\n    const { data: students, error } = await query;\n\n    if (error) throw error;\n\n    // ìœ„í—˜ ë ˆë²¨ë³„ ì§‘ê³„\n    const summary = {\n      critical: students?.filter(s => s.churn_risk_level === 'critical').length || 0,\n      high: students?.filter(s => s.churn_risk_level === 'high').length || 0,\n      medium: students?.filter(s => s.churn_risk_level === 'medium').length || 0,\n      low: students?.filter(s => s.churn_risk_level === 'low').length || 0,\n      total: students?.length || 0\n    };\n\n    // ì˜ˆìƒ í‡´ì› ì†ì‹¤ ê³„ì‚°\n    const potentialLoss = students?.reduce((sum, s) => {\n      if (s.churn_risk_level === 'critical' || s.churn_risk_level === 'high') {\n        return sum + (parseFloat(s.monthly_fee) * 6); // 6ê°œì›” LTV\n      }\n      return sum;\n    }, 0) || 0;\n\n    // ê° í•™ìƒì— ê¶Œì¥ ì¡°ì¹˜ ì¶”ê°€\n    const enrichedStudents = students?.map(student => ({\n      ...student,\n      recommended_actions: RISK_ACTIONS[student.churn_risk_level as keyof typeof RISK_ACTIONS],\n      potential_loss: student.churn_risk_level === 'critical' || student.churn_risk_level === 'high'\n        ? parseFloat(student.monthly_fee) * 6\n        : 0\n    }));\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        summary,\n        potential_loss: potentialLoss,\n        students: enrichedStudents\n      }\n    }, { status: 200, headers: corsHeaders });\n\n  } catch (error: any) {\n    console.error('Churn API Error:', error);\n    return NextResponse.json(\n      { success: false, error: error.message },\n      { status: 500, headers: corsHeaders }\n    );\n  }\n}\n\n// POST: í‡´ì› ìœ„í—˜ ë¶„ì„ & ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { studentId, action } = body;\n\n    if (!supabaseUrl || !supabaseKey) {\n      // Demo ëª¨ë“œ\n      return NextResponse.json({\n        success: true,\n        demo_mode: true,\n        data: {\n          script: generateDemoScript(),\n          actions: RISK_ACTIONS.high.actions\n        }\n      }, { status: 200, headers: corsHeaders });\n    }\n\n    const supabase = createClient(supabaseUrl, supabaseKey);\n\n    if (action === 'generate_script') {\n      // í•™ìƒ ì •ë³´ ì¡°íšŒ\n      const { data: student, error } = await supabase\n        .from('students')\n        .select('*')\n        .eq('id', studentId)\n        .single();\n\n      if (error) throw error;\n\n      // AI ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±\n      const script = await generateConsultationScript(student);\n\n      return NextResponse.json({\n        success: true,\n        data: {\n          student,\n          script,\n          recommended_actions: RISK_ACTIONS[student.churn_risk_level as keyof typeof RISK_ACTIONS]\n        }\n      }, { status: 200, headers: corsHeaders });\n    }\n\n    if (action === 'record_consultation') {\n      // ìƒë‹´ ê²°ê³¼ ê¸°ë¡\n      const { outcome, notes, duration } = body;\n\n      const { data: consultation, error } = await supabase\n        .from('consultations')\n        .insert({\n          student_id: studentId,\n          type: 'risk_triggered',\n          trigger_reason: 'AUTUS í‡´ì› ìœ„í—˜ ê°ì§€',\n          conducted_at: new Date().toISOString(),\n          duration_minutes: duration,\n          notes,\n          outcome\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      // í‡´ì› ë°©ì§€ ì„±ê³µ ì‹œ Outcome Ledgerì— ê¸°ë¡\n      if (outcome === 'retained') {\n        const { data: student } = await supabase\n          .from('students')\n          .select('monthly_fee, academy_id')\n          .eq('id', studentId)\n          .single();\n\n        if (student) {\n          await supabase\n            .from('outcome_ledger')\n            .insert({\n              academy_id: student.academy_id,\n              outcome_type: 'retention',\n              outcome_date: new Date().toISOString().split('T')[0],\n              student_id: studentId,\n              consultation_id: consultation.id,\n              base_value: student.monthly_fee,\n              multiplier: 6, // 6ê°œì›” LTV\n              contribution_rate: 0.10,\n              status: 'confirmed',\n              confirmed_at: new Date().toISOString(),\n              description: `í‡´ì› ìœ„í—˜ í•™ìƒ ìƒë‹´ í›„ ìœ ì§€ ì„±ê³µ`\n            });\n\n          // í•™ìƒ ìƒíƒœ ì—…ë°ì´íŠ¸\n          await supabase\n            .from('students')\n            .update({ \n              status: 'active',\n              last_consultation_at: new Date().toISOString()\n            })\n            .eq('id', studentId);\n        }\n      }\n\n      return NextResponse.json({\n        success: true,\n        data: {\n          consultation,\n          message: outcome === 'retained' \n            ? 'ğŸ‰ í‡´ì› ë°©ì§€ ì„±ê³µ! Outcome Ledgerì— ê¸°ë¡ë¨' \n            : 'ìƒë‹´ ê¸°ë¡ ì™„ë£Œ'\n        }\n      }, { status: 200, headers: corsHeaders });\n    }\n\n    return NextResponse.json(\n      { success: false, error: 'Invalid action' },\n      { status: 400, headers: corsHeaders }\n    );\n\n  } catch (error: any) {\n    console.error('Churn API Error:', error);\n    return NextResponse.json(\n      { success: false, error: error.message },\n      { status: 500, headers: corsHeaders }\n    );\n  }\n}\n\n// AI ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±\nasync function generateConsultationScript(student: any): Promise<string> {\n  const riskFactors = [];\n  \n  if (student.attendance_rate < 80) {\n    riskFactors.push(`ì¶œì„ë¥ ì´ ${student.attendance_rate}%ë¡œ ë‚®ìŠµë‹ˆë‹¤`);\n  }\n  if (student.homework_rate < 70) {\n    riskFactors.push(`ìˆ™ì œ ì œì¶œë¥ ì´ ${student.homework_rate}%ì…ë‹ˆë‹¤`);\n  }\n  if (student.grade_trend < -10) {\n    riskFactors.push(`ìµœê·¼ ì„±ì ì´ í•˜ë½ ì¶”ì„¸ì…ë‹ˆë‹¤`);\n  }\n  if (student.payment_status !== 'paid') {\n    riskFactors.push(`ìˆ˜ê°•ë£Œ ë‚©ë¶€ê°€ ì§€ì—°ë˜ê³  ìˆìŠµë‹ˆë‹¤`);\n  }\n\n  const script = `\nğŸ“ ${student.name} í•™ìƒ í•™ë¶€ëª¨ë‹˜ ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸\n\n[ì¸ì‚¬]\n\"ì•ˆë…•í•˜ì„¸ìš”, ${student.name} í•™ìƒ ë‹´ë‹¹ ì„ ìƒë‹˜ì…ë‹ˆë‹¤.\nìš”ì¦˜ ${student.name} í•™ìƒ í•™ìŠµ ìƒí™©ì— ëŒ€í•´ ë§ì”€ë“œë¦¬ê³  ì‹¶ì–´ì„œ ì—°ë½ë“œë ¸ìŠµë‹ˆë‹¤.\"\n\n[í˜„í™© ê³µìœ ]\n${riskFactors.map(f => `â€¢ ${f}`).join('\\n')}\n\n[ê³µê° í‘œí˜„]\n\"í˜¹ì‹œ ìš”ì¦˜ ${student.name} í•™ìƒì´ í•™ì› ìˆ˜ì—…ì— ì–´ë ¤ì›€ì„ ëŠë¼ê±°ë‚˜,\në‹¤ë¥¸ ê³ ë¯¼ì´ ìˆëŠ”ì§€ ì—¬ì­¤ë´ë„ ë ê¹Œìš”?\"\n\n[í•´ê²°ì±… ì œì•ˆ]\nâ€¢ ë³´ì¶© ìˆ˜ì—… ì œì•ˆ: \"ë¶€ì¡±í•œ ë¶€ë¶„ì€ ì¶”ê°€ ë³´ì¶© ìˆ˜ì—…ìœ¼ë¡œ ë„ì™€ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤\"\nâ€¢ ìƒë‹´ ì œì•ˆ: \"í•™ìƒê³¼ 1:1 ë©´ë‹´ì„ í†µí•´ í•™ìŠµ ë™ê¸°ë¥¼ ë†’ì—¬ë³´ê² ìŠµë‹ˆë‹¤\"\nâ€¢ ìœ ì—°í•œ ì¼ì •: \"ì‹œê°„ëŒ€ ì¡°ì •ì´ í•„ìš”í•˜ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”\"\n\n[ë§ˆë¬´ë¦¬]\n\"ì €í¬ í•™ì›ì—ì„œ ${student.name} í•™ìƒì´ ì¢‹ì€ ì„±ê³¼ë¥¼ ê±°ë‘˜ ìˆ˜ ìˆë„ë¡\nìµœì„ ì„ ë‹¤í•˜ê² ìŠµë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ì  ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ì£¼ì„¸ìš”.\"\n\n---\nğŸ’¡ AUTUS íŒ: í•™ë¶€ëª¨ì˜ ê³ ë¯¼ì„ ë¨¼ì € ê²½ì²­í•˜ì„¸ìš”.\nìœ„í—˜ ìˆ˜ì¤€: ${student.churn_risk_level.toUpperCase()} (ì ìˆ˜: ${student.churn_risk_score})\n  `.trim();\n\n  return script;\n}\n\n// ë°ëª¨ ë°ì´í„°\nfunction getDemoChurnData() {\n  return {\n    summary: {\n      critical: 2,\n      high: 2,\n      medium: 2,\n      low: 2,\n      total: 8\n    },\n    potential_loss: 4200000, // 420ë§Œì›\n    students: [\n      {\n        id: 'demo-1',\n        name: 'ìœ¤ì§€ìš°',\n        grade: 'ê³ 3',\n        churn_risk_score: 202,\n        churn_risk_level: 'critical',\n        attendance_rate: 60,\n        homework_rate: 30,\n        payment_status: 'delinquent',\n        monthly_fee: 350000,\n        potential_loss: 2100000,\n        recommended_actions: RISK_ACTIONS.critical\n      },\n      {\n        id: 'demo-2',\n        name: 'ê°•ë¯¼ì„œ',\n        grade: 'ì¤‘1',\n        churn_risk_score: 201,\n        churn_risk_level: 'critical',\n        attendance_rate: 55,\n        homework_rate: 40,\n        payment_status: 'delinquent',\n        monthly_fee: 350000,\n        potential_loss: 2100000,\n        recommended_actions: RISK_ACTIONS.critical\n      }\n    ]\n  };\n}\n\nfunction generateDemoScript() {\n  return `\nğŸ“ í•™ë¶€ëª¨ë‹˜ ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸\n\n[ì¸ì‚¬]\n\"ì•ˆë…•í•˜ì„¸ìš”, ë‹´ë‹¹ ì„ ìƒë‹˜ì…ë‹ˆë‹¤.\"\n\n[í˜„í™© ê³µìœ ]\nâ€¢ ìµœê·¼ ì¶œì„ë¥ ì´ ë‚®ì•„ì§€ê³  ìˆìŠµë‹ˆë‹¤\nâ€¢ ìˆ™ì œ ì œì¶œì´ ì§€ì—°ë˜ê³  ìˆìŠµë‹ˆë‹¤\n\n[í•´ê²°ì±… ì œì•ˆ]\nâ€¢ ë³´ì¶© ìˆ˜ì—… ì œì•ˆ\nâ€¢ 1:1 ë©´ë‹´ ì§„í–‰\nâ€¢ ì‹œê°„ëŒ€ ì¡°ì •\n\nğŸ’¡ AUTUS ë°ëª¨ ëª¨ë“œ\n  `.trim();\n}\n","import { AppRouteRouteModule } from \"next/dist/server/future/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/future/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"/Users/oseho/Desktop/autus/vercel-api/app/api/churn/route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/churn/route\",\n        pathname: \"/api/churn\",\n        filename: \"route\",\n        bundlePath: \"app/api/churn/route\"\n    },\n    resolvedPagePath: \"/Users/oseho/Desktop/autus/vercel-api/app/api/churn/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/churn/route\";\nfunction patchFetch() {\n    return _patchFetch({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\nexport { routeModule, requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, originalPathname, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map","import { EdgeRouteModuleWrapper } from \"next/dist/server/web/edge-route-module-wrapper\";\n// Import the userland code.\nimport * as module from \"next-app-loader?name=app%2Fapi%2Fchurn%2Froute&page=%2Fapi%2Fchurn%2Froute&pagePath=private-next-app-dir%2Fapi%2Fchurn%2Froute.ts&appDir=%2FUsers%2Foseho%2FDesktop%2Fautus%2Fvercel-api%2Fapp&appPaths=%2Fapi%2Fchurn%2Froute&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!private-next-app-dir/api/churn/route.ts?__next_edge_ssr_entry__\";\nexport const ComponentMod = module;\nexport default EdgeRouteModuleWrapper.wrap(module.routeModule);\n\n//# sourceMappingURL=edge-app-route.js.map","(()=>{var i={226:function(i,e){(function(o,a){\"use strict\";var r=\"1.0.35\",t=\"\",n=\"?\",s=\"function\",b=\"undefined\",w=\"object\",l=\"string\",d=\"major\",c=\"model\",u=\"name\",p=\"type\",m=\"vendor\",f=\"version\",h=\"architecture\",v=\"console\",g=\"mobile\",k=\"tablet\",x=\"smarttv\",_=\"wearable\",y=\"embedded\",q=350;var T=\"Amazon\",S=\"Apple\",z=\"ASUS\",N=\"BlackBerry\",A=\"Browser\",C=\"Chrome\",E=\"Edge\",O=\"Firefox\",U=\"Google\",j=\"Huawei\",P=\"LG\",R=\"Microsoft\",M=\"Motorola\",B=\"Opera\",V=\"Samsung\",D=\"Sharp\",I=\"Sony\",W=\"Viera\",F=\"Xiaomi\",G=\"Zebra\",H=\"Facebook\",L=\"Chromium OS\",Z=\"Mac OS\";var extend=function(i,e){var o={};for(var a in i){if(e[a]&&e[a].length%2===0){o[a]=e[a].concat(i[a])}else{o[a]=i[a]}}return o},enumerize=function(i){var e={};for(var o=0;o<i.length;o++){e[i[o].toUpperCase()]=i[o]}return e},has=function(i,e){return typeof i===l?lowerize(e).indexOf(lowerize(i))!==-1:false},lowerize=function(i){return i.toLowerCase()},majorize=function(i){return typeof i===l?i.replace(/[^\\d\\.]/g,t).split(\".\")[0]:a},trim=function(i,e){if(typeof i===l){i=i.replace(/^\\s\\s*/,t);return typeof e===b?i:i.substring(0,q)}};var rgxMapper=function(i,e){var o=0,r,t,n,b,l,d;while(o<e.length&&!l){var c=e[o],u=e[o+1];r=t=0;while(r<c.length&&!l){if(!c[r]){break}l=c[r++].exec(i);if(!!l){for(n=0;n<u.length;n++){d=l[++t];b=u[n];if(typeof b===w&&b.length>0){if(b.length===2){if(typeof b[1]==s){this[b[0]]=b[1].call(this,d)}else{this[b[0]]=b[1]}}else if(b.length===3){if(typeof b[1]===s&&!(b[1].exec&&b[1].test)){this[b[0]]=d?b[1].call(this,d,b[2]):a}else{this[b[0]]=d?d.replace(b[1],b[2]):a}}else if(b.length===4){this[b[0]]=d?b[3].call(this,d.replace(b[1],b[2])):a}}else{this[b]=d?d:a}}}}o+=2}},strMapper=function(i,e){for(var o in e){if(typeof e[o]===w&&e[o].length>0){for(var r=0;r<e[o].length;r++){if(has(e[o][r],i)){return o===n?a:o}}}else if(has(e[o],i)){return o===n?a:o}}return i};var $={\"1.0\":\"/8\",1.2:\"/1\",1.3:\"/3\",\"2.0\":\"/412\",\"2.0.2\":\"/416\",\"2.0.3\":\"/417\",\"2.0.4\":\"/419\",\"?\":\"/\"},X={ME:\"4.90\",\"NT 3.11\":\"NT3.51\",\"NT 4.0\":\"NT4.0\",2e3:\"NT 5.0\",XP:[\"NT 5.1\",\"NT 5.2\"],Vista:\"NT 6.0\",7:\"NT 6.1\",8:\"NT 6.2\",8.1:\"NT 6.3\",10:[\"NT 6.4\",\"NT 10.0\"],RT:\"ARM\"};var K={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[f,[u,\"Chrome\"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[f,[u,\"Edge\"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[u,f],[/opios[\\/ ]+([\\w\\.]+)/i],[f,[u,B+\" Mini\"]],[/\\bopr\\/([\\w\\.]+)/i],[f,[u,B]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,/(heytap|ovi)browser\\/([\\d\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[u,f],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[f,[u,\"UC\"+A]],[/microm.+\\bqbcore\\/([\\w\\.]+)/i,/\\bqbcore\\/([\\w\\.]+).+microm/i],[f,[u,\"WeChat(Win) Desktop\"]],[/micromessenger\\/([\\w\\.]+)/i],[f,[u,\"WeChat\"]],[/konqueror\\/([\\w\\.]+)/i],[f,[u,\"Konqueror\"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[f,[u,\"IE\"]],[/ya(?:search)?browser\\/([\\w\\.]+)/i],[f,[u,\"Yandex\"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[u,/(.+)/,\"$1 Secure \"+A],f],[/\\bfocus\\/([\\w\\.]+)/i],[f,[u,O+\" Focus\"]],[/\\bopt\\/([\\w\\.]+)/i],[f,[u,B+\" Touch\"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[f,[u,\"Coc Coc\"]],[/dolfin\\/([\\w\\.]+)/i],[f,[u,\"Dolphin\"]],[/coast\\/([\\w\\.]+)/i],[f,[u,B+\" Coast\"]],[/miuibrowser\\/([\\w\\.]+)/i],[f,[u,\"MIUI \"+A]],[/fxios\\/([-\\w\\.]+)/i],[f,[u,O]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[u,\"360 \"+A]],[/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],[[u,/(.+)/,\"$1 \"+A],f],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[u,/_/g,\" \"],f],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[u,f],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i,/\\[(linkedin)app\\]/i],[u],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[u,H],f],[/(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,/(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[u,f],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[f,[u,\"GSA\"]],[/musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i],[f,[u,\"TikTok\"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[f,[u,C+\" Headless\"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[u,C+\" WebView\"],f],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[f,[u,\"Android \"+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[u,f],[/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i],[f,[u,\"Mobile Safari\"]],[/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i],[f,u],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[u,[f,strMapper,$]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[u,f],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[u,\"Netscape\"],f],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[f,[u,O+\" Reality\"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i,/panasonic;(viera)/i],[u,f],[/(cobalt)\\/([\\w\\.]+)/i],[u,[f,/master.|lts./,\"\"]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[h,\"amd64\"]],[/(ia32(?=;))/i],[[h,lowerize]],[/((?:i[346]|x)86)[;\\)]/i],[[h,\"ia32\"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[h,\"arm64\"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[h,\"armhf\"]],[/windows (ce|mobile); ppc;/i],[[h,\"arm\"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[h,/ower/,t,lowerize]],[/(sun4\\w)[;\\)]/i],[[h,\"sparc\"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[h,lowerize]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[m,V],[p,k]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[c,[m,V],[p,g]],[/(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i],[c,[m,S],[p,g]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[c,[m,S],[p,k]],[/(macintosh);/i],[c,[m,S]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[c,[m,D],[p,g]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[c,[m,j],[p,k]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i],[c,[m,j],[p,g]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[c,/_/g,\" \"],[m,F],[p,g]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[c,/_/g,\" \"],[m,F],[p,k]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[c,[m,\"OPPO\"],[p,g]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[c,[m,\"Vivo\"],[p,g]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[c,[m,\"Realme\"],[p,g]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[c,[m,M],[p,g]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[c,[m,M],[p,k]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[m,P],[p,k]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[c,[m,P],[p,g]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[c,[m,\"Lenovo\"],[p,k]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[c,/_/g,\" \"],[m,\"Nokia\"],[p,g]],[/(pixel c)\\b/i],[c,[m,U],[p,k]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[c,[m,U],[p,g]],[/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[c,[m,I],[p,g]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[c,\"Xperia Tablet\"],[m,I],[p,k]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[c,[m,\"OnePlus\"],[p,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[c,[m,T],[p,k]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[c,/(.+)/g,\"Fire Phone $1\"],[m,T],[p,g]],[/(playbook);[-\\w\\),; ]+(rim)/i],[c,m,[p,k]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[c,[m,N],[p,g]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[c,[m,z],[p,k]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[c,[m,z],[p,g]],[/(nexus 9)/i],[c,[m,\"HTC\"],[p,k]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i],[m,[c,/_/g,\" \"],[p,g]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[c,[m,\"Acer\"],[p,k]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[c,[m,\"Meizu\"],[p,g]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[m,c,[p,g]],[/(kobo)\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[m,c,[p,k]],[/(surface duo)/i],[c,[m,R],[p,k]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[c,[m,\"Fairphone\"],[p,g]],[/(u304aa)/i],[c,[m,\"AT&T\"],[p,g]],[/\\bsie-(\\w*)/i],[c,[m,\"Siemens\"],[p,g]],[/\\b(rct\\w+) b/i],[c,[m,\"RCA\"],[p,k]],[/\\b(venue[\\d ]{2,7}) b/i],[c,[m,\"Dell\"],[p,k]],[/\\b(q(?:mv|ta)\\w+) b/i],[c,[m,\"Verizon\"],[p,k]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[c,[m,\"Barnes & Noble\"],[p,k]],[/\\b(tm\\d{3}\\w+) b/i],[c,[m,\"NuVision\"],[p,k]],[/\\b(k88) b/i],[c,[m,\"ZTE\"],[p,k]],[/\\b(nx\\d{3}j) b/i],[c,[m,\"ZTE\"],[p,g]],[/\\b(gen\\d{3}) b.+49h/i],[c,[m,\"Swiss\"],[p,g]],[/\\b(zur\\d{3}) b/i],[c,[m,\"Swiss\"],[p,k]],[/\\b((zeki)?tb.*\\b) b/i],[c,[m,\"Zeki\"],[p,k]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[m,\"Dragon Touch\"],c,[p,k]],[/\\b(ns-?\\w{0,9}) b/i],[c,[m,\"Insignia\"],[p,k]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[c,[m,\"NextBook\"],[p,k]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,\"Voice\"],c,[p,g]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[m,\"LvTel\"],c,[p,g]],[/\\b(ph-1) /i],[c,[m,\"Essential\"],[p,g]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[c,[m,\"Envizen\"],[p,k]],[/\\b(trio[-\\w\\. ]+) b/i],[c,[m,\"MachSpeed\"],[p,k]],[/\\btu_(1491) b/i],[c,[m,\"Rotor\"],[p,k]],[/(shield[\\w ]+) b/i],[c,[m,\"Nvidia\"],[p,k]],[/(sprint) (\\w+)/i],[m,c,[p,g]],[/(kin\\.[onetw]{3})/i],[[c,/\\./g,\" \"],[m,R],[p,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[c,[m,G],[p,k]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[c,[m,G],[p,g]],[/smart-tv.+(samsung)/i],[m,[p,x]],[/hbbtv.+maple;(\\d+)/i],[[c,/^/,\"SmartTV\"],[m,V],[p,x]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[m,P],[p,x]],[/(apple) ?tv/i],[m,[c,S+\" TV\"],[p,x]],[/crkey/i],[[c,C+\"cast\"],[m,U],[p,x]],[/droid.+aft(\\w)( bui|\\))/i],[c,[m,T],[p,x]],[/\\(dtv[\\);].+(aquos)/i,/(aquos-tv[\\w ]+)\\)/i],[c,[m,D],[p,x]],[/(bravia[\\w ]+)( bui|\\))/i],[c,[m,I],[p,x]],[/(mitv-\\w{5}) bui/i],[c,[m,F],[p,x]],[/Hbbtv.*(technisat) (.*);/i],[m,c,[p,x]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i],[[m,trim],[c,trim],[p,x]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[p,x]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,c,[p,v]],[/droid.+; (shield) bui/i],[c,[m,\"Nvidia\"],[p,v]],[/(playstation [345portablevi]+)/i],[c,[m,I],[p,v]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[c,[m,R],[p,v]],[/((pebble))app/i],[m,c,[p,_]],[/(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i],[c,[m,S],[p,_]],[/droid.+; (glass) \\d/i],[c,[m,U],[p,_]],[/droid.+; (wt63?0{2,3})\\)/i],[c,[m,G],[p,_]],[/(quest( 2| pro)?)/i],[c,[m,H],[p,_]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[m,[p,y]],[/(aeobc)\\b/i],[c,[m,T],[p,y]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[c,[p,g]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[c,[p,k]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[p,k]],[/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i],[[p,g]],[/(android[-\\w\\. ]{0,9});.+buil/i],[c,[m,\"Generic\"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[f,[u,E+\"HTML\"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[f,[u,\"Blink\"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,/\\b(libweb)/i],[u,f],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[f,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,f],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[u,[f,strMapper,X]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[u,\"Windows\"],[f,strMapper,X]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/ios;fbsv\\/([\\d\\.]+)/i,/cfnetwork\\/.+darwin/i],[[f,/_/g,\".\"],[u,\"iOS\"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[u,Z],[f,/_/g,\".\"]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i],[f,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[u,f],[/\\(bb(10);/i],[f,[u,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[f,[u,\"Symbian\"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[f,[u,O+\" OS\"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[f,[u,\"webOS\"]],[/watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i],[f,[u,\"watchOS\"]],[/crkey\\/([\\d\\.]+)/i],[f,[u,C+\"cast\"]],[/(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i],[[u,L],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\/(\\d+\\.[\\w\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[u,f],[/(sunos) ?([\\w\\.\\d]*)/i],[[u,\"Solaris\"],f],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\\w\\.]*)/i],[u,f]]};var UAParser=function(i,e){if(typeof i===w){e=i;i=a}if(!(this instanceof UAParser)){return new UAParser(i,e).getResult()}var r=typeof o!==b&&o.navigator?o.navigator:a;var n=i||(r&&r.userAgent?r.userAgent:t);var v=r&&r.userAgentData?r.userAgentData:a;var x=e?extend(K,e):K;var _=r&&r.userAgent==n;this.getBrowser=function(){var i={};i[u]=a;i[f]=a;rgxMapper.call(i,n,x.browser);i[d]=majorize(i[f]);if(_&&r&&r.brave&&typeof r.brave.isBrave==s){i[u]=\"Brave\"}return i};this.getCPU=function(){var i={};i[h]=a;rgxMapper.call(i,n,x.cpu);return i};this.getDevice=function(){var i={};i[m]=a;i[c]=a;i[p]=a;rgxMapper.call(i,n,x.device);if(_&&!i[p]&&v&&v.mobile){i[p]=g}if(_&&i[c]==\"Macintosh\"&&r&&typeof r.standalone!==b&&r.maxTouchPoints&&r.maxTouchPoints>2){i[c]=\"iPad\";i[p]=k}return i};this.getEngine=function(){var i={};i[u]=a;i[f]=a;rgxMapper.call(i,n,x.engine);return i};this.getOS=function(){var i={};i[u]=a;i[f]=a;rgxMapper.call(i,n,x.os);if(_&&!i[u]&&v&&v.platform!=\"Unknown\"){i[u]=v.platform.replace(/chrome os/i,L).replace(/macos/i,Z)}return i};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return n};this.setUA=function(i){n=typeof i===l&&i.length>q?trim(i,q):i;return this};this.setUA(n);return this};UAParser.VERSION=r;UAParser.BROWSER=enumerize([u,f,d]);UAParser.CPU=enumerize([h]);UAParser.DEVICE=enumerize([c,m,p,v,g,x,k,_,y]);UAParser.ENGINE=UAParser.OS=enumerize([u,f]);if(typeof e!==b){if(\"object\"!==b&&i.exports){e=i.exports=UAParser}e.UAParser=UAParser}else{if(typeof define===s&&define.amd){define((function(){return UAParser}))}else if(typeof o!==b){o.UAParser=UAParser}}var Q=typeof o!==b&&(o.jQuery||o.Zepto);if(Q&&!Q.ua){var Y=new UAParser;Q.ua=Y.getResult();Q.ua.get=function(){return Y.getUA()};Q.ua.set=function(i){Y.setUA(i);var e=Y.getResult();for(var o in e){Q.ua[o]=e[o]}}}})(typeof window===\"object\"?window:this)}};var e={};function __nccwpck_require__(o){var a=e[o];if(a!==undefined){return a.exports}var r=e[o]={exports:{}};var t=true;try{i[o].call(r.exports,r,r.exports,__nccwpck_require__);t=false}finally{if(t)delete e[o]}return r.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var o=__nccwpck_require__(226);module.exports=o})();","import parseua from \"next/dist/compiled/ua-parser-js\";\nexport function isBot(input) {\n    return /Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(input);\n}\nexport function userAgentFromString(input) {\n    return {\n        ...parseua(input),\n        isBot: input === undefined ? false : isBot(input)\n    };\n}\nexport function userAgent({ headers }) {\n    return userAgentFromString(headers.get(\"user-agent\") || undefined);\n}\n\n//# sourceMappingURL=user-agent.js.map","const GlobalURLPattern = // @ts-expect-error: URLPattern is not available in Node.js\ntypeof URLPattern === \"undefined\" ? undefined : URLPattern;\nexport { GlobalURLPattern as URLPattern };\n\n//# sourceMappingURL=url-pattern.js.map","// Alias index file of next/server for edge runtime for tree-shaking purpose\nexport { ImageResponse } from \"../spec-extension/image-response\";\nexport { NextRequest } from \"../spec-extension/request\";\nexport { NextResponse } from \"../spec-extension/response\";\nexport { userAgent, userAgentFromString } from \"../spec-extension/user-agent\";\nexport { URLPattern } from \"../spec-extension/url-pattern\";\n\n//# sourceMappingURL=index.js.map","export * from \"../server/web/exports/index\";\n\n//# sourceMappingURL=server.js.map"],"names":["module","exports","require","runtime","corsHeaders","supabaseUrl","process","env","SUPABASE_URL","supabaseKey","SUPABASE_SERVICE_ROLE_KEY","SUPABASE_ANON_KEY","RISK_ACTIONS","critical","urgency","actions","template","high","medium","low","OPTIONS","NextResponse","status","headers","GET","request","searchParams","URL","url","academyId","get","riskLevel","limit","parseInt","json","success","demo_mode","data","summary","total","potential_loss","students","id","name","grade","churn_risk_score","churn_risk_level","attendance_rate","homework_rate","payment_status","monthly_fee","recommended_actions","query","supabase","createClient","from","select","eq","order","ascending","error","filter","s","length","potentialLoss","reduce","sum","parseFloat","enrichedStudents","map","student","console","message","POST","body","studentId","action","script","trim","single","generateConsultationScript","outcome","notes","duration","consultation","insert","student_id","type","trigger_reason","conducted_at","Date","toISOString","duration_minutes","academy_id","outcome_type","outcome_date","split","consultation_id","base_value","multiplier","contribution_rate","confirmed_at","description","update","last_consultation_at","riskFactors","push","grade_trend","f","join","toUpperCase","routeModule","module_compiled","AppRouteRouteModule","definition","kind","route_kind","x","APP_ROUTE","page","pathname","filename","bundlePath","resolvedPagePath","nextConfigOutput","userland","route_namespaceObject","requestAsyncStorage","staticGenerationAsyncStorage","serverHooks","originalPathname","patchFetch","patch_fetch","XH","ComponentMod","route_next_edge_ssr_entry_namespaceObject","next_edge_app_route_loaderabsolutePagePath_private_next_app_dir_2Fapi_2Fchurn_2Froute_ts_page_2Fapi_2Fchurn_2Froute_appDirLoader_bmV4dC1hcHAtbG9hZGVyP25hbWU9YXBwJTJGYXBpJTJGY2h1cm4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmNodXJuJTJGcm91dGUmcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjaHVybiUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm9zZWhvJTJGRGVza3RvcCUyRmF1dHVzJTJGdmVyY2VsLWFwaSUyRmFwcCZhcHBQYXRocz0lMkZhcGklMkZjaHVybiUyRnJvdXRlJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEIQ_3D_3D_nextConfigOutput_preferredRegion_middlewareConfig_e30_3D_","edge_route_module_wrapper","a","wrap","__WEBPACK_AMD_DEFINE_RESULT__","i","e","o","b","w","l","d","c","u","p","m","h","v","g","k","_","y","T","S","z","N","A","C","O","U","j","R","M","B","V","D","I","F","G","H","L","Z","extend","concat","enumerize","has","lowerize","indexOf","toLowerCase","replace","substring","rgxMapper","r","t","n","exec","call","test","strMapper","X","ME","XP","Vista","RT","K","browser","cpu","device","engine","E","os","UAParser","getResult","navigator","userAgent","userAgentData","getBrowser","brave","isBrave","getCPU","getDevice","mobile","standalone","maxTouchPoints","getEngine","getOS","platform","ua","getUA","setUA","VERSION","BROWSER","CPU","DEVICE","ENGINE","OS","__webpack_require__","amdO","undefined","Q","jQuery","Zepto","Y","set","window","__nccwpck_require__","ab","__dirname","URLPattern"],"sourceRoot":""}