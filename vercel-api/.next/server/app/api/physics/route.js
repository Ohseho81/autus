(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{2067:e=>{"use strict";e.exports=require("node:async_hooks")},6195:e=>{"use strict";e.exports=require("node:buffer")},4851:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ComponentMod:()=>O,default:()=>E});var s={};r.r(s),r.d(s,{GET:()=>g,OPTIONS:()=>m,POST:()=>h,runtime:()=>p});var n={};r.r(n),r.d(n,{originalPathname:()=>k,patchFetch:()=>w,requestAsyncStorage:()=>x,routeModule:()=>f,serverHooks:()=>_,staticGenerationAsyncStorage:()=>v});var a=r(932),o=r(2561),i=r(4828),u=r(6631),c=r(9985),y=r(8621),l=r(8178);let p="edge",d={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"};async function m(){return new c.xk(null,{status:200,headers:d})}async function g(e){try{let{searchParams:t}=new URL(e.url),r=t.get("userId");if(!r)return c.xk.json({success:!1,error:"userId is required"},{status:400,headers:d});let s=await y.db.getOrganisms(r),n=s.map(e=>({...e,computed_v:(0,l.q$)(e.mint,e.tax,e.synergy),summary:(0,l.wb)({mint:e.mint,tax:e.tax,synergy:e.synergy,entropy:e.entropy,velocity:e.velocity,friction:e.friction}),recommended_impulse:(0,l.Kl)({mint:e.mint,tax:e.tax,synergy:e.synergy,entropy:e.entropy,velocity:e.velocity,friction:e.friction})})),a=n.reduce((e,t)=>e+t.computed_v,0),o=s.length>0?s.reduce((e,t)=>e+t.synergy,0)/s.length:0,i=n.filter(e=>"urgent"===e.summary.status).length;return c.xk.json({success:!0,data:{organisms:n,summary:{total_v:a,avg_synergy:o,organism_count:s.length,urgent_count:i}}},{status:200,headers:d})}catch(e){return console.error("Physics GET Error:",e),c.xk.json({success:!1,error:e.message},{status:500,headers:d})}}async function h(e){try{let t=await e.json(),{action:r,organismId:s,impulseType:n,intensity:a}=t;if("apply_impulse"===r){if(!s||!n)return c.xk.json({success:!1,error:"organismId and impulseType are required"},{status:400,headers:d});let e=await y.db.getOrganism(s);if(!e)return c.xk.json({success:!1,error:"Organism not found"},{status:404,headers:d});let t={mint:e.mint,tax:e.tax,synergy:e.synergy,entropy:e.entropy,velocity:e.velocity,friction:e.friction},r=(0,l.CY)(t,n,a||1),o=(0,l.HA)({mint:t.mint,tax:t.tax,synergy:t.synergy},{mint:r.mint,tax:r.tax,synergy:r.synergy});return await y.db.updateOrganism(s,{mint:r.mint,tax:r.tax,synergy:r.synergy,entropy:r.entropy,velocity:r.velocity,friction:r.friction,value_v:(0,l.q$)(r.mint,r.tax,r.synergy)}),c.xk.json({success:!0,data:{before:t,after:r,v_growth:o,new_v:(0,l.q$)(r.mint,r.tax,r.synergy),summary:(0,l.wb)(r)}},{status:200,headers:d})}if("calculate_v"===r){let{mint:e,tax:r,synergy:s,time:n}=t,a=(0,l.q$)(e,r,s,n||1);return c.xk.json({success:!0,data:{v:a,formula:`V = (${e} - ${r}) \xd7 (1 + ${s})^${n||1}`}},{status:200,headers:d})}return c.xk.json({success:!1,error:"Unknown action"},{status:400,headers:d})}catch(e){return console.error("Physics POST Error:",e),c.xk.json({success:!1,error:e.message},{status:500,headers:d})}}let f=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/physics/route",pathname:"/api/physics",filename:"route",bundlePath:"app/api/physics/route"},resolvedPagePath:"/Users/oseho/Desktop/autus/vercel-api/app/api/physics/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:x,staticGenerationAsyncStorage:v,serverHooks:_}=f,k="/api/physics/route";function w(){return(0,u.XH)({serverHooks:_,staticGenerationAsyncStorage:v})}let O=n,E=a.a.wrap(f)}},e=>{var t=t=>e(e.s=t);e.O(0,[546,956,629],()=>t(4851));var r=e.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/physics/route"]=r}]);
//# sourceMappingURL=route.js.map