/**
 * ═══════════════════════════════════════════════════════════════════════════════
 * AUTUS 7-Layer Contract CSS (LOCKED)
 * 
 * 토큰 강제: z-index는 반드시 이 변수만 사용
 * display:none 금지 → visibility:hidden 사용 (레이아웃 흔들림 방지)
 * ═══════════════════════════════════════════════════════════════════════════════
 */

:root {
  /* 7-Layer z-index (LOCKED) */
  --z-L1: 10;  /* Base Canvas - 지도/배경 */
  --z-L2: 20;  /* Route Geometry - 경로선/POI */
  --z-L3: 30;  /* HUD Chrome - 상단 바/시계/배터리 */
  --z-L4: 40;  /* Primary Panel - 좌측 메뉴 패널 */
  --z-L5: 50;  /* Maneuver Card - 턴바이턴 카드 */
  --z-L6: 60;  /* Alerts & Intervention - 경고 오버레이 */
  --z-L7: 70;  /* Modal / System Overlay - 시스템 모달 */
}

/* Layer Attribute Selectors */
[data-layer="L1"] {
  position: absolute;
  inset: 0;
  z-index: var(--z-L1);
}

[data-layer="L2"] {
  position: absolute;
  inset: 0;
  z-index: var(--z-L2);
  pointer-events: none;
}

[data-layer="L3"] {
  position: absolute;
  inset: 0;
  z-index: var(--z-L3);
  pointer-events: none;
}

[data-layer="L4"] {
  position: absolute;
  inset: 0;
  z-index: var(--z-L4);
  pointer-events: auto;
}

[data-layer="L5"] {
  position: absolute;
  inset: 0;
  z-index: var(--z-L5);
  pointer-events: auto;
}

[data-layer="L6"] {
  position: absolute;
  inset: 0;
  z-index: var(--z-L6);
  pointer-events: none;
}

[data-layer="L7"] {
  position: absolute;
  inset: 0;
  z-index: var(--z-L7);
  pointer-events: auto;
}

/* Left Panel States */
[data-leftpanel="collapsed"] [data-layer="L4"] {
  width: 0;
  opacity: 0;
  pointer-events: none;
}

[data-leftpanel="rail"] [data-layer="L4"] {
  width: 80px;
  opacity: 1;
}

[data-leftpanel="expanded"] [data-layer="L4"] {
  width: 320px;
  opacity: 1;
}

/* Maneuver Card States */
[data-maneuver="hidden"] [data-layer="L5"] {
  visibility: hidden;
}

[data-maneuver="collapsed"] [data-layer="L5"] {
  visibility: visible;
  transform: translateY(calc(100% - 60px));
}

[data-maneuver="active"] [data-layer="L5"] {
  visibility: visible;
  transform: translateY(0);
}

[data-maneuver="promoted"] [data-layer="L5"] {
  visibility: visible;
  transform: translateY(0) scale(1.05);
  filter: drop-shadow(0 0 20px rgba(255, 68, 68, 0.5));
}

/* Mode-specific overrides */
[data-mode="ALERT"] [data-layer="L6"] {
  visibility: visible;
  animation: alert-pulse 1s ease-in-out infinite;
}

@keyframes alert-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

[data-mode="SETTINGS"] [data-layer="L7"] {
  visibility: visible;
  background: rgba(0, 0, 0, 0.8);
}
