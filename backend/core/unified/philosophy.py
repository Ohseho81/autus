"""
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŒŒ AUTUS v3.0 - Core Philosophy
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   "ë¬¼ë¦¬ë²•ì¹™ê³¼ ì„¸ìƒì˜ ë³¸ì§ˆì€ ì•„ì£¼ ë‹¨ìˆœí•˜ë‹¤."                                  â”‚
â”‚                                                                             â”‚
â”‚   êµ¬ì¡°ëŠ” ì´ë¯¸ ì™„ì„±ë˜ì–´ ìˆë‹¤.                                                 â”‚
â”‚   ì‚¬ìš©ìê°€ ë°ì´í„°ë¥¼ ìŒ“ì„ìˆ˜ë¡ ê¶ê·¹ì ì¸ ê²°ê³¼ë¬¼ì´ ì±„ì›Œì§„ë‹¤.                     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ìš´ì˜ ì›ì¹™:
1. ì‚¬ìš©ì í´ë¼ìš°ë“œ/ë¡œì»¬ì—ì„œ ìš´ì˜ (ë¹„ìš©/ì±…ì„/ê¶Œí•œ = ì‚¬ìš©ì)
2. AUTUSëŠ” ì‚¬ìš©ì ë³€ìˆ˜ + ìƒí˜¸ì‘ìš© ë³€ìˆ˜ë§Œ ìˆ˜ì§‘
3. ê¶ê·¹ì  ê²°ê³¼ë¬¼ì€ ì´ë¯¸ ì¡´ì¬, ë°ì´í„°ê°€ ì±„ì›Œë‚˜ê°
"""

from dataclasses import dataclass, field
from typing import Dict, List, Literal, Optional, Set
from datetime import datetime
from enum import Enum
import json
import hashlib


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Œ í•µì‹¬ ì›ì¹™: ê¶Œí•œ êµ¬ì¡°
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

class OwnershipPrinciple:
    """
    ì†Œìœ ê¶Œ ì›ì¹™
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ì‚¬ìš©ì ì†Œìœ  (100%)          â”‚  AUTUS ê¶Œí•œ (ìœ„ì„)                       â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  â€¢ ì¸í”„ë¼ (í´ë¼ìš°ë“œ/ë¡œì»¬)    â”‚  â€¢ ë°ì´í„° ì ‘ê·¼ (ì½ê¸°)                    â”‚
    â”‚  â€¢ ë¹„ìš©                      â”‚  â€¢ ë°ì´í„° ì‚­ì œ (ì •ë¦¬)                    â”‚
    â”‚  â€¢ ì±…ì„                      â”‚  â€¢ êµ¬ì¡° ì œê³µ                             â”‚
    â”‚  â€¢ ê¶Œí•œ                      â”‚  â€¢ ë²•ì¹™ ì ìš©                             â”‚
    â”‚  â€¢ ì›ë³¸ ë°ì´í„°               â”‚                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    """
    
    USER_OWNS = [
        'infrastructure',      # ì¸í”„ë¼
        'cost',               # ë¹„ìš©
        'responsibility',     # ì±…ì„
        'authority',          # ê¶Œí•œ
        'raw_data',           # ì›ë³¸ ë°ì´í„°
        'decision',           # ìµœì¢… ê²°ì •
    ]
    
    AUTUS_DELEGATES = [
        'data_access',        # ë°ì´í„° ì ‘ê·¼ (ì½ê¸°)
        'data_cleanup',       # ë°ì´í„° ì‚­ì œ (ì •ë¦¬)
        'structure',          # êµ¬ì¡° ì œê³µ
        'physics_laws',       # ë¬¼ë¦¬ ë²•ì¹™ ì ìš©
        'proposal',           # ì œì•ˆ (ê²°ì • ì•„ë‹˜)
    ]


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Œ ìˆ˜ì§‘ ë°ì´í„°: ì˜¤ì§ 2ê°€ì§€
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

@dataclass
class UserVariable:
    """
    ì‚¬ìš©ì ë³€ìˆ˜ (ê°œì¸ ë…¸ë“œ ìƒíƒœ)
    
    ìˆ˜ì§‘í•˜ëŠ” ê²ƒ:
    - 36ê°œ ë…¸ë“œì˜ ì••ë ¥ê°’ (0~1)
    - ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì—…ë¬´ì˜ P, M, Îµ, W
    
    ìˆ˜ì§‘í•˜ì§€ ì•ŠëŠ” ê²ƒ:
    - ì´ë¦„, ì´ë©”ì¼, ì „í™”ë²ˆí˜¸
    - êµ¬ì²´ì ì¸ ê¸ˆì•¡
    - êµ¬ì²´ì ì¸ ë‚´ìš©
    """
    user_id: str                          # ìµëª… í•´ì‹œ ID
    node_pressures: Dict[str, float]      # 36ë…¸ë“œ ì••ë ¥
    work_variables: Dict[str, Dict]       # ì—…ë¬´ë³„ P, M, Îµ, W
    timestamp: datetime = field(default_factory=datetime.now)


@dataclass  
class InteractionVariable:
    """
    ìƒí˜¸ì‘ìš© ë³€ìˆ˜ (ë…¸ë“œ ê°„ ì—°ê²°)
    
    ìˆ˜ì§‘í•˜ëŠ” ê²ƒ:
    - ì—£ì§€ ê°€ì¤‘ì¹˜ (ì—°ê²° ê°•ë„)
    - ì—£ì§€ ì „ë„ìœ¨ (ì „íŒŒ ì†ë„)
    - ì „íŒŒ ë¸íƒ€ (ë³€í™”ëŸ‰)
    
    ìˆ˜ì§‘í•˜ì§€ ì•ŠëŠ” ê²ƒ:
    - ëˆ„êµ¬ì™€ ìƒí˜¸ì‘ìš©í–ˆëŠ”ì§€
    - êµ¬ì²´ì ì¸ ê±°ë˜ ë‚´ìš©
    """
    user_id: str
    edge_weights: Dict[str, float]        # ì—£ì§€ë³„ ê°€ì¤‘ì¹˜
    propagation_deltas: Dict[str, float]  # ì „íŒŒ ë³€í™”ëŸ‰
    timestamp: datetime = field(default_factory=datetime.now)


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Œ ê¶ê·¹ì  ê²°ê³¼ë¬¼: ì´ë¯¸ ì™„ì„±ëœ êµ¬ì¡°
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

class UltimateStructure:
    """
    ê¶ê·¹ì  ê²°ê³¼ë¬¼ êµ¬ì¡°
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚   "êµ¬ì¡°ëŠ” ì´ë¯¸ ì™„ì„±ë˜ì–´ ìˆë‹¤. ë°ì´í„°ê°€ ì±„ì›Œë‚˜ê°ˆ ë¿."                     â”‚
    â”‚                                                                         â”‚
    â”‚   36 ë…¸ë“œ Ã— 29 ì—£ì§€ Ã— 288 ERT = ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë²•ì¹™                       â”‚
    â”‚                                                                         â”‚
    â”‚   ì‚¬ìš©ìê°€ í•˜ëŠ” ê²ƒ: ìì‹ ì˜ ì••ë ¥ê°’ì„ ì±„ì›Œë„£ê¸°                             â”‚
    â”‚   AUTUSê°€ í•˜ëŠ” ê²ƒ: ë²•ì¹™ì— ë”°ë¼ ì „íŒŒí•˜ê³  ì˜ˆì¸¡í•˜ê¸°                         â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    """
    
    # ì´ë¯¸ ì™„ì„±ëœ êµ¬ì¡°
    NODES = 36                    # ê³ ì •
    EDGES = 29                    # ê³ ì •
    ERT_COMBINATIONS = 288        # 12 Ã— 6 Ã— 4 = ê³ ì •
    STRATEGIES = 4                # DELETE, AUTOMATE, PARALLELIZE, HUMANIZE
    EDGE_TYPES = 4                # DEPENDENCY, BUFFER, SUBSTITUTION, AMPLIFY
    
    # ë¬¼ë¦¬ ë²•ì¹™ (ë¶ˆë³€)
    LAWS = {
        'entropy_increase': 'dS/dt â‰¥ 0',           # ì—”íŠ¸ë¡œí”¼ ìì—° ì¦ê°€
        'pressure_propagation': 'Î”P = kÂ·wÂ·(Pj-Pi)', # ì••ë ¥ ì „íŒŒ
        'mass_inertia': 'F = mÂ·a',                  # ê´€ì„±
        'energy_conservation': 'E_in = E_out',      # ì—ë„ˆì§€ ë³´ì¡´
    }
    
    @classmethod
    def describe(cls) -> str:
        return f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸŒŒ ê¶ê·¹ì  ê²°ê³¼ë¬¼ êµ¬ì¡° (ì´ë¯¸ ì™„ì„±ë¨)                                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   êµ¬ì¡° ìš”ì†Œ:                                                                  â•‘
â•‘   â”œâ”€â”€ ë…¸ë“œ: {cls.NODES}ê°œ (FINANCIAL, BIOMETRIC, OPERATIONAL, CUSTOMER, EXTERNAL)  â•‘
â•‘   â”œâ”€â”€ ì—£ì§€: {cls.EDGES}ê°œ (DEPENDENCY, BUFFER, SUBSTITUTION, AMPLIFY)              â•‘
â•‘   â”œâ”€â”€ ERT ì¡°í•©: {cls.ERT_COMBINATIONS}ê°œ (12 Entity Ã— 6 Relation Ã— 4 Time)             â•‘
â•‘   â””â”€â”€ ì „ëµ: {cls.STRATEGIES}ê°œ (DELETE, AUTOMATE, PARALLELIZE, HUMANIZE)            â•‘
â•‘                                                                               â•‘
â•‘   ë¬¼ë¦¬ ë²•ì¹™:                                                                  â•‘
â•‘   â”œâ”€â”€ ì—”íŠ¸ë¡œí”¼ ì¦ê°€: dS/dt â‰¥ 0 (ë°©ì¹˜í•˜ë©´ ì•…í™”)                               â•‘
â•‘   â”œâ”€â”€ ì••ë ¥ ì „íŒŒ: Î”P = kÂ·wÂ·(Pj-Pi) (ì—°ê²°ëœ ë…¸ë“œë¡œ ì „íŒŒ)                       â•‘
â•‘   â”œâ”€â”€ ê´€ì„±: F = mÂ·a (ë³€í™”ì— ì €í•­)                                            â•‘
â•‘   â””â”€â”€ ì—ë„ˆì§€ ë³´ì¡´: E_in = E_out (ì´ëŸ‰ ë¶ˆë³€)                                  â•‘
â•‘                                                                               â•‘
â•‘   ì‚¬ìš©ìê°€ ì±„ìš°ëŠ” ê²ƒ: 36ê°œ ë…¸ë“œì˜ ì••ë ¥ê°’ (0~1)                               â•‘
â•‘   AUTUSê°€ ê³„ì‚°í•˜ëŠ” ê²ƒ: ë²•ì¹™ì— ë”°ë¥¸ ì „íŒŒì™€ ì˜ˆì¸¡                               â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Œ ìš´ì˜ ëª¨ë“œ: ë¡œì»¬ vs í´ë¼ìš°ë“œ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

class DeploymentMode(Enum):
    """ë°°í¬ ëª¨ë“œ"""
    LOCAL = 'local'           # ì‚¬ìš©ì ë¡œì»¬ ë¨¸ì‹ 
    CLOUD_SELF = 'cloud_self' # ì‚¬ìš©ì í´ë¼ìš°ë“œ (AWS, GCP, Azure ë“±)
    # CLOUD_AUTUS = 'cloud_autus'  # â† ì¡´ì¬í•˜ì§€ ì•ŠìŒ! AUTUSëŠ” ì¸í”„ë¼ ì œê³µ ì•ˆí•¨


@dataclass
class DeploymentConfig:
    """
    ë°°í¬ ì„¤ì •
    
    í•µì‹¬: AUTUSëŠ” ì¸í”„ë¼ë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.
    ì‚¬ìš©ìê°€ ìì‹ ì˜ í™˜ê²½ì—ì„œ ìš´ì˜í•œë‹¤.
    """
    mode: DeploymentMode
    
    # ì‚¬ìš©ì ì±…ì„ ì˜ì—­
    storage_path: str              # ë°ì´í„° ì €ì¥ ê²½ë¡œ (ì‚¬ìš©ì ê²°ì •)
    backup_enabled: bool           # ë°±ì—… ì—¬ë¶€ (ì‚¬ìš©ì ê²°ì •)
    encryption_key: Optional[str]  # ì•”í˜¸í™” í‚¤ (ì‚¬ìš©ì ê´€ë¦¬)
    
    # AUTUS ìœ„ì„ ì˜ì—­
    autus_data_access: bool = True    # ë°ì´í„° ì ‘ê·¼ í—ˆìš©
    autus_data_cleanup: bool = True   # ë°ì´í„° ì •ë¦¬ í—ˆìš©
    
    def validate(self) -> bool:
        """ì„¤ì • ê²€ì¦"""
        if self.mode == DeploymentMode.LOCAL:
            return bool(self.storage_path)
        return True


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Œ ë°ì´í„° ìˆ˜ì§‘ê¸°: ì˜¤ì§ ë³€ìˆ˜ë§Œ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

class VariableCollector:
    """
    ë³€ìˆ˜ ìˆ˜ì§‘ê¸°
    
    ìˆ˜ì§‘ ì›ì¹™:
    1. ì‚¬ìš©ì ë³€ìˆ˜: ë…¸ë“œ ì••ë ¥, ì—…ë¬´ ë³€ìˆ˜ (P, M, Îµ, W)
    2. ìƒí˜¸ì‘ìš© ë³€ìˆ˜: ì—£ì§€ ê°€ì¤‘ì¹˜, ì „íŒŒ ë¸íƒ€
    
    ì ˆëŒ€ ìˆ˜ì§‘í•˜ì§€ ì•ŠìŒ:
    - PII (ê°œì¸ì‹ë³„ì •ë³´)
    - êµ¬ì²´ì  ê¸ˆì•¡
    - êµ¬ì²´ì  ë‚´ìš©
    - ì œ3ì ì •ë³´
    """
    
    def __init__(self, user_id: str):
        # ìµëª…í™”ëœ ì‚¬ìš©ì ID
        self.user_id = self._anonymize(user_id)
        self.user_vars: List[UserVariable] = []
        self.interaction_vars: List[InteractionVariable] = []
    
    def _anonymize(self, raw_id: str) -> str:
        """ID ìµëª…í™” (í•´ì‹œ)"""
        return hashlib.sha256(raw_id.encode()).hexdigest()[:16]
    
    def collect_user_variable(
        self,
        node_pressures: Dict[str, float],
        work_variables: Optional[Dict[str, Dict]] = None
    ) -> UserVariable:
        """ì‚¬ìš©ì ë³€ìˆ˜ ìˆ˜ì§‘"""
        # ì••ë ¥ê°’ë§Œ ì¶”ì¶œ (0~1 ë²”ìœ„ë¡œ ì •ê·œí™”)
        normalized_pressures = {
            k: max(0, min(1, v)) 
            for k, v in node_pressures.items()
        }
        
        # ì—…ë¬´ ë³€ìˆ˜ë§Œ ì¶”ì¶œ (P, M, Îµ, Wë§Œ)
        clean_work_vars = {}
        if work_variables:
            for work_id, vars in work_variables.items():
                clean_work_vars[work_id] = {
                    'P': vars.get('pressure', 0.5),
                    'M': vars.get('mass', 1.0),
                    'Îµ': vars.get('entropy', 0.3),
                    'W': vars.get('weight', 0.5),
                }
        
        var = UserVariable(
            user_id=self.user_id,
            node_pressures=normalized_pressures,
            work_variables=clean_work_vars,
        )
        self.user_vars.append(var)
        return var
    
    def collect_interaction_variable(
        self,
        edge_weights: Dict[str, float],
        propagation_deltas: Dict[str, float]
    ) -> InteractionVariable:
        """ìƒí˜¸ì‘ìš© ë³€ìˆ˜ ìˆ˜ì§‘"""
        var = InteractionVariable(
            user_id=self.user_id,
            edge_weights=edge_weights,
            propagation_deltas=propagation_deltas,
        )
        self.interaction_vars.append(var)
        return var
    
    def get_statistics(self) -> Dict:
        """ìˆ˜ì§‘ í†µê³„ (ë©”íƒ€ë°ì´í„°ë§Œ)"""
        return {
            'user_id': self.user_id,
            'user_var_count': len(self.user_vars),
            'interaction_var_count': len(self.interaction_vars),
            'total_data_points': len(self.user_vars) + len(self.interaction_vars),
            # êµ¬ì²´ì  ë°ì´í„°ëŠ” í¬í•¨í•˜ì§€ ì•ŠìŒ
        }


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Œ ì‚¬ìš©ì ë°ì´í„° ì €ì¥ì†Œ: ë¡œì»¬ ìš°ì„ 
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

@dataclass
class UserDataStore:
    """
    ì‚¬ìš©ì ë°ì´í„° ì €ì¥ì†Œ
    
    í•µì‹¬: ë°ì´í„°ëŠ” ì‚¬ìš©ì í™˜ê²½ì—ë§Œ ì €ì¥
    AUTUS ì„œë²„ë¡œ ì „ì†¡ë˜ì§€ ì•ŠìŒ
    """
    config: DeploymentConfig
    
    # ì €ì¥ëœ ë°ì´í„° (ë©”ëª¨ë¦¬/ë¡œì»¬)
    node_history: List[Dict] = field(default_factory=list)
    work_history: List[Dict] = field(default_factory=list)
    cycle_history: List[Dict] = field(default_factory=list)
    
    def save_snapshot(self, state: Dict) -> str:
        """ìƒíƒœ ìŠ¤ëƒ…ìƒ· ì €ì¥ (ë¡œì»¬)"""
        snapshot = {
            'timestamp': datetime.now().isoformat(),
            'node_pressures': {
                k: v for k, v in state.get('nodes', {}).items()
            },
            'stats': state.get('stats', {}),
        }
        self.node_history.append(snapshot)
        return f"snapshot_{len(self.node_history)}"
    
    def get_trend(self, node_id: str, periods: int = 10) -> List[float]:
        """ë…¸ë“œ ì••ë ¥ ì¶”ì„¸"""
        pressures = []
        for snapshot in self.node_history[-periods:]:
            p = snapshot.get('node_pressures', {}).get(node_id, 0)
            pressures.append(p)
        return pressures
    
    def cleanup_old_data(self, days: int = 30) -> int:
        """ì˜¤ë˜ëœ ë°ì´í„° ì •ë¦¬ (AUTUS ìœ„ì„ ê¶Œí•œ)"""
        if not self.config.autus_data_cleanup:
            return 0
        
        cutoff = datetime.now().timestamp() - (days * 86400)
        before = len(self.node_history)
        
        self.node_history = [
            s for s in self.node_history
            if datetime.fromisoformat(s['timestamp']).timestamp() > cutoff
        ]
        
        return before - len(self.node_history)


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Œ AUTUS ì¸ìŠ¤í„´ìŠ¤: ì‚¬ìš©ì í™˜ê²½ì—ì„œ ì‹¤í–‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

class AutusInstance:
    """
    AUTUS ì¸ìŠ¤í„´ìŠ¤
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                         â”‚
    â”‚   ì´ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì‚¬ìš©ì í™˜ê²½ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.                              â”‚
    â”‚                                                                         â”‚
    â”‚   â€¢ ë¡œì»¬ ë¨¸ì‹  ë˜ëŠ” ì‚¬ìš©ì í´ë¼ìš°ë“œ                                      â”‚
    â”‚   â€¢ ë°ì´í„°ëŠ” ì‚¬ìš©ì ì €ì¥ì†Œì—ë§Œ ì¡´ì¬                                     â”‚
    â”‚   â€¢ AUTUS ì„œë²„ë¡œ ì „ì†¡ë˜ëŠ” ê²ƒ: ì—†ìŒ                                      â”‚
    â”‚                                                                         â”‚
    â”‚   AUTUSê°€ ì œê³µí•˜ëŠ” ê²ƒ:                                                  â”‚
    â”‚   â€¢ 36ë…¸ë“œ êµ¬ì¡° (ë³€í•˜ì§€ ì•ŠìŒ)                                           â”‚
    â”‚   â€¢ 29ì—£ì§€ ì—°ê²° (ë³€í•˜ì§€ ì•ŠìŒ)                                           â”‚
    â”‚   â€¢ 288 ERT ë¶„ë¥˜ (ë³€í•˜ì§€ ì•ŠìŒ)                                          â”‚
    â”‚   â€¢ ë¬¼ë¦¬ ë²•ì¹™ (ì˜ì›íˆ ë™ì¼)                                             â”‚
    â”‚                                                                         â”‚
    â”‚   ì‚¬ìš©ìê°€ ì±„ìš°ëŠ” ê²ƒ:                                                   â”‚
    â”‚   â€¢ ë…¸ë“œ ì••ë ¥ê°’                                                         â”‚
    â”‚   â€¢ ì—…ë¬´ ë³€ìˆ˜ (P, M, Îµ, W)                                              â”‚
    â”‚                                                                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    """
    
    def __init__(self, user_id: str, config: DeploymentConfig):
        self.user_id = user_id
        self.config = config
        self.collector = VariableCollector(user_id)
        self.store = UserDataStore(config)
        self.created_at = datetime.now()
    
    def describe_philosophy(self) -> str:
        """ì² í•™ ì„¤ëª…"""
        return """
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸŒŒ AUTUS ìš´ì˜ ì² í•™                                                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   1. ìš´ì˜ ìœ„ì¹˜: ì‚¬ìš©ì í´ë¼ìš°ë“œ/ë¡œì»¬                                          â•‘
â•‘      â†’ ëª¨ë“  ë¹„ìš©/ì±…ì„/ê¶Œí•œì€ ì‚¬ìš©ìê°€ ê°–ëŠ”ë‹¤                                  â•‘
â•‘      â†’ AUTUSëŠ” ë°ì´í„° ì ‘ê·¼ê³¼ ì‚­ì œ ê¶Œí•œë§Œ ìœ„ì„ë°›ëŠ”ë‹¤                           â•‘
â•‘                                                                               â•‘
â•‘   2. ìˆ˜ì§‘ ë°ì´í„°: ì˜¤ì§ 2ê°€ì§€                                                  â•‘
â•‘      â†’ ì‚¬ìš©ì ë³€ìˆ˜: ë…¸ë“œ ì••ë ¥(0~1), ì—…ë¬´ ë³€ìˆ˜(P,M,Îµ,W)                        â•‘
â•‘      â†’ ìƒí˜¸ì‘ìš© ë³€ìˆ˜: ì—£ì§€ ê°€ì¤‘ì¹˜, ì „íŒŒ ë¸íƒ€                                  â•‘
â•‘      â†’ ìˆ˜ì§‘ ì•ˆí•¨: PII, ê¸ˆì•¡, ë‚´ìš©, ì œ3ì ì •ë³´                                 â•‘
â•‘                                                                               â•‘
â•‘   3. ê¶ê·¹ì  ê²°ê³¼ë¬¼: ì´ë¯¸ ì™„ì„±ë¨                                               â•‘
â•‘      â†’ 36ë…¸ë“œ Ã— 29ì—£ì§€ Ã— 288ERT = êµ¬ì¡°ëŠ” ê³ ì •                                 â•‘
â•‘      â†’ ì‚¬ìš©ìê°€ ëŠ˜ìˆ˜ë¡, ë°ì´í„°ê°€ ìŒ“ì¼ìˆ˜ë¡ ì±„ì›Œì§                              â•‘
â•‘      â†’ ë¬¼ë¦¬ë²•ì¹™ì€ ë‹¨ìˆœí•˜ê³  ë¶ˆë³€                                               â•‘
â•‘                                                                               â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ "ë¬¼ë¦¬ë²•ì¹™ê³¼ ì„¸ìƒì˜ ë³¸ì§ˆì€ ì•„ì£¼ ë‹¨ìˆœí•˜ë‹¤."                                     â•‘
â•‘ "êµ¬ì¡°ëŠ” ë§Œë“¤ê³  ì‹œì‘í•œë‹¤. ë°ì´í„°ê°€ ì±„ì›Œë‚˜ê°„ë‹¤."                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""
    
    def get_status(self) -> Dict:
        """ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ"""
        return {
            'user_id': self.collector.user_id,  # ìµëª…í™”ë¨
            'deployment_mode': self.config.mode.value,
            'data_points': self.collector.get_statistics()['total_data_points'],
            'snapshots': len(self.store.node_history),
            'structure': {
                'nodes': UltimateStructure.NODES,
                'edges': UltimateStructure.EDGES,
                'ert_combinations': UltimateStructure.ERT_COMBINATIONS,
            },
            'autus_access': self.config.autus_data_access,
            'autus_cleanup': self.config.autus_data_cleanup,
        }


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“Œ ì‹¤í–‰ ì˜ˆì‹œ
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

def demonstrate_philosophy():
    """ì² í•™ ë°ëª¨"""
    print(UltimateStructure.describe())
    
    # ì‚¬ìš©ì í™˜ê²½ ì„¤ì •
    config = DeploymentConfig(
        mode=DeploymentMode.LOCAL,
        storage_path='~/.autus/data',
        backup_enabled=True,
        encryption_key=None,  # ì‚¬ìš©ìê°€ ì„¤ì •
        autus_data_access=True,
        autus_data_cleanup=True,
    )
    
    # AUTUS ì¸ìŠ¤í„´ìŠ¤ ìƒì„± (ì‚¬ìš©ì ë¡œì»¬ì—ì„œ)
    instance = AutusInstance(
        user_id='user@example.com',  # ë‚´ë¶€ì ìœ¼ë¡œ í•´ì‹œë¨
        config=config,
    )
    
    print(instance.describe_philosophy())
    
    # ìƒíƒœ í™•ì¸
    status = instance.get_status()
    print("\nğŸ“Š ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ:")
    print(f"   ì‚¬ìš©ì ID: {status['user_id']} (ìµëª…í™”)")
    print(f"   ë°°í¬ ëª¨ë“œ: {status['deployment_mode']}")
    print(f"   êµ¬ì¡°: {status['structure']['nodes']}ë…¸ë“œ Ã— {status['structure']['ert_combinations']}ERT")
    print(f"   AUTUS ì ‘ê·¼ í—ˆìš©: {status['autus_access']}")
    
    return instance


if __name__ == '__main__':
    demonstrate_philosophy()
