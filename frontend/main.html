<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>AUTUS</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --subject: #00ff88;
      --operator: #00aaff;
      --education: #ff66ff;
      --sponsor: #ffaa00;
      --pnr: #ff4444;
      --safe: #00ff88;
      --warning: #ffaa00;
      --critical: #ff4444;
      --bg: #000;
      --bg-card: rgba(255,255,255,0.02);
      --border: rgba(255,255,255,0.08);
      --text: #fff;
      --text-dim: rgba(255,255,255,0.4);
    }
    html, body { width: 100%; height: 100%; overflow: hidden; background: var(--bg); color: var(--text); font-family: -apple-system, 'SF Pro Display', sans-serif; }
    .app { display: flex; flex-direction: column; height: 100vh; height: 100dvh; }

    /* LAYER 1: EXTERNAL FIELD */
    .external-field { flex: 0 0 auto; padding: 12px 20px; background: linear-gradient(180deg, rgba(255,255,255,0.03) 0%, transparent 100%); border-bottom: 1px solid var(--border); }
    .external-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .logo { font-size: 18px; font-weight: 300; letter-spacing: 4px; }
    .external-label { font-size: 9px; color: var(--text-dim); letter-spacing: 2px; text-transform: uppercase; }
    .external-grid { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px; }
    .external-node { flex: 0 0 auto; min-width: 64px; padding: 8px 12px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; text-align: center; }
    .external-node.safe { border-color: var(--safe); }
    .external-node.warning { border-color: var(--warning); }
    .external-node.critical { border-color: var(--critical); }
    .external-icon { font-size: 16px; margin-bottom: 4px; }
    .external-name { font-size: 9px; color: var(--text-dim); letter-spacing: 0.5px; }
    .external-status { width: 6px; height: 6px; border-radius: 50%; margin: 6px auto 0; }
    .external-node.safe .external-status { background: var(--safe); box-shadow: 0 0 8px var(--safe); }
    .external-node.warning .external-status { background: var(--warning); box-shadow: 0 0 8px var(--warning); }
    .external-node.critical .external-status { background: var(--critical); box-shadow: 0 0 8px var(--critical); animation: pulse 2s infinite; }

    /* LAYER 2: DECISION FIELD */
    .decision-field { flex: 1; position: relative; overflow: hidden; }
    .field-canvas { width: 100%; height: 100%; position: relative; }
    .goal-node { position: absolute; top: 8%; left: 50%; transform: translateX(-50%); text-align: center; }
    .goal-circle { width: 56px; height: 56px; border-radius: 50%; background: radial-gradient(circle, rgba(0,255,136,0.3) 0%, transparent 70%); border: 2px solid var(--safe); display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; animation: goalPulse 3s infinite; }
    .goal-icon { font-size: 24px; }
    .goal-label { font-size: 10px; color: var(--text-dim); letter-spacing: 1px; }
    .goal-name { font-size: 12px; font-weight: 600; color: var(--safe); }
    .path-container { position: absolute; top: 18%; left: 50%; transform: translateX(-50%); width: 90%; max-width: 400px; height: 55%; }
    .path-svg { width: 100%; height: 100%; position: absolute; top: 0; left: 0; }
    .path-line { fill: none; stroke: var(--safe); stroke-width: 3; stroke-linecap: round; opacity: 0.6; }
    .path-line.active { opacity: 1; filter: drop-shadow(0 0 8px var(--safe)); }
    .path-line.pnr { stroke: var(--critical); stroke-dasharray: 8 4; filter: drop-shadow(0 0 8px var(--critical)); }
    .path-line.inactive { stroke: rgba(255,255,255,0.1); stroke-dasharray: 4 4; }
    .decision-node { position: absolute; display: flex; flex-direction: column; align-items: center; transform: translate(-50%, -50%); cursor: pointer; transition: all 0.3s; }
    .decision-node:hover { transform: translate(-50%, -50%) scale(1.1); }
    .node-circle { width: 40px; height: 40px; border-radius: 50%; border: 2px solid; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; background: var(--bg); }
    .node-circle.subject { border-color: var(--subject); color: var(--subject); }
    .node-circle.education { border-color: var(--education); color: var(--education); }
    .node-circle.sponsor { border-color: var(--sponsor); color: var(--sponsor); }
    .node-circle.operator { border-color: var(--operator); color: var(--operator); }
    .node-circle.complete { background: currentColor; color: #000; }
    .node-circle.current { box-shadow: 0 0 20px currentColor; animation: nodePulse 2s infinite; }
    .node-circle.pnr { border-color: var(--critical) !important; color: var(--critical) !important; box-shadow: 0 0 20px var(--critical); }
    .node-label { font-size: 9px; color: var(--text-dim); margin-top: 6px; text-align: center; max-width: 80px; }
    .node-label.current { color: var(--text); font-weight: 500; }
    .transfer-badge { position: absolute; padding: 2px 6px; background: var(--bg); border: 1px solid var(--border); border-radius: 4px; font-size: 8px; color: var(--text-dim); }
    .current-position { position: absolute; bottom: 5%; left: 50%; transform: translateX(-50%); text-align: center; }
    .current-circle { width: 48px; height: 48px; border-radius: 50%; background: var(--subject); display: flex; align-items: center; justify-content: center; margin: 0 auto 8px; box-shadow: 0 0 30px var(--subject); animation: youPulse 2s infinite; }
    .current-icon { font-size: 20px; }
    .current-label { font-size: 10px; color: var(--text-dim); }
    .current-name { font-size: 13px; font-weight: 600; }

    /* LAYER 3: INTERNAL STATE */
    .internal-state { flex: 0 0 auto; padding: 16px 20px; background: linear-gradient(0deg, rgba(255,255,255,0.03) 0%, transparent 100%); border-top: 1px solid var(--border); }
    .state-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 12px; }
    .state-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; padding: 12px; text-align: center; }
    .state-card.warning { border-color: var(--warning); background: rgba(255,170,0,0.05); }
    .state-card.critical { border-color: var(--critical); background: rgba(255,68,68,0.05); }
    .state-label { font-size: 9px; color: var(--text-dim); letter-spacing: 1px; text-transform: uppercase; margin-bottom: 6px; }
    .state-value { font-size: 20px; font-weight: 600; font-family: 'SF Mono', monospace; }
    .state-card.warning .state-value { color: var(--warning); }
    .state-card.critical .state-value { color: var(--critical); }
    .state-bar { height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-top: 8px; overflow: hidden; }
    .state-bar-fill { height: 100%; border-radius: 2px; }
    .state-bar-fill.safe { background: var(--safe); }
    .state-bar-fill.warning { background: var(--warning); }
    .resistance-row { display: flex; justify-content: center; gap: 24px; padding: 8px 0; border-top: 1px solid var(--border); margin-top: 8px; }
    .resistance-item { display: flex; align-items: center; gap: 8px; font-size: 11px; }
    .resistance-label { color: var(--text-dim); }
    .resistance-value { font-family: 'SF Mono', monospace; font-weight: 600; }

    /* CHOOSE BUTTON */
    .choose-section { flex: 0 0 auto; padding: 12px 20px 24px; }
    .choose-btn { width: 100%; padding: 18px; font-size: 14px; font-weight: 700; letter-spacing: 4px; text-transform: uppercase; background: #fff; color: #000; border: none; border-radius: 4px; cursor: pointer; transition: all 0.3s; }
    .choose-btn:hover { box-shadow: 0 4px 30px rgba(255,255,255,0.3); transform: translateY(-2px); }
    .choose-btn.warning { background: var(--warning); }
    .choose-btn.critical { background: var(--critical); color: #fff; animation: criticalPulse 1s infinite; }

    /* ANIMATIONS */
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes goalPulse { 0%, 100% { box-shadow: 0 0 20px rgba(0,255,136,0.3); transform: scale(1); } 50% { box-shadow: 0 0 40px rgba(0,255,136,0.5); transform: scale(1.05); } }
    @keyframes nodePulse { 0%, 100% { box-shadow: 0 0 15px currentColor; } 50% { box-shadow: 0 0 30px currentColor; } }
    @keyframes youPulse { 0%, 100% { box-shadow: 0 0 20px var(--subject); transform: scale(1); } 50% { box-shadow: 0 0 40px var(--subject); transform: scale(1.05); } }
    @keyframes criticalPulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
    @keyframes pathFlow { 0% { stroke-dashoffset: 0; } 100% { stroke-dashoffset: -20; } }
    .path-flow { stroke-dasharray: 10 10; animation: pathFlow 1s linear infinite; }

    @media (max-width: 380px) { .state-grid { gap: 8px; } .state-value { font-size: 16px; } .external-node { min-width: 56px; padding: 6px 8px; } }
  </style>
</head>
<body>
  <div class="app">
    <!-- LAYER 1: EXTERNAL FIELD -->
    <div class="external-field">
      <div class="external-header">
        <div class="logo">AUTUS</div>
        <div class="external-label">External Field</div>
      </div>
      <div class="external-grid">
        <div class="external-node safe"><div class="external-icon">üõÇ</div><div class="external-name">VISA</div><div class="external-status"></div></div>
        <div class="external-node warning"><div class="external-icon">üìã</div><div class="external-name">POLICY</div><div class="external-status"></div></div>
        <div class="external-node safe"><div class="external-icon">üìà</div><div class="external-name">MARKET</div><div class="external-status"></div></div>
        <div class="external-node critical"><div class="external-icon">üíπ</div><div class="external-name">ECONOMY</div><div class="external-status"></div></div>
        <div class="external-node safe"><div class="external-icon">üìÖ</div><div class="external-name">SEASON</div><div class="external-status"></div></div>
      </div>
    </div>

    <!-- LAYER 2: DECISION FIELD -->
    <div class="decision-field">
      <div class="field-canvas">
        <div class="goal-node">
          <div class="goal-circle"><div class="goal-icon">üéØ</div></div>
          <div class="goal-label">DESTINATION</div>
          <div class="goal-name">Ï†ïÏ∞© ÏôÑÎ£å</div>
        </div>
        <div class="path-container">
          <svg class="path-svg" viewBox="0 0 400 300" preserveAspectRatio="xMidYMid meet">
            <path class="path-line active path-flow" d="M200,280 L200,220 L200,160 L200,100 L200,40" />
            <path class="path-line inactive" d="M200,160 L280,120 L320,80" />
            <path class="path-line pnr" d="M200,100 L200,40" />
          </svg>
          <div class="decision-node" style="left: 50%; top: 93%;"><div class="node-circle subject complete">S</div><div class="node-label">ÏßÑÏûÖ ÏôÑÎ£å</div></div>
          <div class="decision-node" style="left: 50%; top: 73%;"><div class="node-circle subject complete">S</div><div class="node-label">Ï§ÄÎπÑ ÏôÑÎ£å</div></div>
          <div class="decision-node" style="left: 50%; top: 53%;"><div class="node-circle education current">E</div><div class="node-label current">ÏÑùÏÇ¨ ÏßÄÏÜç<br>#16</div></div>
          <div class="transfer-badge" style="left: 58%; top: 53%;">T5</div>
          <div class="decision-node" style="left: 50%; top: 33%;"><div class="node-circle sponsor">P</div><div class="node-label">Ï∑®ÏóÖ</div></div>
          <div class="decision-node" style="left: 50%; top: 13%;"><div class="node-circle pnr">!</div><div class="node-label">Ï†ïÏ∞© PNR<br>#20</div></div>
          <div class="decision-node" style="left: 80%; top: 40%; opacity: 0.4;"><div class="node-circle operator">O</div><div class="node-label">Ïù¥ÌÉà Í≤ΩÎ°ú</div></div>
        </div>
        <div class="current-position">
          <div class="current-circle"><div class="current-icon">‚óè</div></div>
          <div class="current-label">CURRENT</div>
          <div class="current-name">Kim</div>
        </div>
      </div>
    </div>

    <!-- LAYER 3: INTERNAL STATE -->
    <div class="internal-state">
      <div class="state-grid">
        <div class="state-card"><div class="state-label">Energy</div><div class="state-value">78%</div><div class="state-bar"><div class="state-bar-fill safe" style="width: 78%"></div></div></div>
        <div class="state-card warning"><div class="state-label">PNR</div><div class="state-value">14d</div><div class="state-bar"><div class="state-bar-fill warning" style="width: 45%"></div></div></div>
        <div class="state-card"><div class="state-label">Entropy</div><div class="state-value">23%</div><div class="state-bar"><div class="state-bar-fill safe" style="width: 23%"></div></div></div>
      </div>
      <div class="resistance-row">
        <div class="resistance-item"><span class="resistance-label">RESISTANCE</span><span class="resistance-value" style="color: var(--warning)">‚Ç©12.4M</span></div>
        <div class="resistance-item"><span class="resistance-label">VELOCITY</span><span class="resistance-value" style="color: var(--critical)">+‚Ç©41K/d</span></div>
      </div>
    </div>

    <!-- CHOOSE BUTTON -->
    <div class="choose-section">
      <button class="choose-btn warning">CHOOSE</button>
    </div>
  </div>

  <script>
    const chooseBtn = document.querySelector('.choose-btn');
    const pnrValue = 14;
    function updateButtonState(pnr) {
      if (pnr <= 7) chooseBtn.className = 'choose-btn critical';
      else if (pnr <= 21) chooseBtn.className = 'choose-btn warning';
      else chooseBtn.className = 'choose-btn';
    }
    updateButtonState(pnrValue);
    chooseBtn.addEventListener('click', () => {
      if (navigator.vibrate) navigator.vibrate(50);
      chooseBtn.style.transform = 'scale(0.98)';
      setTimeout(() => { chooseBtn.style.transform = ''; }, 100);
      console.log('CHOICE MADE:', { timestamp: new Date().toISOString(), entity: 'Kim', decision: '#16', state: 'WARNING', pnr_days: pnrValue });
      alert('ÏÑ†ÌÉùÏù¥ Í∏∞Î°ùÎêòÏóàÏäµÎãàÎã§.\n\nAudit LogÏóê Ï†ÄÏû•Îê®.');
    });
  </script>
</body>
</html>
