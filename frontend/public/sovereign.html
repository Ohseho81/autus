<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AUTUS v15.0 Sovereign â€” P2P Daily OS</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--bg-primary:#0a0f1a;--bg-secondary:#111827;--bg-tertiary:#1f2937;--accent-green:#10b981;--accent-cyan:#06b6d4;--accent-purple:#8b5cf6;--text-primary:#f3f4f6;--text-muted:#4b5563;--border-color:rgba(255,255,255,0.08);--glow-green:rgba(0,255,170,0.4)}
    body{font-family:'Inter',-apple-system,sans-serif;background:var(--bg-primary);color:var(--text-primary);min-height:100vh;overflow:hidden;user-select:none}
    .sovereign-badge{position:fixed;top:12px;right:12px;display:flex;align-items:center;gap:6px;padding:6px 12px;background:rgba(139,92,246,0.15);border:1px solid rgba(139,92,246,0.3);border-radius:20px;font-size:10px;color:var(--accent-purple);z-index:100}
    .sovereign-dot{width:6px;height:6px;background:var(--accent-purple);border-radius:50%;animation:pulse 1.5s infinite}
    @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}
    .flash-overlay{position:fixed;inset:0;background:radial-gradient(circle,rgba(0,255,170,0.5),transparent 70%);z-index:9999;pointer-events:none;opacity:0;transition:opacity 0.1s}
    .flash-overlay.active{opacity:1}
    .daily-os{position:fixed;inset:0;display:flex;flex-direction:column;z-index:10}
    .header{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;background:rgba(10,15,26,0.95)}
    .logo{display:flex;align-items:center;gap:8px}
    .logo-icon{width:28px;height:28px;border-radius:7px;background:linear-gradient(135deg,#10b981,#06b6d4);display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:14px;color:white}
    .logo-text{font-size:16px;font-weight:700}
    .logo-version{font-size:9px;color:var(--text-muted);margin-left:4px}
    .status-strip{background:rgba(17,24,39,0.9);border-bottom:1px solid rgba(255,255,255,0.05);padding:8px 20px;font-family:monospace;height:72px;overflow:hidden;pointer-events:none}
    .status-line{display:flex;align-items:center;height:24px;font-size:11px;letter-spacing:0.5px}
    .status-line-1{color:#6b7280}
    .status-dot{width:6px;height:6px;background:#10b981;border-radius:50%;margin-right:6px;animation:pulse 1.5s infinite}
    .status-running{color:#10b981;font-weight:600}
    .status-line-2{color:#4b5563}
    .risk-value{color:#10b981;font-weight:600;margin-left:4px}
    .separator{margin:0 8px;color:#374151}
    .ledger-value{color:var(--accent-purple);font-weight:600;margin-left:4px}
    .status-line-3{color:#374151}
    .next-count{color:#8b5cf6;font-weight:700;margin:0 4px}
    .decision-center{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px 20px;max-width:420px;margin:0 auto;width:100%}
    .value-display{text-align:center;margin-bottom:28px}
    .value-amount{font-size:48px;font-weight:800;background:linear-gradient(90deg,#10b981,#06b6d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;line-height:1}
    .value-label{font-size:10px;color:#4b5563;text-transform:uppercase;letter-spacing:2px;margin-top:4px}
    .value-formula{font-size:9px;color:var(--text-muted);font-family:monospace;margin-top:6px}
    .suggestion-card{width:100%;background:rgba(17,24,39,0.8);border:1px solid rgba(255,255,255,0.05);border-radius:16px;padding:24px;backdrop-filter:blur(10px)}
    .category-line{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    .category{display:flex;align-items:center;gap:6px;font-size:11px;color:#6b7280}
    .proof-badge{display:flex;align-items:center;gap:4px;padding:3px 8px;background:rgba(139,92,246,0.15);border:1px solid rgba(139,92,246,0.3);border-radius:12px;font-size:9px;font-weight:600;color:var(--accent-purple)}
    .suggestion-text{font-size:18px;font-weight:600;color:#f3f4f6;line-height:1.4;margin-bottom:16px;text-align:center}
    .suggestion-text .hl{color:#00FFAA;font-weight:700}
    .impact-row{display:flex;justify-content:center;gap:20px;padding:10px 0;border-top:1px solid rgba(255,255,255,0.05);border-bottom:1px solid rgba(255,255,255,0.05);margin-bottom:16px}
    .impact-item{display:flex;align-items:center;gap:4px;font-size:12px}
    .impact-value{font-weight:700;color:#10b981}
    .impact-value.muted{color:#6b7280}
    .action-buttons{display:flex;gap:12px;width:100%}
    .btn-reject{flex:1;padding:14px;background:transparent;border:1px solid #2d3748;border-radius:12px;color:#4b5563;font-size:13px;font-weight:600;cursor:pointer}
    .btn-reject:hover{border-color:#4b5563;color:#6b7280}
    .btn-accept{flex:2;padding:14px 20px;background:linear-gradient(135deg,#00FFAA,#00D1FF);border:none;border-radius:12px;color:#0a0f1a;font-size:14px;font-weight:700;cursor:pointer;box-shadow:0 0 24px rgba(0,255,170,0.4);animation:acceptPulse 0.8s infinite}
    @keyframes acceptPulse{0%,100%{box-shadow:0 0 24px rgba(0,255,170,0.4)}50%{box-shadow:0 0 32px rgba(0,255,170,0.6)}}
    .btn-accept:hover{transform:translateY(-2px)}
    .btn-accept-inner{display:flex;align-items:center;justify-content:center;gap:6px}
    .outcome-view{display:none;text-align:center}
    .outcome-view.visible{display:block;animation:fadeIn 0.3s}
    @keyframes fadeIn{from{opacity:0;transform:scale(0.95)}to{opacity:1;transform:scale(1)}}
    .outcome-check{width:64px;height:64px;background:linear-gradient(135deg,#10b981,#059669);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:32px;margin:0 auto 16px;box-shadow:0 0 32px rgba(16,185,129,0.5);animation:checkPop 0.3s}
    @keyframes checkPop{0%{transform:scale(0)}60%{transform:scale(1.15)}100%{transform:scale(1)}}
    .outcome-title{font-size:18px;font-weight:600;margin-bottom:6px}
    .outcome-value{font-size:14px;color:#10b981;margin-bottom:8px}
    .outcome-hash{font-size:10px;font-family:monospace;color:var(--accent-purple);margin-bottom:20px}
    .outcome-next-btn{padding:10px 20px;background:#1f2937;border:1px solid #374151;border-radius:8px;color:#e5e7eb;font-size:12px;cursor:pointer}
    .bottom-bar{padding:12px 20px;background:rgba(17,24,39,0.9);border-top:1px solid rgba(255,255,255,0.05);display:flex;justify-content:space-between;align-items:center}
    .storage-info{display:flex;align-items:center;gap:12px;font-size:10px;color:var(--text-muted)}
    .storage-item{display:flex;align-items:center;gap:4px}
    .p2p-status{display:flex;align-items:center;gap:6px;padding:4px 10px;background:rgba(139,92,246,0.1);border-radius:12px;font-size:10px;color:var(--accent-purple)}
    .p2p-dot{width:6px;height:6px;background:var(--accent-purple);border-radius:50%}
    .keyboard-hints{position:fixed;bottom:100px;right:16px;display:flex;flex-direction:column;gap:4px;font-size:9px;color:#2d3748;z-index:15}
    .key{display:inline-block;padding:2px 5px;background:#1f2937;border-radius:3px;font-family:monospace;margin-right:3px}
  </style>
</head>
<body>
  <div class="sovereign-badge"><div class="sovereign-dot"></div><span>SOVEREIGN Â· Zero-Cloud</span></div>
  <div class="flash-overlay" id="flashOverlay"></div>
  <div class="daily-os">
    <header class="header">
      <div class="logo"><div class="logo-icon">A</div><span class="logo-text">AUTUS</span><span class="logo-version">v15 Sovereign</span></div>
    </header>
    <div class="status-strip">
      <div class="status-line status-line-1"><div class="status-dot"></div><span>SYSTEM:</span><span class="status-running">RUNNING</span></div>
      <div class="status-line status-line-2"><span>STORAGE:</span><span class="risk-value">LOCAL</span><span class="separator">Â·</span><span>LEDGER:</span><span class="ledger-value" id="ledgerCount">0</span></div>
      <div class="status-line status-line-3"><span>NEXT:</span><span class="next-count">1</span><span>decision waiting</span></div>
    </div>
    <div class="decision-center">
      <div class="value-display">
        <div class="value-amount" id="valueAmount">0</div>
        <div class="value-label">ìì‚°(V)</div>
        <div class="value-formula">V = (M - T) Ã— (1 + s)^t</div>
      </div>
      <div class="suggestion-card" id="suggestionCard">
        <div class="category-line">
          <div class="category"><span id="catIcon">ğŸ“Š</span><span id="catText">ì¬ë¬´</span></div>
          <div class="proof-badge"><span>ğŸ”</span><span>Proof Ready</span></div>
        </div>
        <div class="suggestion-text" id="suggestionText">ìë™í™” â†’ <span class="hl">4.2ì‹œê°„</span> ì¦‰ì‹œ íšŒìˆ˜</div>
        <div class="impact-row">
          <div class="impact-item"><span>ğŸ’°</span><span class="impact-value" id="mintValue">+12</span><span style="color:var(--text-muted);font-size:10px">M</span></div>
          <div class="impact-item"><span>ğŸ“‰</span><span class="impact-value muted" id="taxValue">-4</span><span style="color:var(--text-muted);font-size:10px">T</span></div>
          <div class="impact-item"><span>ğŸ¤</span><span class="impact-value" id="synergyValue">+0.1</span><span style="color:var(--text-muted);font-size:10px">s</span></div>
        </div>
        <div class="action-buttons">
          <button class="btn-reject" onclick="handleReject()">Reject</button>
          <button class="btn-accept" onclick="handleAccept()"><div class="btn-accept-inner"><span>âœ“</span><span>ACCEPT</span></div></button>
        </div>
      </div>
      <div class="outcome-view" id="outcomeView">
        <div class="outcome-check">âœ“</div>
        <div class="outcome-title">Recorded to Ledger</div>
        <div class="outcome-value" id="outcomeValue">V: 0 â†’ 8</div>
        <div class="outcome-hash" id="outcomeHash">Hash: 0x0000...</div>
        <button class="outcome-next-btn" onclick="loadNext()">ë‹¤ìŒ â†’</button>
      </div>
    </div>
    <div class="bottom-bar">
      <div class="storage-info">
        <div class="storage-item"><span>ğŸ’¾</span><span>IndexedDB</span></div>
        <div class="storage-item"><span>ğŸ”—</span><span id="chainLength">0 blocks</span></div>
      </div>
      <div class="p2p-status"><div class="p2p-dot"></div><span>P2P Ready</span></div>
    </div>
  </div>
  <div class="keyboard-hints"><div><span class="key">A</span>Accept</div><div><span class="key">R</span>Reject</div></div>
  <script>
    const DB_NAME='autus_sovereign',DB_VERSION=1;let db=null;
    const state={V:0,M:0,T:0,s:0,index:0};
    const suggestions=[
      {icon:'ğŸ“Š',cat:'ì¬ë¬´',text:'ìë™í™” â†’ <span class="hl">4.2ì‹œê°„</span> ì¦‰ì‹œ íšŒìˆ˜',mint:12,tax:4,synergy:0.1},
      {icon:'ğŸ”„',cat:'ìš´ì˜',text:'ìŠ¹ì¸ <span class="hl">3ê±´</span> 48ì‹œê°„ ì´ˆê³¼',mint:8,tax:2,synergy:0.05},
      {icon:'ğŸ“‹',cat:'HR',text:'íšŒì˜ <span class="hl">5ê±´</span> ì•¡ì…˜ì•„ì´í…œ ë¯¸ì¶”ì ',mint:15,tax:5,synergy:0.15},
      {icon:'ğŸ“§',cat:'ì´ë©”ì¼',text:'ë°˜ë³µ ë°œì†¡ â†’ <span class="hl">ìë™í™”</span>',mint:6,tax:2,synergy:0.08},
      {icon:'ğŸ“ˆ',cat:'KPI',text:'ì£¼ê°„ ë¦¬í¬íŠ¸ <span class="hl">ìë™ ìƒì„±</span>',mint:10,tax:3,synergy:0.12}
    ];
    function initDB(){return new Promise((resolve,reject)=>{const r=indexedDB.open(DB_NAME,DB_VERSION);r.onerror=()=>reject(r.error);r.onsuccess=()=>{db=r.result;resolve(db)};r.onupgradeneeded=(e)=>{const d=e.target.result;if(!d.objectStoreNames.contains('ledger')){const s=d.createObjectStore('ledger',{keyPath:'hash'});s.createIndex('timestamp','timestamp',{unique:false})}if(!d.objectStoreNames.contains('state'))d.createObjectStore('state',{keyPath:'key'})}})}
    async function sha256(m){const b=new TextEncoder().encode(m);const h=await crypto.subtle.digest('SHA-256',b);return Array.from(new Uint8Array(h)).map(b=>b.toString(16).padStart(2,'0')).join('')}
    async function getLastBlock(){return new Promise(r=>{const t=db.transaction('ledger','readonly');const s=t.objectStore('ledger');const i=s.index('timestamp');const q=i.openCursor(null,'prev');q.onsuccess=e=>{const c=e.target.result;r(c?c.value:{hash:'AUTUS_GENESIS_V15',prev_hash:'0000000000000000',timestamp:new Date().toISOString(),type:'genesis'})}})}
    async function addBlock(type,payload){const last=await getLastBlock();const ts=new Date().toISOString();const hash=await sha256(JSON.stringify({prev_hash:last.hash,timestamp:ts,type,payload}));const block={hash,prev_hash:last.hash,timestamp:ts,type,payload};return new Promise((resolve,reject)=>{const t=db.transaction('ledger','readwrite');const s=t.objectStore('ledger');const r=s.add(block);r.onsuccess=()=>resolve(block);r.onerror=()=>reject(r.error)})}
    async function getAllBlocks(){return new Promise(r=>{const t=db.transaction('ledger','readonly');const s=t.objectStore('ledger');const i=s.index('timestamp');const q=i.getAll();q.onsuccess=()=>r(q.result)})}
    async function loadState(){return new Promise(r=>{const t=db.transaction('state','readonly');const s=t.objectStore('state');const q=s.get('main');q.onsuccess=()=>{if(q.result)Object.assign(state,q.result.data);r()};q.onerror=()=>r()})}
    async function saveState(){return new Promise(r=>{const t=db.transaction('state','readwrite');const s=t.objectStore('state');s.put({key:'main',data:{V:state.V,M:state.M,T:state.T,s:state.s,index:state.index}});t.oncomplete=()=>r()})}
    function calculateV(){state.V=Math.round((state.M-state.T)*Math.pow(1+state.s,1));return state.V}
    function updateUI(){document.getElementById('valueAmount').textContent=state.V}
    async function updateLedgerUI(){const b=await getAllBlocks();document.getElementById('ledgerCount').textContent=b.length;document.getElementById('chainLength').textContent=`${b.length} blocks`}
    async function handleAccept(){const sug=suggestions[state.index];const oldV=state.V;state.M+=sug.mint;state.T+=sug.tax;state.s=Math.min(1,state.s+sug.synergy);calculateV();const block=await addBlock('decision',{action:'accept',mint:sug.mint,tax:sug.tax,synergy:sug.synergy,delta:state.V-oldV});await saveState();document.getElementById('flashOverlay').classList.add('active');setTimeout(()=>document.getElementById('flashOverlay').classList.remove('active'),100);document.getElementById('suggestionCard').style.display='none';document.getElementById('outcomeView').classList.add('visible');document.getElementById('outcomeValue').textContent=`V: ${oldV} â†’ ${state.V}`;document.getElementById('outcomeHash').textContent=`Hash: ${block.hash.substring(0,16)}...`;updateUI();updateLedgerUI()}
    async function handleReject(){await addBlock('decision',{action:'reject',delta:0});await saveState();await updateLedgerUI();loadNext()}
    function loadNext(){state.index=(state.index+1)%suggestions.length;const sug=suggestions[state.index];document.getElementById('catIcon').textContent=sug.icon;document.getElementById('catText').textContent=sug.cat;document.getElementById('suggestionText').innerHTML=sug.text;document.getElementById('mintValue').textContent=`+${sug.mint}`;document.getElementById('taxValue').textContent=`-${sug.tax}`;document.getElementById('synergyValue').textContent=`+${sug.synergy}`;document.getElementById('suggestionCard').style.display='block';document.getElementById('outcomeView').classList.remove('visible');saveState()}
    document.addEventListener('keydown',e=>{if(e.key==='a'||e.key==='A')handleAccept();if(e.key==='r'||e.key==='R')handleReject()});
    async function init(){await initDB();await loadState();calculateV();updateUI();await updateLedgerUI();const sug=suggestions[state.index];document.getElementById('catIcon').textContent=sug.icon;document.getElementById('catText').textContent=sug.cat;document.getElementById('suggestionText').innerHTML=sug.text;document.getElementById('mintValue').textContent=`+${sug.mint}`;document.getElementById('taxValue').textContent=`-${sug.tax}`;document.getElementById('synergyValue').textContent=`+${sug.synergy}`;console.log('[AUTUS] Sovereign P2P initialized - Zero-Cloud')}
    init();
  </script>
</body>
</html>
