<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AUTUS Self-Builder | ìê¸° ì§„í™” ì—”ì§„</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap');
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --bg: #0a0f1a;
      --surface: #111827;
      --surface-2: #1f2937;
      --surface-3: #374151;
      --border: #374151;
      --text: #f9fafb;
      --text-dim: #9ca3af;
      --text-muted: #6b7280;
      --primary: #10b981;
      --primary-dim: rgba(16, 185, 129, 0.15);
      --cyan: #06b6d4;
      --cyan-dim: rgba(6, 182, 212, 0.15);
      --purple: #8b5cf6;
      --purple-dim: rgba(139, 92, 246, 0.15);
      --yellow: #f59e0b;
      --yellow-dim: rgba(245, 158, 11, 0.15);
      --red: #ef4444;
      --red-dim: rgba(239, 68, 68, 0.15);
      --gradient: linear-gradient(135deg, var(--primary), var(--cyan), var(--purple));
    }
    
    body {
      font-family: 'Inter', -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* Header */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      margin-bottom: 20px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo-icon {
      width: 44px;
      height: 44px;
      background: var(--gradient);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }
    
    .logo-text {
      font-size: 22px;
      font-weight: 800;
    }
    
    .logo-badge {
      padding: 5px 12px;
      background: var(--purple);
      border-radius: 16px;
      font-size: 10px;
      font-weight: 700;
      color: white;
    }
    
    .nav-links {
      display: flex;
      gap: 8px;
    }
    
    .nav-link {
      padding: 10px 18px;
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 12px;
      color: var(--text-dim);
      text-decoration: none;
      transition: all 0.2s;
    }
    
    .nav-link:hover {
      border-color: var(--primary);
      color: var(--primary);
    }
    
    .status-row {
      display: flex;
      gap: 10px;
    }
    
    .status-chip {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      background: var(--surface-2);
      border-radius: 16px;
      font-size: 11px;
    }
    
    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    .status-dot.green { background: var(--primary); }
    .status-dot.purple { background: var(--purple); }
    .status-dot.cyan { background: var(--cyan); }
    .status-dot.yellow { background: var(--yellow); }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* Hero */
    .hero {
      text-align: center;
      padding: 50px 40px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      margin-bottom: 20px;
      position: relative;
      overflow: hidden;
    }
    
    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--gradient);
    }
    
    .hero-title {
      font-size: 36px;
      font-weight: 800;
      margin-bottom: 12px;
      background: var(--gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .hero-subtitle {
      font-size: 15px;
      color: var(--text-dim);
      max-width: 600px;
      margin: 0 auto 24px;
    }
    
    .hero-equation {
      display: inline-flex;
      align-items: center;
      gap: 14px;
      padding: 14px 28px;
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 10px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 16px;
    }
    
    .hero-equation .highlight {
      color: var(--primary);
      font-weight: 700;
    }
    
    /* Current Score Panel */
    .score-panel {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .score-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 24px;
      text-align: center;
    }
    
    .score-card.main {
      background: linear-gradient(135deg, var(--surface), var(--surface-2));
      border-color: var(--primary);
    }
    
    .score-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 48px;
      font-weight: 800;
      margin-bottom: 4px;
    }
    
    .score-value.current { color: var(--yellow); }
    .score-value.target { color: var(--primary); }
    .score-value.gap { color: var(--red); }
    
    .score-label {
      font-size: 12px;
      color: var(--text-dim);
    }
    
    .score-bar {
      margin-top: 16px;
      height: 8px;
      background: var(--surface-3);
      border-radius: 4px;
      overflow: hidden;
    }
    
    .score-bar-fill {
      height: 100%;
      background: var(--gradient);
      border-radius: 4px;
      transition: width 1s ease;
    }
    
    /* Main Grid */
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
    }
    
    .card-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .card-title {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
      font-weight: 700;
    }
    
    .card-badge {
      padding: 4px 10px;
      background: var(--cyan-dim);
      border-radius: 10px;
      font-size: 10px;
      font-weight: 600;
      color: var(--cyan);
    }
    
    .card-badge.red {
      background: var(--red-dim);
      color: var(--red);
    }
    
    .card-badge.green {
      background: var(--primary-dim);
      color: var(--primary);
    }
    
    .card-body {
      padding: 20px;
    }
    
    /* Feature List */
    .feature-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .feature-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px;
      background: var(--surface-2);
      border: 2px solid var(--border);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .feature-item:hover {
      border-color: var(--cyan);
    }
    
    .feature-item.selected {
      border-color: var(--primary);
      background: var(--primary-dim);
    }
    
    .feature-checkbox {
      width: 22px;
      height: 22px;
      border: 2px solid var(--border);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      transition: all 0.2s;
      flex-shrink: 0;
    }
    
    .feature-item.selected .feature-checkbox {
      background: var(--primary);
      border-color: var(--primary);
      color: white;
    }
    
    .feature-info {
      flex: 1;
    }
    
    .feature-name {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 2px;
    }
    
    .feature-desc {
      font-size: 11px;
      color: var(--text-dim);
    }
    
    .feature-impact {
      text-align: right;
    }
    
    .impact-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      font-weight: 700;
      color: var(--primary);
    }
    
    .impact-label {
      font-size: 9px;
      color: var(--text-dim);
    }
    
    /* Generation Steps */
    .generation-steps {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .gen-step {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 14px;
      background: var(--surface-2);
      border-radius: 10px;
      transition: all 0.3s;
    }
    
    .gen-step.active {
      background: var(--cyan-dim);
      border: 1px solid var(--cyan);
    }
    
    .gen-step.complete {
      opacity: 0.7;
    }
    
    .gen-step-num {
      width: 28px;
      height: 28px;
      background: var(--surface-3);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 700;
      flex-shrink: 0;
    }
    
    .gen-step.active .gen-step-num {
      background: var(--cyan);
      color: white;
      animation: pulse 1.5s infinite;
    }
    
    .gen-step.complete .gen-step-num {
      background: var(--primary);
      color: white;
    }
    
    .gen-step-content {
      flex: 1;
    }
    
    .gen-step-title {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 2px;
    }
    
    .gen-step-desc {
      font-size: 10px;
      color: var(--text-dim);
    }
    
    .gen-step-time {
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      color: var(--text-muted);
    }
    
    /* Code Preview */
    .code-preview {
      background: #0d1117;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 16px;
    }
    
    .code-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 14px;
      background: var(--surface-2);
      border-bottom: 1px solid var(--border);
    }
    
    .code-filename {
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      color: var(--text-dim);
    }
    
    .code-stats {
      font-size: 10px;
      color: var(--text-muted);
    }
    
    .code-body {
      padding: 14px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      line-height: 1.5;
      max-height: 200px;
      overflow-y: auto;
    }
    
    .code-body pre {
      color: #e6edf3;
      white-space: pre-wrap;
    }
    
    .code-keyword { color: #ff7b72; }
    .code-string { color: #a5d6ff; }
    .code-comment { color: #8b949e; }
    .code-function { color: #d2a8ff; }
    
    /* Action Buttons */
    .action-row {
      display: flex;
      gap: 10px;
      margin-top: 16px;
    }
    
    .btn {
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: var(--gradient);
      color: white;
      flex: 1;
    }
    
    .btn-primary:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
    }
    
    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .btn-secondary {
      background: var(--surface-2);
      border: 1px solid var(--border);
      color: var(--text-dim);
    }
    
    .btn-secondary:hover {
      border-color: var(--text-dim);
      color: var(--text);
    }
    
    /* Output Log */
    .log-section {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
      margin-bottom: 20px;
    }
    
    .log-header {
      padding: 14px 18px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .log-title {
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .log-body {
      padding: 14px 18px;
      max-height: 200px;
      overflow-y: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
    }
    
    .log-entry {
      display: flex;
      gap: 10px;
      padding: 6px 0;
      border-bottom: 1px solid var(--border);
    }
    
    .log-entry:last-child {
      border-bottom: none;
    }
    
    .log-time {
      color: var(--text-muted);
      min-width: 65px;
    }
    
    .log-type {
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 9px;
      font-weight: 600;
      min-width: 50px;
      text-align: center;
    }
    
    .log-type.info { background: var(--cyan-dim); color: var(--cyan); }
    .log-type.success { background: var(--primary-dim); color: var(--primary); }
    .log-type.ai { background: var(--purple-dim); color: var(--purple); }
    .log-type.deploy { background: var(--yellow-dim); color: var(--yellow); }
    .log-type.error { background: var(--red-dim); color: var(--red); }
    
    .log-message {
      flex: 1;
      color: var(--text-dim);
    }
    
    /* n8n Section */
    .n8n-section {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
    }
    
    .n8n-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .n8n-title {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .n8n-title h3 {
      font-size: 14px;
      font-weight: 700;
    }
    
    .n8n-badge {
      padding: 4px 10px;
      background: var(--yellow-dim);
      border-radius: 10px;
      font-size: 10px;
      font-weight: 600;
      color: var(--yellow);
    }
    
    .n8n-body {
      padding: 20px;
    }
    
    .workflow-diagram {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 20px;
      background: var(--surface-2);
      border-radius: 10px;
      overflow-x: auto;
      margin-bottom: 16px;
    }
    
    .workflow-node {
      padding: 10px 16px;
      background: var(--surface);
      border: 2px solid var(--border);
      border-radius: 8px;
      font-size: 11px;
      font-weight: 600;
      white-space: nowrap;
      transition: all 0.2s;
    }
    
    .workflow-node:hover {
      border-color: var(--cyan);
    }
    
    .workflow-node.trigger { border-color: var(--yellow); }
    .workflow-node.ai { border-color: var(--purple); }
    .workflow-node.deploy { border-color: var(--primary); }
    
    .workflow-arrow {
      color: var(--text-muted);
      font-size: 14px;
    }
    
    .n8n-config {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    
    .config-item {
      padding: 12px;
      background: var(--surface-2);
      border-radius: 8px;
    }
    
    .config-label {
      font-size: 10px;
      color: var(--text-dim);
      margin-bottom: 4px;
    }
    
    .config-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      color: var(--text);
    }
    
    .n8n-actions {
      display: flex;
      gap: 10px;
      margin-top: 16px;
    }
    
    /* Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .modal {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      overflow: hidden;
    }
    
    .modal-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .modal-title {
      font-size: 16px;
      font-weight: 700;
    }
    
    .modal-close {
      width: 32px;
      height: 32px;
      background: var(--surface-2);
      border: none;
      border-radius: 8px;
      font-size: 18px;
      color: var(--text-dim);
      cursor: pointer;
    }
    
    .modal-body {
      padding: 20px;
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .modal-code {
      background: #0d1117;
      border-radius: 8px;
      padding: 16px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
      line-height: 1.5;
      overflow-x: auto;
      white-space: pre;
      color: #e6edf3;
    }
    
    .modal-footer {
      padding: 16px 20px;
      border-top: 1px solid var(--border);
      display: flex;
      gap: 10px;
      justify-content: flex-end;
    }
    
    /* Responsive */
    @media (max-width: 1000px) {
      .main-grid, .score-panel, .n8n-config {
        grid-template-columns: 1fr;
      }
      
      .hero-title {
        font-size: 28px;
      }
      
      .status-row {
        display: none;
      }
      
      .workflow-diagram {
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <div class="logo-icon">ğŸ”„</div>
        <span class="logo-text">AUTUS Self-Builder</span>
        <span class="logo-badge">META-EVOLUTION</span>
      </div>
      <div class="nav-links">
        <a href="/" class="nav-link">â† Dashboard</a>
        <a href="/builder" class="nav-link" style="background: var(--primary-dim); border-color: var(--primary); color: var(--primary);">Self-Builder</a>
      </div>
      <div class="status-row">
        <div class="status-chip">
          <span class="status-dot green"></span>
          <span>Gemini Ready</span>
        </div>
        <div class="status-chip">
          <span class="status-dot purple"></span>
          <span>Generator Active</span>
        </div>
        <div class="status-chip">
          <span class="status-dot yellow"></span>
          <span>n8n Connected</span>
        </div>
      </div>
    </header>
    
    <!-- Hero -->
    <section class="hero">
      <h1 class="hero-title">AUTUSê°€ AUTUSë¥¼ ë§Œë“ ë‹¤</h1>
      <p class="hero-subtitle">
        Self-Evolving Systemì˜ ê¶ê·¹ì  êµ¬í˜„. ëˆ„ë½ëœ ê¸°ëŠ¥ì„ ê°ì§€í•˜ê³ , AIë¡œ ì½”ë“œë¥¼ ìƒì„±í•˜ì—¬, ìŠ¤ìŠ¤ë¡œë¥¼ ì§„í™”ì‹œí‚µë‹ˆë‹¤.
      </p>
      <div class="hero-equation">
        AUTUS<sub>n</sub> + AI â†’ AUTUS<sub>n+1</sub> <span class="highlight">â†’ âˆ</span>
      </div>
    </section>
    
    <!-- Score Panel -->
    <div class="score-panel">
      <div class="score-card">
        <div class="score-value current" id="currentScore">85</div>
        <div class="score-label">í˜„ì¬ ì ìˆ˜</div>
      </div>
      <div class="score-card main">
        <div class="score-value" id="projectedScore" style="font-size: 36px; color: var(--cyan);">+15</div>
        <div class="score-label">ì„ íƒëœ ê¸°ëŠ¥ ì ìš©ì‹œ</div>
        <div class="score-bar">
          <div class="score-bar-fill" id="scoreBarFill" style="width: 85%;"></div>
        </div>
      </div>
      <div class="score-card">
        <div class="score-value target">100</div>
        <div class="score-label">ëª©í‘œ ì ìˆ˜</div>
      </div>
    </div>
    
    <!-- Main Grid -->
    <div class="main-grid">
      <!-- Missing Features -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <span>ğŸ”</span>
            <span>ëˆ„ë½ ê¸°ëŠ¥ ê°ì§€</span>
          </div>
          <span class="card-badge red" id="gapCount">6ê°œ ê°ì§€ë¨</span>
        </div>
        <div class="card-body">
          <div class="feature-list" id="featureList"></div>
          <div class="action-row">
            <button class="btn btn-secondary" onclick="selectAll()">ì „ì²´ ì„ íƒ</button>
            <button class="btn btn-secondary" onclick="deselectAll()">ì „ì²´ í•´ì œ</button>
          </div>
        </div>
      </div>
      
      <!-- AI Generation -->
      <div class="card">
        <div class="card-header">
          <div class="card-title">
            <span>ğŸ¤–</span>
            <span>AI ì½”ë“œ ìƒì„±</span>
          </div>
          <span class="card-badge" id="genStatus">ëŒ€ê¸°ì¤‘</span>
        </div>
        <div class="card-body">
          <div class="generation-steps" id="genSteps">
            <div class="gen-step" data-step="1">
              <div class="gen-step-num">1</div>
              <div class="gen-step-content">
                <div class="gen-step-title">ê¸°ëŠ¥ ëª…ì„¸ ë¶„ì„</div>
                <div class="gen-step-desc">ì„ íƒëœ ê¸°ëŠ¥ì˜ ìš”êµ¬ì‚¬í•­ íŒŒì‹±</div>
              </div>
              <div class="gen-step-time">~2s</div>
            </div>
            <div class="gen-step" data-step="2">
              <div class="gen-step-num">2</div>
              <div class="gen-step-content">
                <div class="gen-step-title">Gemini API í˜¸ì¶œ</div>
                <div class="gen-step-desc">React/HTML ì½”ë“œ ìƒì„±</div>
              </div>
              <div class="gen-step-time">~15s</div>
            </div>
            <div class="gen-step" data-step="3">
              <div class="gen-step-num">3</div>
              <div class="gen-step-content">
                <div class="gen-step-title">ì½”ë“œ ë³‘í•©</div>
                <div class="gen-step-desc">ê¸°ì¡´ AUTUSì™€ í†µí•©</div>
              </div>
              <div class="gen-step-time">~3s</div>
            </div>
            <div class="gen-step" data-step="4">
              <div class="gen-step-num">4</div>
              <div class="gen-step-content">
                <div class="gen-step-title">ìë™ ë°°í¬</div>
                <div class="gen-step-desc">Netlify/Railway ë°°í¬</div>
              </div>
              <div class="gen-step-time">~10s</div>
            </div>
          </div>
          
          <div class="code-preview" id="codePreview">
            <div class="code-header">
              <span class="code-filename">generated-code.jsx</span>
              <span class="code-stats" id="codeStats">0 lines</span>
            </div>
            <div class="code-body">
              <pre id="codeContent"><span class="code-comment">// ì½”ë“œ ìƒì„± ëŒ€ê¸°ì¤‘...</span>
<span class="code-comment">// ê¸°ëŠ¥ì„ ì„ íƒí•˜ê³  "ìƒì„± ì‹œì‘" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</span></pre>
            </div>
          </div>
          
          <div class="action-row">
            <button class="btn btn-primary" id="generateBtn" onclick="startGeneration()">
              <span>âš¡</span>
              <span>ì„ íƒëœ ê¸°ëŠ¥ ìƒì„± ì‹œì‘</span>
            </button>
            <button class="btn btn-secondary" onclick="showFullCode()">
              <span>ğŸ“‹</span>
              <span>ì „ì²´ ì½”ë“œ</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Log Section -->
    <div class="log-section">
      <div class="log-header">
        <div class="log-title">
          <span>ğŸ“œ</span>
          <span>Evolution Log</span>
        </div>
        <span style="font-size: 11px; color: var(--primary);">â— Live</span>
      </div>
      <div class="log-body" id="logBody"></div>
    </div>
    
    <!-- n8n Section -->
    <div class="n8n-section">
      <div class="n8n-header">
        <div class="n8n-title">
          <span style="font-size: 24px;">ğŸ”—</span>
          <h3>n8n ìë™ ì§„í™” ì›Œí¬í”Œë¡œìš°</h3>
          <span class="n8n-badge">AUTO-RUN</span>
        </div>
        <div class="status-chip">
          <span class="status-dot yellow"></span>
          <span>6ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰</span>
        </div>
      </div>
      <div class="n8n-body">
        <div class="workflow-diagram">
          <div class="workflow-node trigger">â° Schedule<br><small>6h interval</small></div>
          <span class="workflow-arrow">â†’</span>
          <div class="workflow-node">ğŸ” Gap Detect<br><small>Fetch & Analyze</small></div>
          <span class="workflow-arrow">â†’</span>
          <div class="workflow-node">â“ IF Gaps<br><small>Condition</small></div>
          <span class="workflow-arrow">â†’</span>
          <div class="workflow-node ai">ğŸ¤– Gemini<br><small>Generate Code</small></div>
          <span class="workflow-arrow">â†’</span>
          <div class="workflow-node">ğŸ”€ Merge<br><small>Code Integration</small></div>
          <span class="workflow-arrow">â†’</span>
          <div class="workflow-node deploy">ğŸš€ Deploy<br><small>Netlify API</small></div>
          <span class="workflow-arrow">â†’</span>
          <div class="workflow-node">ğŸ’¬ Notify<br><small>Slack Alert</small></div>
        </div>
        
        <div class="n8n-config">
          <div class="config-item">
            <div class="config-label">Webhook URL</div>
            <div class="config-value">https://n8n.autus-ai.com/webhook/evolution</div>
          </div>
          <div class="config-item">
            <div class="config-label">Trigger Interval</div>
            <div class="config-value">Every 6 hours</div>
          </div>
          <div class="config-item">
            <div class="config-label">Target Site</div>
            <div class="config-value">autus-ai.com</div>
          </div>
          <div class="config-item">
            <div class="config-label">AI Model</div>
            <div class="config-value">gemini-1.5-pro</div>
          </div>
        </div>
        
        <div class="n8n-actions">
          <button class="btn btn-primary" onclick="showN8nWorkflow()">
            <span>ğŸ“¥</span>
            <span>n8n Workflow JSON ë‹¤ìš´ë¡œë“œ</span>
          </button>
          <button class="btn btn-secondary" onclick="triggerManually()">
            <span>â–¶ï¸</span>
            <span>ìˆ˜ë™ ì‹¤í–‰</span>
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal -->
  <div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="modal-header">
        <span class="modal-title" id="modalTitle">n8n Workflow JSON</span>
        <button class="modal-close" onclick="closeModal()">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="modal-code" id="modalCode"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="copyToClipboard()">ğŸ“‹ ë³µì‚¬</button>
        <button class="btn btn-primary" onclick="downloadJson()">ğŸ“¥ ë‹¤ìš´ë¡œë“œ</button>
      </div>
    </div>
  </div>
  
  <script>
// â•â•â• Supabase Init â•â•â•
async function initSupabaseBuilder(){if(typeof AutusDB==='undefined'||!AutusDB.isConnected())return;try{var r=await AutusDB.getAutomationRules();var b=await AutusDB.getBlueprints();console.log('[Builder] Rules:',r.data?r.data.length:0,', Blueprints:',b.data?b.data.length:0)}catch(e){console.warn('[Builder] Fallback:',e.message)}}window.addEventListener('DOMContentLoaded',function(){setTimeout(initSupabaseBuilder,200)});
    const missingFeatures = [
      { id: 1, name: 'Stage 1: Template Marketplace', desc: '247ê°œ í…œí”Œë¦¿ ë¼ì´ë¸ŒëŸ¬ë¦¬ + ê²€ìƒ‰/í•„í„°', impact: 15, selected: true, priority: 'P0' },
      { id: 2, name: 'Stage 6: Collective Intelligence', desc: '12,847 orgs ê¸€ë¡œë²Œ ë„¤íŠ¸ì›Œí¬ + Best Practices', impact: 15, selected: true, priority: 'P0' },
      { id: 3, name: 'Pipeline Navigator', desc: 'ìƒë‹¨ 6-Stage ì‹œê°ì  ìŠ¤í…Œí¼ + ì§„í–‰ë¥ ', impact: 5, selected: true, priority: 'P1' },
      { id: 4, name: 'Left Sidebar', desc: 'Quick Templates + Pipeline List + Actions', impact: 3, selected: false, priority: 'P2' },
      { id: 5, name: 'Right Sidebar (Activity Feed)', desc: 'ì‹¤ì‹œê°„ í™œë™ ë¡œê·¸ + ì•Œë¦¼', impact: 3, selected: false, priority: 'P2' },
      { id: 6, name: 'Bottom Operation Guide', desc: 'ì§„í–‰ ìƒíƒœ ê°€ì´ë“œ ë°” + Loop ìƒíƒœ', impact: 2, selected: false, priority: 'P2' }
    ];
    
    const logEntries = [
      { time: getTime(), type: 'info', message: 'Self-Builder initialized' },
      { time: getTime(), type: 'success', message: 'Connected to autus-ai.com' },
      { time: getTime(), type: 'ai', message: 'Gap analysis complete: 6 missing features' }
    ];
    
    let currentStep = 0;
    let isGenerating = false;
    let generatedCode = '';
    
    const n8nWorkflow = {"name":"AUTUS Self-Evolution","nodes":[{"parameters":{"rule":{"interval":[{"field":"hours","hoursInterval":6}]}},"name":"Schedule Trigger","type":"n8n-nodes-base.scheduleTrigger","position":[250,300]},{"parameters":{"url":"https://autus-ai.com","method":"GET"},"name":"Fetch Site","type":"n8n-nodes-base.httpRequest","position":[450,300]},{"parameters":{"jsCode":"const html=$input.first().json.data||'';const EXPECTED=[{id:'stage-1',weight:15},{id:'stage-6',weight:15},{id:'pipeline-nav',weight:5}];const gaps=EXPECTED.filter(f=>!html.includes(f.id));return[{json:{gaps,score:100-gaps.reduce((s,g)=>s+g.weight,0),needsEvolution:gaps.length>0}}];"},"name":"Analyze","type":"n8n-nodes-base.code","position":[650,300]},{"parameters":{"conditions":{"boolean":[{"value1":"={{$json.needsEvolution}}","value2":true}]}},"name":"IF Gaps","type":"n8n-nodes-base.if","position":[850,300]}],"connections":{"Schedule Trigger":{"main":[[{"node":"Fetch Site","type":"main","index":0}]]},"Fetch Site":{"main":[[{"node":"Analyze","type":"main","index":0}]]},"Analyze":{"main":[[{"node":"IF Gaps","type":"main","index":0}]]}}};
    
    function getTime() {
      return new Date().toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
    }
    
    function renderFeatures() {
      const list = document.getElementById('featureList');
      list.innerHTML = missingFeatures.map(f => `
        <div class="feature-item ${f.selected ? 'selected' : ''}" onclick="toggleFeature(${f.id})">
          <div class="feature-checkbox">${f.selected ? 'âœ“' : ''}</div>
          <div class="feature-info">
            <div class="feature-name">${f.name}</div>
            <div class="feature-desc">${f.desc}</div>
          </div>
          <div class="feature-impact">
            <div class="impact-value">+${f.impact}ì </div>
            <div class="impact-label">${f.priority}</div>
          </div>
        </div>
      `).join('');
      updateScores();
    }
    
    function renderLog() {
      const log = document.getElementById('logBody');
      log.innerHTML = logEntries.slice(-15).map(e => `
        <div class="log-entry">
          <span class="log-time">${e.time}</span>
          <span class="log-type ${e.type}">${e.type.toUpperCase()}</span>
          <span class="log-message">${e.message}</span>
        </div>
      `).join('');
      log.scrollTop = log.scrollHeight;
    }
    
    function addLog(type, message) {
      logEntries.push({ time: getTime(), type, message });
      renderLog();
    }
    
    function toggleFeature(id) {
      const feature = missingFeatures.find(f => f.id === id);
      feature.selected = !feature.selected;
      renderFeatures();
    }
    
    function selectAll() {
      missingFeatures.forEach(f => f.selected = true);
      renderFeatures();
    }
    
    function deselectAll() {
      missingFeatures.forEach(f => f.selected = false);
      renderFeatures();
    }
    
    function updateScores() {
      const selected = missingFeatures.filter(f => f.selected);
      const totalImpact = selected.reduce((sum, f) => sum + f.impact, 0);
      document.getElementById('projectedScore').textContent = `+${totalImpact}`;
      document.getElementById('scoreBarFill').style.width = `${Math.min(85 + totalImpact, 100)}%`;
      document.getElementById('gapCount').textContent = `${6 - selected.length}ê°œ ë‚¨ìŒ`;
    }
    
    function updateStep(step, status) {
      const steps = document.querySelectorAll('.gen-step');
      steps.forEach((s, i) => {
        s.classList.remove('active', 'complete');
        if (i + 1 < step) s.classList.add('complete');
        else if (i + 1 === step) s.classList.add(status);
      });
    }
    
    async function startGeneration() {
      const selected = missingFeatures.filter(f => f.selected);
      if (selected.length === 0) { alert('ìƒì„±í•  ê¸°ëŠ¥ì„ ì„ íƒí•˜ì„¸ìš”.'); return; }
      if (isGenerating) return;
      isGenerating = true;
      
      const btn = document.getElementById('generateBtn');
      btn.disabled = true;
      btn.innerHTML = '<span>â³</span><span>ìƒì„±ì¤‘...</span>';
      document.getElementById('genStatus').textContent = 'ì‹¤í–‰ì¤‘';
      
      updateStep(1, 'active');
      addLog('info', `ë¶„ì„ ì‹œì‘: ${selected.length}ê°œ ê¸°ëŠ¥`);
      await delay(1500);
      updateStep(1, 'complete');
      addLog('success', 'ëª…ì„¸ ë¶„ì„ ì™„ë£Œ');
      
      updateStep(2, 'active');
      addLog('ai', 'Gemini API í˜¸ì¶œì¤‘...');
      await delay(3000);
      generatedCode = generateMockCode(selected);
      document.getElementById('codeContent').innerHTML = generatedCode.preview;
      document.getElementById('codeStats').textContent = `${generatedCode.lines} lines`;
      updateStep(2, 'complete');
      addLog('success', `ì½”ë“œ ìƒì„± ì™„ë£Œ: ${generatedCode.lines} lines`);
      
      updateStep(3, 'active');
      addLog('info', 'ê¸°ì¡´ ì½”ë“œì™€ ë³‘í•©ì¤‘...');
      await delay(2000);
      updateStep(3, 'complete');
      addLog('success', 'ì½”ë“œ ë³‘í•© ì™„ë£Œ');
      
      updateStep(4, 'active');
      addLog('deploy', 'Netlify ë°°í¬ ì‹œì‘...');
      await delay(2500);
      updateStep(4, 'complete');
      addLog('success', 'ğŸš€ ë°°í¬ ì™„ë£Œ! autus-ai.com ì—…ë°ì´íŠ¸ë¨');
      
      document.getElementById('currentScore').textContent = '100';
      document.getElementById('currentScore').classList.remove('current');
      document.getElementById('currentScore').classList.add('target');
      
      isGenerating = false;
      btn.disabled = false;
      btn.innerHTML = '<span>âœ…</span><span>ì™„ë£Œ! ë‹¤ì‹œ ì‹¤í–‰</span>';
      document.getElementById('genStatus').textContent = 'ì™„ë£Œ';
    }
    
    function generateMockCode(features) {
      const lines = features.length * 150;
      const preview = `<span class="code-comment">// AUTUS Self-Generated Code</span>
<span class="code-comment">// Features: ${features.map(f => f.name).join(', ')}</span>

<span class="code-keyword">const</span> <span class="code-function">TemplateMarketplace</span> = () => {
  <span class="code-keyword">const</span> [templates, setTemplates] = useState([]);
  
  <span class="code-keyword">useEffect</span>(() => {
    supabase.from(<span class="code-string">'templates'</span>)
      .select(<span class="code-string">'*'</span>)
      .then(({ data }) => setTemplates(data));
  }, []);
  
  <span class="code-keyword">return</span> (
    &lt;div className=<span class="code-string">"stage-panel"</span>&gt;
      &lt;SearchBar onSearch={handleSearch} /&gt;
      &lt;TemplatesGrid templates={templates} /&gt;
    &lt;/div&gt;
  );
};

<span class="code-comment">// ... ${lines - 20} more lines</span>`;
      return { preview, lines, full: preview };
    }
    
    function delay(ms) { return new Promise(resolve => setTimeout(resolve, ms)); }
    
    function showN8nWorkflow() {
      document.getElementById('modalTitle').textContent = 'n8n Workflow JSON';
      document.getElementById('modalCode').textContent = JSON.stringify(n8nWorkflow, null, 2);
      document.getElementById('modalOverlay').classList.add('active');
    }
    
    function showFullCode() {
      if (!generatedCode) { alert('ë¨¼ì € ì½”ë“œë¥¼ ìƒì„±í•˜ì„¸ìš”.'); return; }
      document.getElementById('modalTitle').textContent = 'Generated Full Code';
      document.getElementById('modalCode').textContent = generatedCode.full;
      document.getElementById('modalOverlay').classList.add('active');
    }
    
    function closeModal() { document.getElementById('modalOverlay').classList.remove('active'); }
    
    function copyToClipboard() {
      navigator.clipboard.writeText(document.getElementById('modalCode').textContent);
      alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
    }
    
    function downloadJson() {
      const blob = new Blob([document.getElementById('modalCode').textContent], { type: 'application/json' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'autus-evolution-workflow.json';
      a.click();
    }
    
    function triggerManually() {
      addLog('info', 'ìˆ˜ë™ íŠ¸ë¦¬ê±° ì‹¤í–‰...');
      setTimeout(() => { addLog('ai', 'n8n webhook í˜¸ì¶œë¨'); addLog('success', 'ì›Œí¬í”Œë¡œìš° ì‹œì‘ë¨'); }, 1000);
    }
    
    renderFeatures();
    renderLog();
  </script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="/js/supabase-client.js"></script>
</body>
</html>
