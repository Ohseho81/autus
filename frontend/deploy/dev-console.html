<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AUTUS Dev Console - Self-Building System</title>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <style>
    :root {
      --bg: #0a0a0f;
      --surface: #12121a;
      --surface2: #1a1a24;
      --border: #2a2a3a;
      --text: #e8e8f0;
      --text2: #888899;
      --accent: #6366f1;
      --accent2: #818cf8;
      --green: #10b981;
      --yellow: #f59e0b;
      --red: #ef4444;
      --cyan: #06b6d4;
      --purple: #a855f7;
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }
    
    /* Header */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 24px;
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 20px;
      font-weight: 700;
    }
    
    .logo-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--accent), var(--purple));
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }
    
    .header-tabs {
      display: flex;
      gap: 4px;
      background: var(--surface2);
      padding: 4px;
      border-radius: 10px;
    }
    
    .header-tab {
      padding: 8px 20px;
      border: none;
      background: transparent;
      color: var(--text2);
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .header-tab:hover { color: var(--text); }
    .header-tab.active {
      background: var(--accent);
      color: white;
    }
    
    .header-status {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .status-badge {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: var(--surface2);
      border-radius: 20px;
      font-size: 12px;
    }
    
    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    .status-dot.green { background: var(--green); }
    .status-dot.yellow { background: var(--yellow); }
    .status-dot.red { background: var(--red); }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* Main Layout */
    .main {
      display: grid;
      grid-template-columns: 280px 1fr 320px;
      height: calc(100vh - 69px);
    }
    
    /* Sidebar */
    .sidebar {
      background: var(--surface);
      border-right: 1px solid var(--border);
      overflow-y: auto;
      padding: 16px;
    }
    
    .sidebar-section {
      margin-bottom: 24px;
    }
    
    .sidebar-title {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      color: var(--text2);
      margin-bottom: 12px;
      letter-spacing: 0.5px;
    }
    
    .wizard-step {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--surface2);
      border-radius: 10px;
      margin-bottom: 8px;
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.2s;
    }
    
    .wizard-step:hover { border-color: var(--border); }
    .wizard-step.active { border-color: var(--accent); background: rgba(99, 102, 241, 0.1); }
    .wizard-step.completed { border-color: var(--green); }
    
    .step-number {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--surface);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
    }
    
    .wizard-step.completed .step-number {
      background: var(--green);
      color: white;
    }
    
    .wizard-step.active .step-number {
      background: var(--accent);
      color: white;
    }
    
    .step-info { flex: 1; }
    .step-name { font-size: 13px; font-weight: 500; }
    .step-desc { font-size: 11px; color: var(--text2); }
    
    .step-status {
      font-size: 16px;
    }
    
    /* Progress */
    .progress-bar {
      height: 4px;
      background: var(--surface2);
      border-radius: 2px;
      margin-bottom: 24px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--green));
      border-radius: 2px;
      transition: width 0.5s ease;
    }
    
    /* Content */
    .content {
      padding: 24px;
      overflow-y: auto;
    }
    
    .content-header {
      margin-bottom: 24px;
    }
    
    .content-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .content-desc {
      color: var(--text2);
      font-size: 14px;
    }
    
    /* Code Block */
    .code-container {
      background: #0d1117;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 24px;
    }
    
    .code-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: #161b22;
      border-bottom: 1px solid #30363d;
    }
    
    .code-lang {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: #8b949e;
    }
    
    .code-actions {
      display: flex;
      gap: 8px;
    }
    
    .code-btn {
      padding: 6px 12px;
      border: none;
      background: #21262d;
      color: #c9d1d9;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 6px;
      transition: all 0.2s;
    }
    
    .code-btn:hover { background: #30363d; }
    .code-btn.copied { background: var(--green); color: white; }
    
    .code-content {
      padding: 16px;
      font-family: 'SF Mono', 'Fira Code', monospace;
      font-size: 13px;
      line-height: 1.6;
      color: #c9d1d9;
      overflow-x: auto;
      white-space: pre;
    }
    
    /* Action Cards */
    .action-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    
    .action-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .action-card:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
    }
    
    .action-icon {
      font-size: 32px;
      margin-bottom: 12px;
    }
    
    .action-name {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .action-desc {
      font-size: 12px;
      color: var(--text2);
    }
    
    /* Console Input */
    .console-input {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
    }
    
    .console-label {
      font-size: 12px;
      color: var(--text2);
      margin-bottom: 8px;
    }
    
    .console-field {
      display: flex;
      gap: 12px;
    }
    
    .console-textarea {
      flex: 1;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px;
      color: var(--text);
      font-family: 'SF Mono', monospace;
      font-size: 14px;
      resize: vertical;
      min-height: 80px;
    }
    
    .console-textarea:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .console-submit {
      padding: 12px 24px;
      background: linear-gradient(135deg, var(--accent), var(--purple));
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }
    
    .console-submit:hover { transform: scale(1.02); }
    .console-submit:disabled { opacity: 0.5; cursor: not-allowed; }
    
    /* Right Panel */
    .right-panel {
      background: var(--surface);
      border-left: 1px solid var(--border);
      overflow-y: auto;
      padding: 16px;
    }
    
    .panel-section {
      margin-bottom: 24px;
    }
    
    .panel-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    /* Log */
    .log-item {
      display: flex;
      gap: 10px;
      padding: 10px;
      background: var(--surface2);
      border-radius: 8px;
      margin-bottom: 8px;
      font-size: 12px;
    }
    
    .log-time {
      color: var(--text2);
      white-space: nowrap;
    }
    
    .log-type {
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
    }
    
    .log-type.success { background: rgba(16, 185, 129, 0.2); color: var(--green); }
    .log-type.info { background: rgba(99, 102, 241, 0.2); color: var(--accent); }
    .log-type.warning { background: rgba(245, 158, 11, 0.2); color: var(--yellow); }
    .log-type.error { background: rgba(239, 68, 68, 0.2); color: var(--red); }
    
    .log-message { flex: 1; }
    
    /* Checklist */
    .checklist-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: var(--surface2);
      border-radius: 8px;
      margin-bottom: 8px;
      cursor: pointer;
    }
    
    .checklist-item:hover { background: var(--border); }
    
    .check-box {
      width: 20px;
      height: 20px;
      border: 2px solid var(--border);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: transparent;
    }
    
    .checklist-item.checked .check-box {
      background: var(--green);
      border-color: var(--green);
      color: white;
    }
    
    .check-label { font-size: 13px; flex: 1; }
    
    /* AI Response */
    .ai-response {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1));
      border: 1px solid var(--accent);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
    }
    
    .ai-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    
    .ai-avatar {
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, var(--accent), var(--purple));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }
    
    .ai-name {
      font-weight: 600;
      font-size: 14px;
    }
    
    .ai-content {
      font-size: 14px;
      line-height: 1.6;
    }
    
    .ai-content code {
      background: rgba(0,0,0,0.3);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'SF Mono', monospace;
      font-size: 13px;
    }
    
    /* Buttons */
    .btn-row {
      display: flex;
      gap: 12px;
      margin-top: 16px;
    }
    
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .btn-primary {
      background: var(--accent);
      color: white;
    }
    
    .btn-primary:hover { background: var(--accent2); }
    
    .btn-secondary {
      background: var(--surface2);
      color: var(--text);
      border: 1px solid var(--border);
    }
    
    .btn-secondary:hover { background: var(--border); }
    
    .btn-success {
      background: var(--green);
      color: white;
    }
    
    /* Toast */
    .toast {
      position: fixed;
      bottom: 24px;
      right: 24px;
      padding: 16px 24px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.4);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }
    
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    .toast-icon { font-size: 24px; }
    .toast-content { flex: 1; }
    .toast-title { font-weight: 600; font-size: 14px; }
    .toast-desc { font-size: 12px; color: var(--text2); }
    
    /* Loading */
    .loading {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    
    .spinner {
      width: 16px;
      height: 16px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Env Vars */
    .env-table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .env-table th, .env-table td {
      text-align: left;
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
      font-size: 13px;
    }
    
    .env-table th {
      color: var(--text2);
      font-weight: 500;
    }
    
    .env-key {
      font-family: 'SF Mono', monospace;
      color: var(--cyan);
    }
    
    .env-value {
      font-family: 'SF Mono', monospace;
    }
    
    .env-status {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    /* Auth Screen */
    .auth-screen {
      position: fixed;
      inset: 0;
      background: var(--bg);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .auth-box {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 40px;
      text-align: center;
      max-width: 400px;
    }
    .auth-box h2 {
      font-size: 24px;
      margin-bottom: 8px;
      background: linear-gradient(135deg, var(--accent), var(--purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .auth-box p {
      color: var(--text2);
      margin-bottom: 24px;
    }
    .auth-input {
      width: 100%;
      padding: 14px 16px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: var(--text);
      font-size: 16px;
      margin-bottom: 16px;
      text-align: center;
      letter-spacing: 4px;
    }
    .auth-input:focus {
      outline: none;
      border-color: var(--accent);
    }
    .auth-btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, var(--accent), var(--purple));
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }
    .auth-btn:hover {
      opacity: 0.9;
    }
    .auth-error {
      color: var(--red);
      font-size: 14px;
      margin-top: 12px;
      display: none;
    }
    .app-content { display: none; }
    .app-content.visible { display: block; }
  </style>
</head>
<body>
  <!-- Auth Screen -->
  <div class="auth-screen" id="authScreen">
    <div class="auth-box">
      <h2>ğŸ” AUTUS Dev Console</h2>
      <p>ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
      <input type="password" class="auth-input" id="authPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" maxlength="20" autofocus>
      <button class="auth-btn" onclick="checkAuth()">ì ‘ì†í•˜ê¸°</button>
      <div class="auth-error" id="authError">ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤</div>
    </div>
  </div>
  
  <div class="app-content" id="appContent">
  <!-- Header -->
  <header class="header">
    <div class="logo">
      <div class="logo-icon">ğŸ§ </div>
      <span>AUTUS <span style="color:var(--accent)">Dev Console</span></span>
    </div>
    
    <div class="header-tabs">
      <button class="header-tab active" data-tab="wizard">Setup Wizard</button>
      <button class="header-tab" data-tab="console">Dev Console</button>
      <button class="header-tab" data-tab="env">Environment</button>
      <button class="header-tab" data-tab="logs">Activity Log</button>
    </div>
    
    <div class="header-status">
      <div class="status-badge">
        <div class="status-dot" id="supabaseStatus"></div>
        <span>Supabase</span>
      </div>
      <div class="status-badge">
        <div class="status-dot" id="n8nStatus"></div>
        <span>n8n</span>
      </div>
      <div class="status-badge">
        <div class="status-dot" id="geminiStatus"></div>
        <span>Gemini</span>
      </div>
    </div>
  </header>
  
  <!-- Main Layout -->
  <main class="main">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">Setup Progress</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">Setup Steps</div>
        <div id="wizardSteps"></div>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">ğŸš€ Auto Setup</div>
        <div class="action-cards" style="grid-template-columns: 1fr;">
          <div class="action-card" onclick="runAutoSetup()" style="border-color:var(--green);background:rgba(16,185,129,0.1);">
            <div class="action-icon">ğŸ§ </div>
            <div class="action-name">AUTUS ìë™ ì„¤ì •</div>
            <div class="action-desc">ì „ì²´ í™˜ê²½ ìë™ êµ¬ì„±</div>
          </div>
        </div>
      </div>
      
      <div class="sidebar-section">
        <div class="sidebar-title">Quick Actions</div>
        <div class="action-cards" style="grid-template-columns: 1fr;">
          <div class="action-card" onclick="generateSQL()">
            <div class="action-icon">ğŸ—„ï¸</div>
            <div class="action-name">Generate SQL</div>
            <div class="action-desc">Supabase í…Œì´ë¸” ìƒì„±</div>
          </div>
          <div class="action-card" onclick="generateDocker()">
            <div class="action-icon">ğŸ³</div>
            <div class="action-name">Docker Compose</div>
            <div class="action-desc">n8n ì»¨í…Œì´ë„ˆ ì„¤ì •</div>
          </div>
          <div class="action-card" onclick="generateEnv()">
            <div class="action-icon">ğŸ”‘</div>
            <div class="action-name">ENV Template</div>
            <div class="action-desc">í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿</div>
          </div>
        </div>
      </div>
    </aside>
    
    <!-- Content -->
    <section class="content" id="mainContent">
      <!-- Will be populated by JS -->
    </section>
    
    <!-- Right Panel -->
    <aside class="right-panel">
      <div class="panel-section">
        <div class="panel-title">ğŸ“‹ Setup Checklist</div>
        <div id="checklist"></div>
      </div>
      
      <div class="panel-section">
        <div class="panel-title">ğŸ“œ Activity Log</div>
        <div id="activityLog"></div>
      </div>
      
      <div class="panel-section">
        <div class="panel-title">ğŸ¤– AUTUS AI</div>
        <div class="ai-response">
          <div class="ai-header">
            <div class="ai-avatar">ğŸ§ </div>
            <div class="ai-name">AUTUS Assistant</div>
          </div>
          <div class="ai-content" id="aiMessage">
            ì•ˆë…•í•˜ì„¸ìš”! AUTUS ì…€í”„-ë¹Œë”© ì‹œìŠ¤í…œì…ë‹ˆë‹¤. 
            ì™¼ìª½ Setup Wizardë¥¼ ë”°ë¼ í™˜ê²½ì„ êµ¬ì„±í•˜ë©´, 
            ì œê°€ í•„ìš”í•œ ì½”ë“œì™€ ì„¤ì •ì„ ìë™ìœ¼ë¡œ ìƒì„±í•´ ë“œë¦½ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </aside>
  </main>
  
  <!-- Toast -->
  <div class="toast" id="toast">
    <div class="toast-icon">âœ…</div>
    <div class="toast-content">
      <div class="toast-title" id="toastTitle">Success</div>
      <div class="toast-desc" id="toastDesc">Operation completed</div>
    </div>
  </div>
  
  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // State
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    const STATE = {
      currentTab: 'wizard',
      currentStep: 0,
      completedSteps: new Set(),
      checklist: {
        supabase_project: false,
        supabase_tables: false,
        supabase_rls: false,
        n8n_docker: false,
        n8n_workflows: false,
        azure_app: false,
        gemini_key: false,
        env_config: false
      },
      logs: [],
      env: {
        SUPABASE_URL: '',
        SUPABASE_ANON_KEY: '',
        SUPABASE_SERVICE_KEY: '',
        N8N_BASE_URL: 'http://localhost:5678',
        GEMINI_API_KEY: '',
        MS_CLIENT_ID: '',
        MS_CLIENT_SECRET: '',
        MS_TENANT_ID: ''
      }
    };
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Setup Steps Configuration
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    const SETUP_STEPS = [
      {
        id: 'supabase',
        name: 'Supabase Setup',
        desc: 'ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±',
        icon: 'ğŸ—„ï¸'
      },
      {
        id: 'rls',
        name: 'RLS Security',
        desc: 'ë³´ì•ˆ ì •ì±… ì ìš©',
        icon: 'ğŸ”’'
      },
      {
        id: 'n8n',
        name: 'n8n Docker',
        desc: 'ì›Œí¬í”Œë¡œìš° ì—”ì§„ ì„¤ì •',
        icon: 'ğŸ³'
      },
      {
        id: 'microsoft',
        name: 'Microsoft 365',
        desc: 'Azure AD ì•± ë“±ë¡',
        icon: 'ğŸ”·'
      },
      {
        id: 'gemini',
        name: 'Gemini AI',
        desc: 'API í‚¤ ì„¤ì •',
        icon: 'ğŸ¤–'
      },
      {
        id: 'verify',
        name: 'Verify Setup',
        desc: 'ì „ì²´ ì—°ê²° í…ŒìŠ¤íŠ¸',
        icon: 'âœ…'
      }
    ];
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // SQL Templates
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    const SQL_TEMPLATES = {
      tables: `-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- AUTUS Supabase Tables (Auto-Generated)
-- Generated: ${new Date().toISOString()}
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Enable UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- Stage 1: Templates (Template Marketplace)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CREATE TABLE IF NOT EXISTS templates (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name TEXT NOT NULL,
    category TEXT NOT NULL,          -- Finance, HR, IT, Sales, Ops, Prod
    description TEXT,
    nodes_json JSONB NOT NULL,       -- React Flow ë…¸ë“œ ë°°ì—´
    metrics JSONB DEFAULT '{}',      -- { "users": 0, "rating": 0.0, "time": 0.0 }
    badges TEXT[] DEFAULT '{}',      -- ['Popular', 'AI', 'New']
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- Stage 2 & 3: Tasks (Captured Tasks)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CREATE TABLE IF NOT EXISTS tasks (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    title TEXT NOT NULL,
    source TEXT,                     -- 'Gmail', 'Outlook', 'SAP', 'Manual'
    captured_at TIMESTAMPTZ DEFAULT NOW(),
    status TEXT DEFAULT 'captured',  -- captured, suggested, executed, eliminated
    data JSONB,                      -- ì›ë³¸ ë°ì´í„°
    user_id UUID,                    -- auth.users ì°¸ì¡°
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- Stage 4: Outcomes (Execution Results)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CREATE TABLE IF NOT EXISTS outcomes (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    task_id UUID REFERENCES tasks(id) ON DELETE CASCADE,
    success BOOLEAN,
    time_saved_minutes NUMERIC,
    error_rate_percent NUMERIC,
    cost_saved NUMERIC,
    executed_at TIMESTAMPTZ DEFAULT NOW(),
    notes TEXT
);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- Stage 5: Feedbacks (User Feedback for LoRA)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CREATE TABLE IF NOT EXISTS feedbacks (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    suggestion_id TEXT,              -- AI suggestion unique key
    task_id UUID REFERENCES tasks(id),
    feedback_type TEXT CHECK (feedback_type IN ('thumbs_up', 'thumbs_down')),
    comment TEXT,
    user_id UUID,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- Stage 6: Global Stats (Collective Intelligence)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CREATE TABLE IF NOT EXISTS global_stats (
    id SERIAL PRIMARY KEY,
    org_count BIGINT DEFAULT 0,
    task_count BIGINT DEFAULT 0,
    adoption_rate NUMERIC DEFAULT 0,
    last_sync TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- Indexes for Performance
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CREATE INDEX IF NOT EXISTS idx_tasks_user_id ON tasks(user_id);
CREATE INDEX IF NOT EXISTS idx_tasks_status ON tasks(status);
CREATE INDEX IF NOT EXISTS idx_outcomes_task_id ON outcomes(task_id);
CREATE INDEX IF NOT EXISTS idx_feedbacks_user_id ON feedbacks(user_id);
CREATE INDEX IF NOT EXISTS idx_templates_category ON templates(category);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- Done! Run this in Supabase SQL Editor
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`,

      rls: `-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- AUTUS Row Level Security (RLS) Policies
-- Run AFTER creating tables
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- tasks: ì‚¬ìš©ìë³„ ê²©ë¦¬
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ALTER TABLE tasks ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own tasks"
ON tasks FOR SELECT
TO authenticated
USING (auth.uid() = user_id);

CREATE POLICY "Users can insert their own tasks"
ON tasks FOR INSERT
TO authenticated
WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own tasks"
ON tasks FOR UPDATE
TO authenticated
USING (auth.uid() = user_id)
WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete their own tasks"
ON tasks FOR DELETE
TO authenticated
USING (auth.uid() = user_id);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- templates: ê³µê°œ ì½ê¸°, ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ìƒì„±
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ALTER TABLE templates ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Templates are viewable by everyone"
ON templates FOR SELECT
TO authenticated, anon
USING (true);

CREATE POLICY "Authenticated users can manage templates"
ON templates FOR ALL
TO authenticated
USING (true)
WITH CHECK (true);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- outcomes: task ì†Œìœ ìë§Œ
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ALTER TABLE outcomes ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage their own outcomes"
ON outcomes FOR ALL
TO authenticated
USING (
  EXISTS (
    SELECT 1 FROM tasks
    WHERE tasks.id = outcomes.task_id
    AND tasks.user_id = auth.uid()
  )
);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- feedbacks: ì‚¬ìš©ìë³„ ê²©ë¦¬
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ALTER TABLE feedbacks ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage their own feedback"
ON feedbacks FOR ALL
TO authenticated
USING (auth.uid() = user_id)
WITH CHECK (auth.uid() = user_id);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- global_stats: ì½ê¸° ì „ìš© (ì„œë¹„ìŠ¤ í‚¤ë¡œë§Œ ì“°ê¸°)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ALTER TABLE global_stats ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Global stats are public read"
ON global_stats FOR SELECT
TO authenticated, anon
USING (true);

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- RLS Applied! Test with different users.
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`
    };
    
    const DOCKER_COMPOSE = `# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# AUTUS n8n Docker Compose
# Generated: ${new Date().toISOString()}
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

version: '3.8'

services:
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    restart: unless-stopped
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=admin
      - N8N_BASIC_AUTH_PASSWORD=\${N8N_PASSWORD:-autus_secure_password}
      - N8N_HOST=\${N8N_HOST:-localhost}
      - N8N_PORT=5678
      - N8N_PROTOCOL=http
      - WEBHOOK_URL=http://\${N8N_HOST:-localhost}:5678/
      - GENERIC_TIMEZONE=Asia/Seoul
      - TZ=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    networks:
      - autus-network

  # Optional: Redis for caching
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    restart: unless-stopped
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    networks:
      - autus-network

volumes:
  n8n_data:
  redis_data:

networks:
  autus-network:
    driver: bridge

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Usage:
#   docker-compose up -d
#   Open http://localhost:5678
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`;

    const ENV_TEMPLATE = `# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# AUTUS Environment Variables
# Generated: ${new Date().toISOString()}
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Supabase
# Get from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SUPABASE_URL=https://YOUR_PROJECT.supabase.co
SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_KEY=eyJ...  # Keep secret! Server-side only

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# n8n
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
N8N_BASE_URL=http://localhost:5678
N8N_API_KEY=  # Optional, for API access

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Gemini AI
# Get from: https://aistudio.google.com/app/apikey
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
GEMINI_API_KEY=AIza...

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Microsoft Graph (Azure AD)
# Get from: https://portal.azure.com â†’ App registrations
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MS_CLIENT_ID=
MS_CLIENT_SECRET=
MS_TENANT_ID=common

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Salesforce (Optional)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SF_CLIENT_ID=
SF_CLIENT_SECRET=
SF_INSTANCE_URL=https://login.salesforce.com

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ServiceNow (Optional)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SNOW_INSTANCE=
SNOW_USERNAME=
SNOW_PASSWORD=

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Security
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
AUTUS_WEBHOOK_SECRET=your_secure_secret_here
JWT_SECRET=your_jwt_secret_here`;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Render Functions
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    function renderWizardSteps() {
      const container = document.getElementById('wizardSteps');
      container.innerHTML = SETUP_STEPS.map((step, i) => {
        const isCompleted = STATE.completedSteps.has(i);
        const isActive = i === STATE.currentStep;
        return `
          <div class="wizard-step ${isCompleted ? 'completed' : ''} ${isActive ? 'active' : ''}"
               onclick="goToStep(${i})">
            <div class="step-number">${isCompleted ? 'âœ“' : i + 1}</div>
            <div class="step-info">
              <div class="step-name">${step.name}</div>
              <div class="step-desc">${step.desc}</div>
            </div>
            <div class="step-status">${step.icon}</div>
          </div>
        `;
      }).join('');
      
      // Update progress
      const progress = (STATE.completedSteps.size / SETUP_STEPS.length) * 100;
      document.getElementById('progressFill').style.width = `${progress}%`;
    }
    
    function renderChecklist() {
      const container = document.getElementById('checklist');
      const items = [
        { key: 'supabase_project', label: 'Supabase í”„ë¡œì íŠ¸ ìƒì„±' },
        { key: 'supabase_tables', label: 'DB í…Œì´ë¸” ìƒì„±' },
        { key: 'supabase_rls', label: 'RLS ë³´ì•ˆ ì •ì±… ì ìš©' },
        { key: 'n8n_docker', label: 'n8n Docker ì‹¤í–‰' },
        { key: 'n8n_workflows', label: 'n8n ì›Œí¬í”Œë¡œìš° ì„¤ì •' },
        { key: 'azure_app', label: 'Azure AD ì•± ë“±ë¡' },
        { key: 'gemini_key', label: 'Gemini API í‚¤ ì„¤ì •' },
        { key: 'env_config', label: 'í™˜ê²½ë³€ìˆ˜ ì„¤ì • ì™„ë£Œ' }
      ];
      
      container.innerHTML = items.map(item => `
        <div class="checklist-item ${STATE.checklist[item.key] ? 'checked' : ''}"
             onclick="toggleChecklist('${item.key}')">
          <div class="check-box">âœ“</div>
          <div class="check-label">${item.label}</div>
        </div>
      `).join('');
    }
    
    function renderLogs() {
      const container = document.getElementById('activityLog');
      const recentLogs = STATE.logs.slice(-10).reverse();
      
      container.innerHTML = recentLogs.map(log => `
        <div class="log-item">
          <span class="log-time">${log.time}</span>
          <span class="log-type ${log.type}">${log.type}</span>
          <span class="log-message">${log.message}</span>
        </div>
      `).join('') || '<div style="color:var(--text2);font-size:12px;text-align:center;padding:20px;">No activity yet</div>';
    }
    
    function renderContent() {
      const container = document.getElementById('mainContent');
      
      if (STATE.currentTab === 'wizard') {
        renderWizardContent(container);
      } else if (STATE.currentTab === 'console') {
        renderConsoleContent(container);
      } else if (STATE.currentTab === 'env') {
        renderEnvContent(container);
      } else if (STATE.currentTab === 'logs') {
        renderLogsContent(container);
      }
    }
    
    function renderWizardContent(container) {
      const step = SETUP_STEPS[STATE.currentStep];
      let content = '';
      
      if (step.id === 'supabase') {
        content = `
          <div class="content-header">
            <h1 class="content-title">ğŸ—„ï¸ Step 1: Supabase í…Œì´ë¸” ìƒì„±</h1>
            <p class="content-desc">AUTUSê°€ ìë™ìœ¼ë¡œ ìƒì„±í•œ SQLì„ Supabase SQL Editorì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”.</p>
          </div>
          
          <div class="action-cards">
            <div class="action-card" onclick="window.open('https://supabase.com/dashboard', '_blank')">
              <div class="action-icon">ğŸŒ</div>
              <div class="action-name">Supabase ì—´ê¸°</div>
              <div class="action-desc">ëŒ€ì‹œë³´ë“œë¡œ ì´ë™</div>
            </div>
            <div class="action-card" onclick="copySQL('tables')">
              <div class="action-icon">ğŸ“‹</div>
              <div class="action-name">SQL ë³µì‚¬</div>
              <div class="action-desc">í´ë¦½ë³´ë“œì— ë³µì‚¬</div>
            </div>
          </div>
          
          <div class="code-container">
            <div class="code-header">
              <div class="code-lang">
                <span>ğŸ“„</span>
                <span>SQL - Supabase Tables</span>
              </div>
              <div class="code-actions">
                <button class="code-btn" onclick="copySQL('tables')">ğŸ“‹ Copy</button>
              </div>
            </div>
            <div class="code-content">${escapeHtml(SQL_TEMPLATES.tables)}</div>
          </div>
          
          <div class="btn-row">
            <button class="btn btn-success" onclick="markStepComplete(0, 'supabase_tables')">
              âœ… í…Œì´ë¸” ìƒì„± ì™„ë£Œ
            </button>
            <button class="btn btn-secondary" onclick="goToStep(1)">
              ë‹¤ìŒ ë‹¨ê³„ â†’
            </button>
          </div>
        `;
      } else if (step.id === 'rls') {
        content = `
          <div class="content-header">
            <h1 class="content-title">ğŸ”’ Step 2: RLS ë³´ì•ˆ ì •ì±… ì ìš©</h1>
            <p class="content-desc">Row Level Securityë¡œ ì‚¬ìš©ìë³„ ë°ì´í„° ê²©ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</p>
          </div>
          
          <div class="ai-response">
            <div class="ai-header">
              <div class="ai-avatar">ğŸ§ </div>
              <div class="ai-name">AUTUS Security Advisor</div>
            </div>
            <div class="ai-content">
              RLSëŠ” <code>auth.uid()</code>ë¥¼ ì‚¬ìš©í•´ ê° ì‚¬ìš©ìê°€ ìì‹ ì˜ ë°ì´í„°ë§Œ ì ‘ê·¼í•˜ë„ë¡ í•©ë‹ˆë‹¤.
              anon í‚¤ë¡œëŠ” ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ì—†ì–´ ë³´ì•ˆì´ ê°•í™”ë©ë‹ˆë‹¤.
            </div>
          </div>
          
          <div class="code-container">
            <div class="code-header">
              <div class="code-lang">
                <span>ğŸ”’</span>
                <span>SQL - RLS Policies</span>
              </div>
              <div class="code-actions">
                <button class="code-btn" onclick="copySQL('rls')">ğŸ“‹ Copy</button>
              </div>
            </div>
            <div class="code-content">${escapeHtml(SQL_TEMPLATES.rls)}</div>
          </div>
          
          <div class="btn-row">
            <button class="btn btn-success" onclick="markStepComplete(1, 'supabase_rls')">
              âœ… RLS ì ìš© ì™„ë£Œ
            </button>
            <button class="btn btn-secondary" onclick="goToStep(2)">
              ë‹¤ìŒ ë‹¨ê³„ â†’
            </button>
          </div>
        `;
      } else if (step.id === 'n8n') {
        content = `
          <div class="content-header">
            <h1 class="content-title">ğŸ³ Step 3: n8n Docker ì„¤ì •</h1>
            <p class="content-desc">ì›Œí¬í”Œë¡œìš° ìë™í™” ì—”ì§„ì„ Dockerë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>
          </div>
          
          <div class="action-cards">
            <div class="action-card" onclick="copyDocker()">
              <div class="action-icon">ğŸ“‹</div>
              <div class="action-name">docker-compose.yml</div>
              <div class="action-desc">ë³µì‚¬ í›„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ì €ì¥</div>
            </div>
            <div class="action-card" onclick="showToast('Command', 'docker-compose up -d')">
              <div class="action-icon">â–¶ï¸</div>
              <div class="action-name">Run Command</div>
              <div class="action-desc">docker-compose up -d</div>
            </div>
          </div>
          
          <div class="code-container">
            <div class="code-header">
              <div class="code-lang">
                <span>ğŸ³</span>
                <span>YAML - docker-compose.yml</span>
              </div>
              <div class="code-actions">
                <button class="code-btn" onclick="copyDocker()">ğŸ“‹ Copy</button>
              </div>
            </div>
            <div class="code-content">${escapeHtml(DOCKER_COMPOSE)}</div>
          </div>
          
          <div class="btn-row">
            <button class="btn btn-success" onclick="markStepComplete(2, 'n8n_docker')">
              âœ… n8n ì‹¤í–‰ ì™„ë£Œ
            </button>
            <button class="btn btn-secondary" onclick="window.open('http://localhost:5678', '_blank')">
              ğŸŒ n8n ì—´ê¸° (localhost:5678)
            </button>
          </div>
        `;
      } else if (step.id === 'microsoft') {
        content = `
          <div class="content-header">
            <h1 class="content-title">ğŸ”· Step 4: Microsoft 365 ì—°ë™</h1>
            <p class="content-desc">Azure ADì—ì„œ ì•±ì„ ë“±ë¡í•˜ê³  Graph API ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤.</p>
          </div>
          
          <div class="ai-response">
            <div class="ai-header">
              <div class="ai-avatar">ğŸ§ </div>
              <div class="ai-name">AUTUS Guide</div>
            </div>
            <div class="ai-content">
              <strong>Azure Portal ì„¤ì • ìˆœì„œ:</strong><br>
              1. <a href="https://portal.azure.com" target="_blank">portal.azure.com</a> â†’ App registrations<br>
              2. New registration â†’ ì´ë¦„: "AUTUS"<br>
              3. Redirect URI: <code>http://localhost:3000/auth/callback</code><br>
              4. API permissions â†’ Microsoft Graph ì¶”ê°€<br>
              5. Client secret ìƒì„± â†’ ë³µì‚¬
            </div>
          </div>
          
          <div class="action-cards">
            <div class="action-card" onclick="window.open('https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade', '_blank')">
              <div class="action-icon">ğŸ”·</div>
              <div class="action-name">Azure Portal</div>
              <div class="action-desc">ì•± ë“±ë¡ í˜ì´ì§€</div>
            </div>
          </div>
          
          <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:24px;">
            <h3 style="margin-bottom:16px;font-size:14px;">í•„ìš”í•œ Graph API ê¶Œí•œ</h3>
            <table class="env-table">
              <tr><th>Permission</th><th>Type</th><th>Description</th></tr>
              <tr><td>Mail.Read</td><td>Delegated</td><td>ì´ë©”ì¼ ì½ê¸°</td></tr>
              <tr><td>Calendars.Read</td><td>Delegated</td><td>ìº˜ë¦°ë” ì½ê¸°</td></tr>
              <tr><td>Chat.Read</td><td>Delegated</td><td>Teams ì±„íŒ… ì½ê¸°</td></tr>
              <tr><td>Files.Read.All</td><td>Delegated</td><td>SharePoint/OneDrive íŒŒì¼</td></tr>
              <tr><td>User.Read</td><td>Delegated</td><td>í”„ë¡œí•„ ì •ë³´</td></tr>
            </table>
          </div>
          
          <div class="btn-row">
            <button class="btn btn-success" onclick="markStepComplete(3, 'azure_app')">
              âœ… Azure ì•± ë“±ë¡ ì™„ë£Œ
            </button>
          </div>
        `;
      } else if (step.id === 'gemini') {
        content = `
          <div class="content-header">
            <h1 class="content-title">ğŸ¤– Step 5: Gemini AI ì„¤ì •</h1>
            <p class="content-desc">Google AI Studioì—ì„œ API í‚¤ë¥¼ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.</p>
          </div>
          
          <div class="action-cards">
            <div class="action-card" onclick="window.open('https://aistudio.google.com/app/apikey', '_blank')">
              <div class="action-icon">ğŸ”‘</div>
              <div class="action-name">API Key ë°œê¸‰</div>
              <div class="action-desc">Google AI Studio</div>
            </div>
          </div>
          
          <div class="ai-response">
            <div class="ai-header">
              <div class="ai-avatar">ğŸ§ </div>
              <div class="ai-name">AUTUS AI Prompt Template</div>
            </div>
            <div class="ai-content">
              AUTUSê°€ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ì…ë‹ˆë‹¤. í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •í•˜ì„¸ìš”.
            </div>
          </div>
          
          <div class="code-container">
            <div class="code-header">
              <div class="code-lang">
                <span>ğŸ¤–</span>
                <span>Gemini Prompt Template</span>
              </div>
              <div class="code-actions">
                <button class="code-btn" onclick="copyGeminiPrompt()">ğŸ“‹ Copy</button>
              </div>
            </div>
            <div class="code-content">${escapeHtml(`You are AUTUS, an AI workflow optimizer.

Current tasks: {tasks_json}
User context: {user_context}
Previous suggestions accuracy: {accuracy}%

Analyze the tasks and suggest 3 actions:
1. Merge: Combine similar tasks
2. Eliminate: Remove redundant tasks  
3. Automate: Create automation flow

For each suggestion provide:
- confidence: 0-100
- reason: 2-3 sentences
- simulation: { time: "+X%", errors: "-Y%", cost: "-$Z" }
- alternatives: [3 alternative options]

Output: JSON array`)}</div>
          </div>
          
          <div class="btn-row">
            <button class="btn btn-success" onclick="markStepComplete(4, 'gemini_key')">
              âœ… Gemini ì„¤ì • ì™„ë£Œ
            </button>
          </div>
        `;
      } else if (step.id === 'verify') {
        content = `
          <div class="content-header">
            <h1 class="content-title">âœ… Step 6: ì „ì²´ ì—°ê²° í…ŒìŠ¤íŠ¸</h1>
            <p class="content-desc">ëª¨ë“  ì„œë¹„ìŠ¤ê°€ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
          </div>
          
          <div class="action-cards">
            <div class="action-card" onclick="testSupabase()">
              <div class="action-icon">ğŸ—„ï¸</div>
              <div class="action-name">Supabase í…ŒìŠ¤íŠ¸</div>
              <div class="action-desc">DB ì—°ê²° í™•ì¸</div>
            </div>
            <div class="action-card" onclick="testN8n()">
              <div class="action-icon">ğŸ³</div>
              <div class="action-name">n8n í…ŒìŠ¤íŠ¸</div>
              <div class="action-desc">ì›Œí¬í”Œë¡œìš° ì—”ì§„ í™•ì¸</div>
            </div>
            <div class="action-card" onclick="testGemini()">
              <div class="action-icon">ğŸ¤–</div>
              <div class="action-name">Gemini í…ŒìŠ¤íŠ¸</div>
              <div class="action-desc">AI ì‘ë‹µ í™•ì¸</div>
            </div>
          </div>
          
          <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:20px;margin-bottom:24px;">
            <h3 style="margin-bottom:16px;font-size:14px;">ì—°ê²° ìƒíƒœ</h3>
            <div style="display:grid;gap:12px;">
              <div style="display:flex;align-items:center;gap:12px;padding:12px;background:var(--surface2);border-radius:8px;">
                <div class="status-dot green"></div>
                <span style="flex:1;">Supabase</span>
                <span style="color:var(--green);">Connected</span>
              </div>
              <div style="display:flex;align-items:center;gap:12px;padding:12px;background:var(--surface2);border-radius:8px;">
                <div class="status-dot green"></div>
                <span style="flex:1;">n8n</span>
                <span style="color:var(--green);">Running</span>
              </div>
              <div style="display:flex;align-items:center;gap:12px;padding:12px;background:var(--surface2);border-radius:8px;">
                <div class="status-dot green"></div>
                <span style="flex:1;">Gemini AI</span>
                <span style="color:var(--green);">Active</span>
              </div>
            </div>
          </div>
          
          <div class="btn-row">
            <button class="btn btn-success" onclick="completeSetup()">
              ğŸ‰ Setup ì™„ë£Œ!
            </button>
            <button class="btn btn-primary" onclick="window.location.href='autus-production.html'">
              â†’ AUTUS ì‹œì‘í•˜ê¸°
            </button>
          </div>
        `;
      }
      
      container.innerHTML = content;
    }
    
    function renderConsoleContent(container) {
      container.innerHTML = `
        <div class="content-header">
          <h1 class="content-title">ğŸ’» Dev Console</h1>
          <p class="content-desc">AUTUSì—ê²Œ ëª…ë ¹ì„ ì…ë ¥í•˜ë©´ ì½”ë“œ/ì„¤ì •ì„ ìë™ ìƒì„±í•©ë‹ˆë‹¤.</p>
        </div>
        
        <div class="console-input">
          <div class="console-label">Enter Command (e.g., "Generate SAP connector", "Create n8n workflow for email")</div>
          <div class="console-field">
            <textarea class="console-textarea" id="consoleInput" placeholder="ë¬´ì—‡ì„ ìƒì„±í• ê¹Œìš”?"></textarea>
            <button class="console-submit" onclick="executeCommand()">
              ğŸ§  Generate
            </button>
          </div>
        </div>
        
        <div id="consoleOutput"></div>
        
        <div class="action-cards">
          <div class="action-card" onclick="setCommand('Generate Microsoft Graph connector')">
            <div class="action-icon">ğŸ”·</div>
            <div class="action-name">MS Graph Connector</div>
          </div>
          <div class="action-card" onclick="setCommand('Create n8n workflow for Gmail to Supabase')">
            <div class="action-icon">ğŸ“§</div>
            <div class="action-name">Gmail â†’ Supabase</div>
          </div>
          <div class="action-card" onclick="setCommand('Generate Playwright RPA script for login')">
            <div class="action-icon">ğŸ¤–</div>
            <div class="action-name">RPA Script</div>
          </div>
          <div class="action-card" onclick="setCommand('Create Process Mining analysis')">
            <div class="action-icon">ğŸ“Š</div>
            <div class="action-name">Process Mining</div>
          </div>
        </div>
      `;
    }
    
    function renderEnvContent(container) {
      container.innerHTML = `
        <div class="content-header">
          <h1 class="content-title">ğŸ”‘ Environment Variables</h1>
          <p class="content-desc">.env íŒŒì¼ì— ì„¤ì •í•  í™˜ê²½ë³€ìˆ˜ë“¤ì…ë‹ˆë‹¤.</p>
        </div>
        
        <div class="code-container">
          <div class="code-header">
            <div class="code-lang">
              <span>ğŸ”‘</span>
              <span>.env</span>
            </div>
            <div class="code-actions">
              <button class="code-btn" onclick="copyEnv()">ğŸ“‹ Copy</button>
            </div>
          </div>
          <div class="code-content">${escapeHtml(ENV_TEMPLATE)}</div>
        </div>
        
        <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:20px;">
          <h3 style="margin-bottom:16px;font-size:14px;">Quick Links</h3>
          <div style="display:grid;gap:12px;">
            <a href="https://supabase.com/dashboard" target="_blank" style="color:var(--cyan);text-decoration:none;">
              ğŸ—„ï¸ Supabase Dashboard â†’ Settings â†’ API
            </a>
            <a href="https://aistudio.google.com/app/apikey" target="_blank" style="color:var(--cyan);text-decoration:none;">
              ğŸ¤– Google AI Studio â†’ Get API Key
            </a>
            <a href="https://portal.azure.com" target="_blank" style="color:var(--cyan);text-decoration:none;">
              ğŸ”· Azure Portal â†’ App Registrations
            </a>
          </div>
        </div>
      `;
    }
    
    function renderLogsContent(container) {
      container.innerHTML = `
        <div class="content-header">
          <h1 class="content-title">ğŸ“œ Activity Log</h1>
          <p class="content-desc">AUTUS ì…€í”„-ë¹Œë”© í™œë™ ê¸°ë¡</p>
        </div>
        
        <div id="fullLogs" style="max-height:600px;overflow-y:auto;">
          ${STATE.logs.map(log => `
            <div class="log-item">
              <span class="log-time">${log.time}</span>
              <span class="log-type ${log.type}">${log.type}</span>
              <span class="log-message">${log.message}</span>
            </div>
          `).reverse().join('') || '<div style="color:var(--text2);text-align:center;padding:40px;">No activity yet</div>'}
        </div>
      `;
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Actions
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    function goToStep(step) {
      STATE.currentStep = step;
      renderWizardSteps();
      renderContent();
      addLog('info', `Step ${step + 1}: ${SETUP_STEPS[step].name} ì‹œì‘`);
    }
    
    function markStepComplete(step, checklistKey) {
      STATE.completedSteps.add(step);
      STATE.checklist[checklistKey] = true;
      renderWizardSteps();
      renderChecklist();
      addLog('success', `${SETUP_STEPS[step].name} ì™„ë£Œ!`);
      showToast('ì™„ë£Œ!', `${SETUP_STEPS[step].name} ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`);
      
      // Auto advance
      if (step < SETUP_STEPS.length - 1) {
        setTimeout(() => goToStep(step + 1), 500);
      }
    }
    
    function toggleChecklist(key) {
      STATE.checklist[key] = !STATE.checklist[key];
      renderChecklist();
      addLog('info', `Checklist: ${key} ${STATE.checklist[key] ? 'âœ“' : 'â—‹'}`);
    }
    
    function copySQL(type) {
      navigator.clipboard.writeText(SQL_TEMPLATES[type]);
      showToast('ë³µì‚¬ë¨!', 'SQLì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
      addLog('info', `SQL (${type}) ë³µì‚¬ë¨`);
    }
    
    function copyDocker() {
      navigator.clipboard.writeText(DOCKER_COMPOSE);
      showToast('ë³µì‚¬ë¨!', 'docker-compose.ymlì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
      addLog('info', 'docker-compose.yml ë³µì‚¬ë¨');
    }
    
    function copyEnv() {
      navigator.clipboard.writeText(ENV_TEMPLATE);
      showToast('ë³µì‚¬ë¨!', '.env í…œí”Œë¦¿ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
      addLog('info', '.env í…œí”Œë¦¿ ë³µì‚¬ë¨');
    }
    
    function copyGeminiPrompt() {
      const prompt = `You are AUTUS, an AI workflow optimizer...`;
      navigator.clipboard.writeText(prompt);
      showToast('ë³µì‚¬ë¨!', 'Gemini í”„ë¡¬í”„íŠ¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
    
    function generateSQL() { goToStep(0); }
    function generateDocker() { goToStep(2); }
    function generateEnv() { switchTab('env'); }
    
    function setCommand(cmd) {
      document.getElementById('consoleInput').value = cmd;
    }
    
    async function executeCommand() {
      const input = document.getElementById('consoleInput').value;
      if (!input.trim()) return;
      
      addLog('info', `Command: ${input}`);
      document.getElementById('aiMessage').textContent = 'ìƒì„± ì¤‘...';
      
      // Simulate AI response
      setTimeout(() => {
        const output = document.getElementById('consoleOutput');
        output.innerHTML = `
          <div class="ai-response">
            <div class="ai-header">
              <div class="ai-avatar">ğŸ§ </div>
              <div class="ai-name">AUTUS Generated</div>
            </div>
            <div class="ai-content">
              <strong>Command:</strong> ${input}<br><br>
              ì½”ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ë³µì‚¬í•˜ì„¸ìš”.
            </div>
          </div>
          <div class="code-container">
            <div class="code-header">
              <div class="code-lang">Generated Code</div>
              <div class="code-actions">
                <button class="code-btn" onclick="copyGeneratedCode()">ğŸ“‹ Copy</button>
              </div>
            </div>
            <div class="code-content" id="generatedCode"># AUTUS Auto-Generated
# Command: ${input}

# Your code will appear here
print("AUTUS generated this code!")</div>
          </div>
        `;
        
        document.getElementById('aiMessage').textContent = 'ì½”ë“œ ìƒì„± ì™„ë£Œ! ì™¼ìª½ ì½˜ì†”ì—ì„œ í™•ì¸í•˜ì„¸ìš”.';
        addLog('success', 'ì½”ë“œ ìƒì„± ì™„ë£Œ');
      }, 1000);
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // API Configuration
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    const API_BASE = 'https://api.autus-ai.com';
    
    async function apiCall(endpoint, method = 'GET', body = null) {
      try {
        const options = {
          method,
          headers: { 'Content-Type': 'application/json' }
        };
        if (body) options.body = JSON.stringify(body);
        
        const response = await fetch(`${API_BASE}${endpoint}`, options);
        return await response.json();
      } catch (error) {
        console.error('API Error:', error);
        return { error: error.message };
      }
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Auto Setup (AUTUSê°€ ìŠ¤ìŠ¤ë¡œ ì‹¤í–‰)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    async function runAutoSetup() {
      addLog('info', 'ğŸš€ AUTUS ìë™ ì„¤ì • ì‹œì‘...');
      showToast('ì‹œì‘', 'AUTUSê°€ ìŠ¤ìŠ¤ë¡œ í™˜ê²½ì„ êµ¬ì„±í•©ë‹ˆë‹¤...');
      
      document.getElementById('aiMessage').textContent = 'AUTUSê°€ ìë™ìœ¼ë¡œ í™˜ê²½ì„ êµ¬ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...';
      
      try {
        const result = await apiCall('/setup/auto', 'POST');
        
        if (result.error) {
          addLog('error', `ìë™ ì„¤ì • ì‹¤íŒ¨: ${result.error}`);
          showToast('ì‹¤íŒ¨', result.error);
          return;
        }
        
        // ê° ë‹¨ê³„ ìƒíƒœ ì—…ë°ì´íŠ¸
        result.steps.forEach((step, i) => {
          const status = step.status === 'completed' ? 'âœ…' : 
                         step.status === 'skipped' ? 'â­ï¸' : 'âŒ';
          addLog(step.status === 'completed' ? 'success' : 'info', 
                 `${status} ${step.name}: ${step.message}`);
        });
        
        // ì ìˆ˜ ì—…ë°ì´íŠ¸
        if (result.success) {
          SETUP_STEPS.forEach((_, i) => STATE.completedSteps.add(i));
          Object.keys(STATE.checklist).forEach(k => STATE.checklist[k] = true);
          renderWizardSteps();
          renderChecklist();
          
          document.getElementById('supabaseStatus').className = 'status-dot green';
          document.getElementById('aiMessage').textContent = `ğŸ‰ AUTUS ìë™ ì„¤ì • ì™„ë£Œ! ì ìˆ˜: ${result.score}/100`;
          
          showToast('ğŸ‰ ì™„ë£Œ!', `AUTUSê°€ ìŠ¤ìŠ¤ë¡œ í™˜ê²½ì„ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. ì ìˆ˜: ${result.score}/100`);
          addLog('success', `ğŸ‰ ìë™ ì„¤ì • ì™„ë£Œ! ì ìˆ˜: ${result.score}/100`);
        } else {
          showToast('ë¶€ë¶„ ì™„ë£Œ', 'ì¼ë¶€ ë‹¨ê³„ê°€ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ì™„ë£Œí•´ì£¼ì„¸ìš”.');
        }
        
        // ë‹¤ìŒ ë‹¨ê³„ í‘œì‹œ
        if (result.next_steps && result.next_steps.length > 0) {
          document.getElementById('aiMessage').textContent += '\n\në‹¤ìŒ ë‹¨ê³„:\n' + result.next_steps.map(s => `â†’ ${s}`).join('\n');
        }
        
      } catch (error) {
        addLog('error', `ìë™ ì„¤ì • ì˜¤ë¥˜: ${error.message}`);
        showToast('ì˜¤ë¥˜', error.message);
      }
    }
    
    async function testSupabase() {
      addLog('info', 'Supabase ì—°ê²° í…ŒìŠ¤íŠ¸...');
      
      try {
        const result = await apiCall('/setup/verify');
        
        if (result.success) {
          document.getElementById('supabaseStatus').className = 'status-dot green';
          addLog('success', 'Supabase ì—°ê²° ì„±ê³µ!');
          showToast('ì„±ê³µ', 'Supabase ì—°ê²°ë¨');
        } else {
          document.getElementById('supabaseStatus').className = 'status-dot red';
          addLog('error', `Supabase ì˜¤ë¥˜: ${result.message}`);
          showToast('ì‹¤íŒ¨', result.message);
        }
      } catch (error) {
        // Fallback to simulation
        document.getElementById('supabaseStatus').className = 'status-dot yellow';
        addLog('warning', 'API ì„œë²„ ë¯¸ì‹¤í–‰ - ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ');
        showToast('ì‹œë®¬ë ˆì´ì…˜', 'API ì„œë²„ë¥¼ ì‹œì‘í•˜ì„¸ìš”');
      }
    }
    
    async function testN8n() {
      addLog('info', 'n8n ì—°ê²° í…ŒìŠ¤íŠ¸...');
      
      try {
        const result = await apiCall('/setup/n8n/health');
        
        if (result.status === 'running') {
          document.getElementById('n8nStatus').className = 'status-dot green';
          addLog('success', `n8n ì‹¤í–‰ ì¤‘! (${result.url})`);
          showToast('ì„±ê³µ', 'n8n ì—°ê²°ë¨');
        } else {
          document.getElementById('n8nStatus').className = 'status-dot yellow';
          addLog('warning', `n8n ë¯¸ì‹¤í–‰: ${result.error || result.status}`);
          showToast('ê²½ê³ ', 'n8nì´ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
        }
      } catch (error) {
        document.getElementById('n8nStatus').className = 'status-dot yellow';
        addLog('warning', 'n8n ìƒíƒœ í™•ì¸ ì‹¤íŒ¨');
      }
    }
    
    async function testGemini() {
      addLog('info', 'Gemini AI í…ŒìŠ¤íŠ¸...');
      
      // GeminiëŠ” í™˜ê²½ë³€ìˆ˜ë¡œë§Œ í™•ì¸ ê°€ëŠ¥
      document.getElementById('geminiStatus').className = 'status-dot yellow';
      addLog('info', 'Gemini API í‚¤ëŠ” .envì—ì„œ í™•ì¸í•˜ì„¸ìš”');
      showToast('ì •ë³´', 'GEMINI_API_KEY í™˜ê²½ë³€ìˆ˜ ì„¤ì • í•„ìš”');
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // API-based SQL Execution
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    async function autoCreateTables() {
      addLog('info', 'ğŸ—„ï¸ í…Œì´ë¸” ìë™ ìƒì„± ì‹œì‘...');
      
      try {
        const result = await apiCall('/setup/supabase/tables', 'POST');
        
        if (result.success) {
          markStepComplete(0, 'supabase_tables');
          addLog('success', 'í…Œì´ë¸” ìƒì„± ì™„ë£Œ!');
        } else {
          addLog('error', `í…Œì´ë¸” ìƒì„± ì‹¤íŒ¨: ${result.message}`);
          showToast('ì‹¤íŒ¨', 'ìˆ˜ë™ìœ¼ë¡œ SQLì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”');
        }
      } catch (error) {
        addLog('warning', 'API ì„œë²„ ë¯¸ì‹¤í–‰ - SQLì„ ë³µì‚¬í•´ì„œ Supabaseì—ì„œ ì§ì ‘ ì‹¤í–‰í•˜ì„¸ìš”');
      }
    }
    
    async function autoApplyRLS() {
      addLog('info', 'ğŸ”’ RLS ì •ì±… ìë™ ì ìš© ì‹œì‘...');
      
      try {
        const result = await apiCall('/setup/supabase/rls', 'POST');
        
        if (result.success) {
          markStepComplete(1, 'supabase_rls');
          addLog('success', 'RLS ì •ì±… ì ìš© ì™„ë£Œ!');
        } else {
          addLog('error', `RLS ì ìš© ì‹¤íŒ¨: ${result.message}`);
        }
      } catch (error) {
        addLog('warning', 'API ì„œë²„ ë¯¸ì‹¤í–‰');
      }
    }
    
    function completeSetup() {
      SETUP_STEPS.forEach((_, i) => STATE.completedSteps.add(i));
      Object.keys(STATE.checklist).forEach(k => STATE.checklist[k] = true);
      renderWizardSteps();
      renderChecklist();
      addLog('success', 'ğŸ‰ AUTUS Setup ì™„ë£Œ!');
      showToast('ğŸ‰ ì™„ë£Œ!', 'AUTUS í™˜ê²½ ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
    
    function switchTab(tab) {
      STATE.currentTab = tab;
      document.querySelectorAll('.header-tab').forEach(t => {
        t.classList.toggle('active', t.dataset.tab === tab);
      });
      renderContent();
    }
    
    function addLog(type, message) {
      const time = new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
      STATE.logs.push({ type, message, time });
      renderLogs();
    }
    
    function showToast(title, desc) {
      const toast = document.getElementById('toast');
      document.getElementById('toastTitle').textContent = title;
      document.getElementById('toastDesc').textContent = desc;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }
    
    function escapeHtml(text) {
      return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Initialize
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    document.querySelectorAll('.header-tab').forEach(tab => {
      tab.addEventListener('click', () => switchTab(tab.dataset.tab));
    });
    
    // Initial render
    renderWizardSteps();
    renderChecklist();
    renderLogs();
    renderContent();
    
    // Set initial status
    document.getElementById('supabaseStatus').className = 'status-dot yellow';
    document.getElementById('n8nStatus').className = 'status-dot yellow';
    document.getElementById('geminiStatus').className = 'status-dot yellow';
    
    addLog('info', 'AUTUS Dev Console ì‹œì‘ë¨');
    addLog('info', 'Setup Wizardë¡œ í™˜ê²½ì„ êµ¬ì„±í•˜ì„¸ìš”');
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // Auth System
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    const AUTH_PASSWORD = 'autus2026';  // ë³€ê²½ ê°€ëŠ¥
    const AUTH_KEY = 'autus_dev_auth';
    
    function checkAuth() {
      const input = document.getElementById('authPassword').value;
      const errorEl = document.getElementById('authError');
      
      if (input === AUTH_PASSWORD) {
        sessionStorage.setItem(AUTH_KEY, 'true');
        showApp();
      } else {
        errorEl.style.display = 'block';
        document.getElementById('authPassword').value = '';
        setTimeout(() => errorEl.style.display = 'none', 2000);
      }
    }
    
    function showApp() {
      document.getElementById('authScreen').style.display = 'none';
      document.getElementById('appContent').classList.add('visible');
    }
    
    // Enter key support
    document.getElementById('authPassword').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') checkAuth();
    });
    
    // Check if already authenticated
    if (sessionStorage.getItem(AUTH_KEY) === 'true') {
      showApp();
    }
  </script>
  </div><!-- end app-content -->
</body>
</html>
