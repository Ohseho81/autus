<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1920, height=1080, initial-scale=1.0">
  <title>AUTUS â€” Tesla Nav UI</title>
  <link rel="stylesheet" href="../ui/layers.css">
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       AUTUS TESLA NAV UI â€” Golden Set Ready
       1920Ã—1080, DPR=1, sRGB
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      /* Tesla Colors */
      --bg-dark: #0a0a0a;
      --bg-panel: #1a1a1a;
      --bg-card: #252525;
      --bg-hover: #333333;
      --border: #3a3a3a;
      --text-primary: #ffffff;
      --text-secondary: #888888;
      --text-dim: #666666;
      --accent-blue: #3e8ae1;
      --accent-red: #e82127;
      --accent-green: #32cd32;
      --accent-orange: #ff8c00;
      --accent-cyan: #00d4ff;
      
      /* Layout */
      --left-panel-collapsed: 80px;
      --left-panel-rail: 80px;
      --left-panel-expanded: 320px;
      --top-bar-height: 48px;
      --bottom-bar-height: 72px;
      
      /* 7-Layer z-index (LOCKED) */
      --z-L1: 10;
      --z-L2: 20;
      --z-L3: 30;
      --z-L4: 40;
      --z-L5: 50;
      --z-L6: 60;
      --z-L7: 70;
    }
    
    html, body {
      width: 1920px;
      height: 1080px;
      overflow: hidden;
      background: var(--bg-dark);
      color: var(--text-primary);
      font-family: -apple-system, 'SF Pro Display', 'Helvetica Neue', Arial, sans-serif;
      font-size: 14px;
      -webkit-font-smoothing: antialiased;
    }
    
    .app {
      width: 1920px;
      height: 1080px;
      position: relative;
      overflow: hidden;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LAYER 1: BASE CANVAS (Map Background)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    [data-layer="L1"] {
      background: linear-gradient(135deg, #0d1117 0%, #161b22 50%, #0d1117 100%);
    }
    
    .map-container {
      position: absolute;
      top: 0;
      left: 380px;
      right: 0;
      bottom: 0;
      overflow: hidden;
    }
    
    .map-canvas {
      width: 100%;
      height: 100%;
      position: relative;
    }
    
    .map-grid {
      position: absolute;
      inset: 0;
      background-image: 
        linear-gradient(rgba(62, 138, 225, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(62, 138, 225, 0.03) 1px, transparent 1px);
      background-size: 40px 40px;
    }
    
    .map-route {
      position: absolute;
      top: 50%;
      left: 30%;
      width: 60%;
      height: 50%;
      transform: translateY(-50%);
    }
    
    .route-line {
      fill: none;
      stroke: var(--accent-cyan);
      stroke-width: 6;
      stroke-linecap: round;
      filter: drop-shadow(0 0 8px var(--accent-cyan));
    }
    
    .route-pulse {
      fill: none;
      stroke: var(--accent-cyan);
      stroke-width: 12;
      stroke-linecap: round;
      opacity: 0.3;
      animation: routePulse 2s ease-in-out infinite;
    }
    
    @keyframes routePulse {
      0%, 100% { opacity: 0.3; stroke-width: 12; }
      50% { opacity: 0.1; stroke-width: 20; }
    }
    
    .map-marker {
      position: absolute;
      transform: translate(-50%, -50%);
      cursor: pointer;
    }
    
    .map-marker.current {
      top: 60%;
      left: 45%;
    }
    
    .map-marker.destination {
      top: 25%;
      left: 75%;
    }
    
    .marker-dot {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--accent-cyan);
      box-shadow: 0 0 20px var(--accent-cyan);
      animation: markerPulse 2s ease-in-out infinite;
    }
    
    .marker-dot.destination {
      background: var(--accent-green);
      box-shadow: 0 0 20px var(--accent-green);
    }
    
    @keyframes markerPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.2); }
    }
    
    .marker-label {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      margin-top: 8px;
      padding: 4px 12px;
      background: rgba(0, 0, 0, 0.8);
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
    }
    
    .road-labels {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }
    
    .road-label {
      position: absolute;
      padding: 4px 8px;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 4px;
      font-size: 11px;
      color: var(--text-secondary);
    }
    
    .road-label.primary {
      color: var(--text-primary);
      font-weight: 500;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LAYER 2: ROUTE GEOMETRY
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    [data-layer="L2"] {
      /* Route overlays rendered in L1 for simplicity */
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LAYER 3: HUD CHROME (Top Bar)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    [data-layer="L3"] {
      pointer-events: none;
    }
    
    .top-bar {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: var(--top-bar-height);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 24px;
      background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 100%);
      pointer-events: auto;
    }
    
    .hud-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .status-icons {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .status-icon {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      opacity: 0.7;
    }
    
    .status-icon.active {
      opacity: 1;
      color: var(--accent-blue);
    }
    
    .status-icon.warning {
      color: var(--accent-orange);
      animation: iconPulse 1.5s ease-in-out infinite;
    }
    
    .status-icon.alert {
      color: var(--accent-red);
      animation: iconPulse 0.8s ease-in-out infinite;
    }
    
    @keyframes iconPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .hud-center {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .tesla-logo {
      font-size: 18px;
      color: var(--text-secondary);
    }
    
    .hud-right {
      display: flex;
      align-items: center;
      gap: 20px;
    }
    
    .weather-display {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .weather-icon {
      font-size: 18px;
    }
    
    .weather-temp {
      font-size: 16px;
      font-weight: 500;
    }
    
    .time-display {
      font-size: 16px;
      font-weight: 500;
      letter-spacing: 0.5px;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LAYER 4: PRIMARY PANEL (Left Panel)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    [data-layer="L4"] {
      width: var(--left-panel-rail);
      transition: width 0.3s ease;
    }
    
    [data-leftpanel="expanded"] [data-layer="L4"] {
      width: var(--left-panel-expanded);
    }
    
    [data-leftpanel="collapsed"] [data-layer="L4"] {
      width: 0;
      opacity: 0;
    }
    
    .left-panel {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      width: 100%;
      background: var(--bg-panel);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    
    /* Instrument Cluster */
    .instrument-cluster {
      height: 380px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-bottom: 1px solid var(--border);
    }
    
    .speedometer {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .speed-value {
      font-size: 96px;
      font-weight: 200;
      line-height: 1;
      letter-spacing: -4px;
    }
    
    .speed-unit {
      font-size: 14px;
      color: var(--text-secondary);
      margin-top: 4px;
    }
    
    .gear-indicator {
      display: flex;
      gap: 16px;
      font-size: 14px;
      color: var(--text-dim);
      margin-bottom: 16px;
    }
    
    .gear-indicator span {
      opacity: 0.4;
    }
    
    .gear-indicator span.active {
      opacity: 1;
      color: var(--text-primary);
      font-weight: 600;
    }
    
    .battery-display {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .battery-bar {
      width: 140px;
      height: 16px;
      background: var(--bg-card);
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }
    
    .battery-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-green) 0%, #7fff00 100%);
      border-radius: 4px;
      transition: width 0.5s ease;
    }
    
    .battery-fill.low {
      background: linear-gradient(90deg, var(--accent-red) 0%, var(--accent-orange) 100%);
    }
    
    .battery-fill.medium {
      background: linear-gradient(90deg, var(--accent-orange) 0%, #ffff00 100%);
    }
    
    .battery-text {
      font-size: 14px;
      font-weight: 600;
    }
    
    .battery-miles {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    /* Autopilot Icons */
    .autopilot-icons {
      display: flex;
      justify-content: center;
      gap: 32px;
      margin-top: 20px;
    }
    
    .autopilot-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      opacity: 0.4;
    }
    
    .autopilot-icon.active {
      opacity: 1;
      color: var(--accent-blue);
    }
    
    /* Vehicle Visualization */
    .vehicle-viz {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      border-bottom: 1px solid var(--border);
      position: relative;
    }
    
    .vehicle-svg {
      width: 200px;
      height: 280px;
      opacity: 0.9;
    }
    
    .vehicle-lane {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: 200px;
      perspective: 500px;
    }
    
    .lane-line {
      position: absolute;
      width: 4px;
      height: 100%;
      background: linear-gradient(to bottom, transparent, var(--accent-cyan));
      opacity: 0.6;
    }
    
    .lane-line.left {
      left: 0;
      transform: rotateY(10deg);
    }
    
    .lane-line.right {
      right: 0;
      transform: rotateY(-10deg);
    }
    
    /* Bottom Controls */
    .panel-controls {
      padding: 20px;
      display: flex;
      justify-content: center;
      gap: 16px;
    }
    
    .control-btn {
      width: 48px;
      height: 48px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .control-btn:hover {
      background: var(--bg-hover);
      transform: scale(1.05);
    }
    
    .control-btn.active {
      border-color: var(--accent-blue);
      color: var(--accent-blue);
    }
    
    /* Pagination dots */
    .pagination-dots {
      display: flex;
      justify-content: center;
      gap: 8px;
      padding: 12px;
    }
    
    .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--text-dim);
      opacity: 0.4;
    }
    
    .dot.active {
      background: var(--text-primary);
      opacity: 1;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LAYER 5: MANEUVER CARD (Nav Card + Media)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    [data-layer="L5"] {
      transition: transform 0.3s ease;
    }
    
    [data-maneuver="hidden"] [data-layer="L5"] {
      transform: translateX(100%);
    }
    
    [data-maneuver="collapsed"] [data-layer="L5"] {
      transform: translateY(calc(100% - 180px));
    }
    
    [data-maneuver="promoted"] [data-layer="L5"] {
      filter: none;
      transform: scale(1);
    }
    
    .nav-card-container {
      position: absolute;
      top: 60px;
      left: 100px;
      width: 360px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    .nav-header {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
    }
    
    .nav-header-row {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .nav-icon {
      width: 36px;
      height: 36px;
      background: var(--accent-blue);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }
    
    .nav-title {
      flex: 1;
      font-size: 16px;
      font-weight: 500;
    }
    
    .nav-arrow {
      font-size: 20px;
      color: var(--text-dim);
    }
    
    /* Turn Steps */
    .turn-steps {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }
    
    .turn-step {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      gap: 12px;
      border-bottom: 1px solid var(--border);
    }
    
    .turn-step:last-child {
      border-bottom: none;
    }
    
    .turn-icon {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      color: var(--accent-blue);
    }
    
    .turn-info {
      flex: 1;
    }
    
    .turn-distance {
      font-size: 14px;
      font-weight: 600;
    }
    
    .turn-road {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    .turn-charging {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .charging-icon {
      font-size: 16px;
      color: var(--accent-green);
    }
    
    .charging-percent {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    /* Cancel Button */
    .cancel-btn {
      padding: 12px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 8px;
      text-align: center;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .cancel-btn:hover {
      background: var(--bg-hover);
    }
    
    /* Trip Summary */
    .trip-summary {
      display: flex;
      justify-content: space-between;
      padding: 12px 16px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 8px;
    }
    
    .trip-item {
      text-align: center;
    }
    
    .trip-value {
      font-size: 18px;
      font-weight: 600;
    }
    
    .trip-label {
      font-size: 11px;
      color: var(--text-secondary);
    }
    
    /* Center Info Card */
    .center-card {
      position: absolute;
      top: 60px;
      left: 480px;
      width: 420px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
    }
    
    .center-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .card-close {
      width: 28px;
      height: 28px;
      background: var(--bg-dark);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      cursor: pointer;
    }
    
    .card-title {
      font-size: 14px;
      color: var(--text-secondary);
    }
    
    .card-action {
      font-size: 14px;
      color: var(--accent-blue);
      cursor: pointer;
    }
    
    .center-card-body {
      padding: 24px;
      text-align: center;
    }
    
    .model-name {
      font-size: 36px;
      font-weight: 300;
      font-style: italic;
      margin-bottom: 24px;
    }
    
    .model-image {
      width: 280px;
      height: 140px;
      background: linear-gradient(135deg, #333 0%, #222 100%);
      border-radius: 8px;
      margin: 0 auto 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
    }
    
    .model-stats {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    
    .stat-miles {
      font-size: 28px;
      font-weight: 300;
    }
    
    .stat-label {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    /* Media Player */
    .media-player {
      position: absolute;
      bottom: 100px;
      left: 100px;
      right: 100px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .media-artwork {
      width: 72px;
      height: 72px;
      border-radius: 8px;
      background: linear-gradient(135deg, #444 0%, #222 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
    }
    
    .media-info {
      flex: 1;
    }
    
    .media-heart {
      font-size: 18px;
      color: var(--accent-red);
      margin-bottom: 4px;
    }
    
    .media-title {
      font-size: 16px;
      font-weight: 600;
    }
    
    .media-artist {
      font-size: 14px;
      color: var(--text-secondary);
    }
    
    .media-album {
      font-size: 12px;
      color: var(--text-dim);
    }
    
    .media-progress {
      width: 200px;
      height: 4px;
      background: var(--bg-dark);
      border-radius: 2px;
      margin-top: 8px;
      overflow: hidden;
    }
    
    .media-progress-fill {
      height: 100%;
      width: 45%;
      background: var(--accent-blue);
    }
    
    .media-controls {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    
    .media-btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      opacity: 0.7;
      cursor: pointer;
      transition: opacity 0.2s;
    }
    
    .media-btn:hover {
      opacity: 1;
    }
    
    .media-btn.play {
      width: 48px;
      height: 48px;
      background: var(--text-primary);
      color: var(--bg-dark);
      border-radius: 50%;
      opacity: 1;
    }
    
    .media-actions {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .media-action {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      opacity: 0.5;
      cursor: pointer;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LAYER 6: ALERTS & INTERVENTION
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    [data-layer="L6"] {
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    [data-mode="ALERT"] [data-layer="L6"] {
      visibility: visible;
      opacity: 1;
    }
    
    .alert-overlay {
      position: absolute;
      inset: 0;
      background: rgba(232, 33, 39, 0.15);
      pointer-events: none;
    }
    
    .alert-banner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(232, 33, 39, 0.9);
      padding: 24px 48px;
      border-radius: 12px;
      text-align: center;
      pointer-events: auto;
    }
    
    .alert-icon {
      font-size: 48px;
      margin-bottom: 16px;
    }
    
    .alert-title {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 8px;
    }
    
    .alert-message {
      font-size: 16px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 16px;
    }
    
    .alert-value {
      font-size: 36px;
      font-weight: 700;
      color: #fff;
    }
    
    /* Alert border pulse */
    .alert-border {
      position: absolute;
      inset: 0;
      border: 4px solid var(--accent-red);
      pointer-events: none;
      animation: alertBorderPulse 1s ease-in-out infinite;
    }
    
    @keyframes alertBorderPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LAYER 7: MODAL / SYSTEM OVERLAY (Quick Controls)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    [data-layer="L7"] {
      visibility: hidden;
      background: rgba(0, 0, 0, 0.7);
    }
    
    [data-mode="CONTROL"] [data-layer="L7"],
    [data-mode="SETTINGS"] [data-layer="L7"] {
      visibility: visible;
    }
    
    .quick-controls {
      position: absolute;
      top: 60px;
      left: 400px;
      width: 480px;
      background: var(--bg-panel);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
    }
    
    .qc-header {
      padding: 16px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .qc-close {
      width: 28px;
      height: 28px;
      background: var(--bg-dark);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      cursor: pointer;
    }
    
    .qc-title {
      font-size: 16px;
      font-weight: 500;
    }
    
    .qc-section {
      padding: 20px;
      border-bottom: 1px solid var(--border);
    }
    
    .qc-section:last-child {
      border-bottom: none;
    }
    
    .qc-section-title {
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    /* Brightness Slider */
    .brightness-slider {
      display: flex;
      align-items: center;
      gap: 12px;
      background: var(--bg-dark);
      border-radius: 8px;
      padding: 8px 16px;
    }
    
    .brightness-value {
      padding: 6px 16px;
      background: var(--bg-card);
      border-radius: 4px;
      font-size: 14px;
    }
    
    .brightness-track {
      flex: 1;
      height: 8px;
      background: var(--bg-card);
      border-radius: 4px;
      position: relative;
    }
    
    .brightness-fill {
      width: 10%;
      height: 100%;
      background: var(--text-primary);
      border-radius: 4px;
    }
    
    .brightness-icon {
      font-size: 20px;
    }
    
    /* Light Controls */
    .light-options {
      display: flex;
      gap: 4px;
      background: var(--bg-dark);
      border-radius: 8px;
      padding: 4px;
      margin-bottom: 12px;
    }
    
    .light-option {
      flex: 1;
      padding: 10px 16px;
      text-align: center;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }
    
    .light-option.active {
      background: var(--bg-card);
    }
    
    .fog-btn {
      display: inline-block;
      padding: 10px 20px;
      background: var(--bg-card);
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
    }
    
    /* Adjustments */
    .adjustments-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .adjust-card {
      padding: 20px;
      background: var(--bg-card);
      border-radius: 12px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .adjust-card:hover {
      background: var(--bg-hover);
    }
    
    .adjust-icon {
      font-size: 28px;
      margin-bottom: 8px;
    }
    
    .adjust-label {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    .fold-btn {
      width: 100%;
      padding: 12px;
      background: var(--bg-card);
      border-radius: 8px;
      text-align: center;
      font-size: 14px;
      cursor: pointer;
      margin-top: 12px;
    }
    
    /* Right Quick Menu */
    .quick-menu {
      position: absolute;
      top: 60px;
      right: 20px;
      width: 200px;
      background: var(--bg-panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
    }
    
    .qm-header {
      padding: 16px;
      border-bottom: 1px solid var(--border);
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .qm-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    
    .qm-item:hover {
      background: var(--bg-hover);
    }
    
    .qm-icon {
      width: 24px;
      font-size: 18px;
      text-align: center;
    }
    
    .qm-label {
      font-size: 14px;
    }
    
    .qm-glovebox {
      margin: 16px;
      padding: 12px;
      background: var(--bg-card);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 14px;
      cursor: pointer;
    }
    
    /* Map Controls */
    .map-controls {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .map-control-btn {
      width: 44px;
      height: 44px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .map-control-btn:hover {
      background: var(--bg-hover);
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BOTTOM BAR
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .bottom-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: var(--bottom-bar-height);
      background: var(--bg-panel);
      border-top: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 24px;
      z-index: var(--z-L3);
    }
    
    .bottom-btn {
      width: 56px;
      height: 56px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
      cursor: pointer;
      transition: all 0.2s;
      border-radius: 8px;
    }
    
    .bottom-btn:hover {
      background: var(--bg-hover);
    }
    
    .bottom-btn.active {
      color: var(--accent-blue);
    }
    
    .bottom-icon {
      font-size: 24px;
    }
    
    .bottom-label {
      font-size: 10px;
      color: var(--text-dim);
    }
    
    .temp-display {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .temp-value {
      font-size: 24px;
      font-weight: 300;
    }
    
    .temp-arrow {
      font-size: 10px;
      color: var(--text-dim);
    }
    
    .hvac-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }
    
    .hvac-icon {
      font-size: 24px;
    }
    
    .hvac-label {
      font-size: 10px;
      color: var(--text-dim);
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       GOLDEN RENDER MODE STYLES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    [data-golden="true"] * {
      animation-duration: 0s !important;
      animation-delay: 0s !important;
      transition-duration: 0s !important;
      transition-delay: 0s !important;
    }
    
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ALERT STATE CONTROL (data-alert attribute)
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    html[data-alert="off"] [data-layer="L6"] { visibility: hidden !important; opacity: 0 !important; }
    html[data-alert="on"]  [data-layer="L6"] { visibility: visible !important; opacity: 1 !important; }
  </style>
</head>
<body>
  <div class="app" id="app" data-mode="NAV" data-leftpanel="rail" data-maneuver="active">
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LAYER 1: BASE CANVAS (Map)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div data-layer="L1">
      <div class="map-container">
        <div class="map-canvas">
          <div class="map-grid"></div>
          
          <!-- Route SVG -->
          <svg class="map-route" viewBox="0 0 600 400">
            <path class="route-pulse" d="M50,350 C100,300 150,250 200,220 C300,160 400,140 500,80 L550,50" />
            <path class="route-line" d="M50,350 C100,300 150,250 200,220 C300,160 400,140 500,80 L550,50" />
          </svg>
          
          <!-- Map Markers -->
          <div class="map-marker current">
            <div class="marker-dot"></div>
            <div class="marker-label">í˜„ì¬ ìœ„ì¹˜</div>
          </div>
          <div class="map-marker destination">
            <div class="marker-dot destination"></div>
            <div class="marker-label">ëª©ì ì§€</div>
          </div>
          
          <!-- Road Labels -->
          <div class="road-labels">
            <div class="road-label primary" style="top: 20%; right: 15%;">Auchinairn Rd</div>
            <div class="road-label" style="top: 35%; right: 10%;">M8</div>
            <div class="road-label" style="top: 50%; right: 8%;">Edinburgh</div>
            <div class="road-label" style="top: 65%; right: 12%;">Hallhill</div>
            <div class="road-label" style="top: 25%; right: 25%;">Ave End Rd</div>
          </div>
          
          <!-- Map Controls -->
          <div class="map-controls">
            <div class="map-control-btn">ğŸ“</div>
            <div class="map-control-btn">+</div>
            <div class="map-control-btn">âˆ’</div>
            <div class="map-control-btn">âš™ï¸</div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LAYER 2: ROUTE GEOMETRY
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div data-layer="L2"></div>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LAYER 3: HUD CHROME (Top Bar)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div data-layer="L3">
      <div class="top-bar">
        <div class="hud-left">
          <div class="status-icons">
            <div class="status-icon">ğŸ…¿ï¸</div>
            <div class="status-icon warning">âš ï¸</div>
            <div class="status-icon">ğŸ””</div>
            <div class="status-icon active">ğŸ“¶</div>
            <div class="status-icon">4G</div>
            <div class="status-icon alert">â—</div>
            <div class="status-icon">ğŸ“¡</div>
          </div>
        </div>
        <div class="hud-center">
          <span class="tesla-logo">âš¡</span>
        </div>
        <div class="hud-right">
          <div class="weather-display">
            <span class="weather-temp" id="hud-temp">17Â°C</span>
          </div>
          <div class="time-display" id="hud-time">10:21 AM</div>
        </div>
      </div>
    </div>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LAYER 4: PRIMARY PANEL (Left - Instrument Cluster)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div data-layer="L4">
      <div class="left-panel">
        <!-- Instrument Cluster -->
        <div class="instrument-cluster">
          <div class="speedometer">
            <div class="speed-value" id="speed-value">20</div>
            <div class="speed-unit" id="speed-unit">MPH</div>
          </div>
          <div class="gear-indicator">
            <span>P</span>
            <span>R</span>
            <span>N</span>
            <span class="active" id="gear">D</span>
          </div>
          <div class="battery-display">
            <div class="battery-bar">
              <div class="battery-fill" id="battery-fill" style="width: 83%"></div>
            </div>
            <div>
              <div class="battery-text" id="battery-miles">315 mi</div>
            </div>
          </div>
          <div class="autopilot-icons">
            <div class="autopilot-icon active">ğŸš—</div>
            <div class="autopilot-icon">30</div>
            <div class="autopilot-icon active">ğŸ¯</div>
          </div>
        </div>
        
        <!-- Vehicle Visualization -->
        <div class="vehicle-viz">
          <div class="vehicle-lane">
            <div class="lane-line left"></div>
            <div class="lane-line right"></div>
          </div>
          <svg class="vehicle-svg" viewBox="0 0 100 140">
            <!-- Simplified Tesla Model 3 top-down view -->
            <ellipse cx="50" cy="70" rx="30" ry="55" fill="#444" />
            <ellipse cx="50" cy="70" rx="25" ry="48" fill="#333" />
            <rect x="35" y="35" width="30" height="20" rx="3" fill="#222" />
            <rect x="38" y="90" width="24" height="15" rx="2" fill="#222" />
            <!-- Headlights -->
            <ellipse cx="35" cy="25" rx="8" ry="4" fill="#0af" opacity="0.8" />
            <ellipse cx="65" cy="25" rx="8" ry="4" fill="#0af" opacity="0.8" />
          </svg>
        </div>
        
        <!-- Bottom Controls -->
        <div class="panel-controls">
          <div class="control-btn">ğŸ“·</div>
          <div class="control-btn">âš¡</div>
          <div class="control-btn">ğŸ¤</div>
        </div>
        
        <div class="pagination-dots">
          <div class="dot active"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </div>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LAYER 5: MANEUVER CARD (Nav Cards + Media)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div data-layer="L5">
      <!-- Nav Card -->
      <div class="nav-card-container">
        <div class="nav-header">
          <div class="nav-header-row">
            <div class="nav-icon">â—</div>
            <div class="nav-title">Navigate</div>
            <div class="nav-arrow">â€º</div>
          </div>
        </div>
        
        <div class="turn-steps">
          <div class="turn-step">
            <div class="turn-icon">â†–ï¸</div>
            <div class="turn-info">
              <div class="turn-distance">0.5 mi</div>
              <div class="turn-road">M80 J23</div>
            </div>
          </div>
          <div class="turn-step">
            <div class="turn-icon">â†–ï¸</div>
            <div class="turn-info">
              <div class="turn-distance">22.5 mi</div>
              <div class="turn-road">Stirling</div>
            </div>
          </div>
          <div class="turn-step">
            <div class="turn-icon">â†—ï¸</div>
            <div class="turn-info">
              <div class="turn-distance">500ft</div>
              <div class="turn-road">A87</div>
            </div>
          </div>
          <div class="turn-step">
            <div class="turn-icon">ğŸ“</div>
            <div class="turn-info">
              <div class="turn-distance">500ft</div>
              <div class="turn-road">Ecotricity</div>
            </div>
            <div class="turn-charging">
              <span class="charging-icon">âš¡</span>
              <span class="charging-percent">72%</span>
            </div>
          </div>
        </div>
        
        <div class="cancel-btn">CANCEL TRIP</div>
        
        <div class="trip-summary">
          <div class="trip-item">
            <div class="trip-value" id="trip-distance">22.8 mi</div>
          </div>
          <div class="trip-item">
            <div class="trip-value" id="trip-time">37 min</div>
          </div>
        </div>
      </div>
      
      <!-- Center Info Card -->
      <div class="center-card">
        <div class="center-card-header">
          <div class="card-close">Ã—</div>
          <div class="card-title">About Your Tesla</div>
          <div class="card-action">Alpha Omega</div>
        </div>
        <div class="center-card-body">
          <div class="model-name">MODEL 3</div>
          <div class="model-image">ğŸš—</div>
          <div class="model-stats">
            <div class="stat-miles">172 mi</div>
            <div class="stat-label">VIN #5YJ3B8E38GF1496679</div>
            <div class="stat-label">v8.1 (2017.30 37ca7cf)</div>
          </div>
        </div>
      </div>
      
      <!-- Media Player -->
      <div class="media-player">
        <div class="media-artwork">ğŸµ</div>
        <div class="media-info">
          <div class="media-heart">â¤ï¸</div>
          <div class="media-title" id="media-title">Alpha Omega</div>
          <div class="media-artist" id="media-artist">Karnivool</div>
          <div class="media-album" id="media-album">Asymmetry</div>
          <div class="media-progress">
            <div class="media-progress-fill" id="media-progress" style="width: 45%"></div>
          </div>
        </div>
        <div class="media-controls">
          <div class="media-btn">â®</div>
          <div class="media-btn play">â–¶</div>
          <div class="media-btn">â­</div>
          <div class="media-btn">ğŸ”</div>
          <div class="media-btn">â¬†ï¸</div>
        </div>
      </div>
    </div>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LAYER 6: ALERTS & INTERVENTION
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div data-layer="L6">
      <div class="alert-overlay"></div>
      <div class="alert-border"></div>
      <div class="alert-banner">
        <div class="alert-icon">âš ï¸</div>
        <div class="alert-title" id="alert-title">FRICTION BOTTLENECK</div>
        <div class="alert-message" id="alert-message">System taking over for route safety adjustment</div>
        <div class="alert-value" id="alert-value">0.78</div>
      </div>
    </div>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LAYER 7: MODAL / QUICK CONTROLS
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div data-layer="L7">
      <!-- Quick Controls Panel -->
      <div class="quick-controls">
        <div class="qc-header">
          <div class="qc-close">Ã—</div>
        </div>
        
        <div class="qc-section">
          <div class="qc-section-title">â˜€ï¸ Display Brightness</div>
          <div class="brightness-slider">
            <div class="brightness-value">10%</div>
            <div class="brightness-track">
              <div class="brightness-fill"></div>
            </div>
            <div class="brightness-icon">â˜€ï¸</div>
          </div>
        </div>
        
        <div class="qc-section">
          <div class="qc-section-title">ğŸ’¡ Exterior Lights</div>
          <div class="light-options">
            <div class="light-option">OFF</div>
            <div class="light-option">PARKING</div>
            <div class="light-option">ON</div>
            <div class="light-option active">AUTO</div>
          </div>
          <div class="fog-btn">FRONT FOG</div>
        </div>
        
        <div class="qc-section">
          <div class="qc-section-title">âš™ï¸ Adjustments</div>
          <div class="adjustments-grid">
            <div class="adjust-card">
              <div class="adjust-icon">ğŸª</div>
              <div class="adjust-label">MIRRORS</div>
            </div>
            <div class="adjust-card">
              <div class="adjust-icon">ğŸ¡</div>
              <div class="adjust-label">STEERING WHEEL</div>
            </div>
          </div>
          <div class="fold-btn">FOLD MIRRORS</div>
        </div>
      </div>
      
      <!-- Right Quick Menu -->
      <div class="quick-menu">
        <div class="qm-header">âš™ï¸ Quick Controls</div>
        <div class="qm-item"><span class="qm-icon">ğŸ’¡</span><span class="qm-label">Lights</span></div>
        <div class="qm-item"><span class="qm-icon">ğŸ”’</span><span class="qm-label">Locks</span></div>
        <div class="qm-item"><span class="qm-icon">ğŸ“º</span><span class="qm-label">Display</span></div>
        <div class="qm-item"><span class="qm-icon">ğŸš—</span><span class="qm-label">Driving</span></div>
        <div class="qm-item"><span class="qm-icon">ğŸ¯</span><span class="qm-label">Autopilot</span></div>
        <div class="qm-item"><span class="qm-icon">ğŸ›¡ï¸</span><span class="qm-label">Safety & Security</span></div>
        <div class="qm-item"><span class="qm-icon">ğŸ”§</span><span class="qm-label">Service</span></div>
        <div class="qm-glovebox">ğŸ“¦ GLOVEBOX</div>
      </div>
    </div>
    
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         BOTTOM BAR
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="bottom-bar">
      <div class="bottom-btn"><span class="bottom-icon">ğŸš—</span></div>
      <div class="bottom-btn active"><span class="bottom-icon">ğŸ”’</span></div>
      <div class="bottom-btn"><span class="bottom-icon">âš¡</span></div>
      <div class="bottom-btn">
        <div class="temp-display">
          <span class="temp-arrow">^</span>
          <span class="temp-value">20Â°</span>
          <span class="temp-arrow">v</span>
        </div>
      </div>
      <div class="hvac-btn">
        <span class="hvac-icon">â„ï¸</span>
        <span class="hvac-label">MANUAL</span>
      </div>
      <div class="bottom-btn">
        <div class="temp-display">
          <span class="temp-arrow">^</span>
          <span class="temp-value">20Â°</span>
          <span class="temp-arrow">v</span>
        </div>
      </div>
      <div class="bottom-btn"><span class="bottom-icon">ğŸ’¨</span></div>
      <div class="bottom-btn"><span class="bottom-icon">ğŸµ</span></div>
      <div class="bottom-btn"><span class="bottom-icon">ğŸ“±</span></div>
      <div class="bottom-btn"><span class="bottom-icon">ğŸ”Š</span></div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       GOLDEN RENDER MODE SCRIPT
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script>
    /**
     * AUTUS LayerSet ìƒíƒœê¸°ê³„ (inline)
     */
    const LAYERSETS = {
      DRIVE:    { L1:true, L2:true, L3:true, L4:true, L5:true, L6:false, L7:false, leftPanel:"rail",     maneuver:"collapsed" },
      NAV:      { L1:true, L2:true, L3:true, L4:true, L5:true, L6:false, L7:false, leftPanel:"rail",     maneuver:"active" },
      ALERT:    { L1:true, L2:true, L3:true, L4:true, L5:true, L6:true,  L7:false, leftPanel:"rail",     maneuver:"promoted" },
      CONTROL:  { L1:true, L2:true, L3:true, L4:true, L5:true, L6:false, L7:true,  leftPanel:"expanded", maneuver:"collapsed" },
      SETTINGS: { L1:true, L2:false,L3:true, L4:false,L5:false,L6:false, L7:true,  leftPanel:"collapsed",maneuver:"hidden" }
    };

    function applyLayerSet(mode) {
      const root = document.getElementById('app');
      const s = LAYERSETS[mode];
      if (!s) return;

      root.setAttribute('data-mode', mode);
      root.setAttribute('data-leftpanel', s.leftPanel);
      root.setAttribute('data-maneuver', s.maneuver);

      ['L1','L2','L3','L4','L5','L6','L7'].forEach(layer => {
        const el = root.querySelector(`[data-layer="${layer}"]`);
        if (el) el.style.visibility = s[layer] ? 'visible' : 'hidden';
      });
    }

    /**
     * Golden Render Mode
     * - window.__AUTUS_GOLDEN__ ì½ì–´ì„œ UI ê³ ì • ë Œë”
     */
    function applyGoldenData(data) {
      const root = document.getElementById('app');
      root.setAttribute('data-golden', 'true');

      // Mode ì ìš©
      if (data.mode) {
        applyLayerSet(data.mode);
      }

      // Time
      if (data.time) {
        const timeEl = document.getElementById('hud-time');
        if (timeEl) timeEl.textContent = data.time;
      }

      // Temperature
      if (data.tempC !== undefined) {
        const tempEl = document.getElementById('hud-temp');
        if (tempEl) tempEl.textContent = data.tempC + 'Â°C';
      }

      // Speed
      if (data.speed) {
        const speedEl = document.getElementById('speed-value');
        const speedUnitEl = document.getElementById('speed-unit');
        if (speedEl) speedEl.textContent = data.speed.value;
        if (speedUnitEl) speedUnitEl.textContent = data.speed.unit;
      }

      // Gear
      if (data.gear) {
        const gearEl = document.getElementById('gear');
        if (gearEl) gearEl.textContent = data.gear;
      }

      // Battery
      if (data.batteryMiles !== undefined) {
        const milesEl = document.getElementById('battery-miles');
        const fillEl = document.getElementById('battery-fill');
        if (milesEl) milesEl.textContent = data.batteryMiles + ' mi';
        if (fillEl) fillEl.style.width = Math.min(100, data.batteryMiles / 400 * 100) + '%';
      }

      // Route
      if (data.route) {
        const distEl = document.getElementById('trip-distance');
        const timeEl = document.getElementById('trip-time');
        if (distEl) distEl.textContent = data.route.distanceMi + ' mi';
        if (timeEl) timeEl.textContent = data.route.etaMin + ' min';
      }

      // Media
      if (data.media) {
        const titleEl = document.getElementById('media-title');
        const artistEl = document.getElementById('media-artist');
        const albumEl = document.getElementById('media-album');
        const progressEl = document.getElementById('media-progress');
        if (titleEl) titleEl.textContent = data.media.title;
        if (artistEl) artistEl.textContent = data.media.artist;
        if (albumEl) albumEl.textContent = data.media.album;
        if (progressEl) progressEl.style.width = (data.media.progress * 100) + '%';
      }

      // Alert
      if (data.alert) {
        const titleEl = document.getElementById('alert-title');
        const msgEl = document.getElementById('alert-message');
        const valEl = document.getElementById('alert-value');
        if (titleEl) titleEl.textContent = data.alert.code.replace(/_/g, ' ');
        if (msgEl) msgEl.textContent = data.alert.message || 'System intervention active';
        if (valEl) valEl.textContent = data.alert.value;
      }
    }

    /**
     * ì´ˆê¸°í™”
     */
    function init() {
      // Golden ëª¨ë“œ ì²´í¬
      if (window.__AUTUS_GOLDEN__) {
        applyGoldenData(window.__AUTUS_GOLDEN__);
        return;
      }

      // ê¸°ë³¸ NAV ëª¨ë“œ
      applyLayerSet('NAV');

      // í‚¤ë³´ë“œ ëª¨ë“œ ì „í™˜ (ê°œë°œìš©)
      document.addEventListener('keydown', (e) => {
        switch(e.key) {
          case '1': applyLayerSet('NAV'); break;
          case '2': applyLayerSet('ALERT'); break;
          case '3': applyLayerSet('CONTROL'); break;
          case '4': applyLayerSet('SETTINGS'); break;
        }
      });
    }

    // Custom event listener for state injection
    window.addEventListener('autus:state-change', (e) => {
      if (e.detail) applyGoldenData(e.detail);
    });

    // DOM Ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }
  </script>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       AUTUS: Golden Render Mode + Mode Switch API
       URL íŒŒë¼ë¯¸í„° ê¸°ë°˜ ìƒíƒœ ì „í™˜: ?mode=NAV|ALERT|CONTROL
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script>
  /**
   * AUTUS: Golden Render Mode + Mode Switch
   * - ëª©í‘œ: NAV/ALERT/CONTROL ìƒíƒœë¥¼ URLë¡œ 100% ì¬í˜„
   * - ì‚¬ìš©:
   *   1) window.autusSetMode("NAV"|"ALERT"|"CONTROL")
   *   2) /tesla-nav.html?mode=NAV
   *   3) window.__AUTUS_GOLDEN__ = {...}  (Playwright addInitScriptë¡œ ì£¼ì…)
   */
  (function () {
    const root = document.documentElement;
    const app = document.getElementById('app');

    function setAttr(name, value) { 
      root.setAttribute(name, value); 
      if (app) app.setAttribute(name, value);
    }

    // Golden fixtureë¥¼ ì „ì—­ì—ì„œ ì½ì„ ìˆ˜ ìˆê²Œ í†µì¼
    function applyGoldenFixture() {
      const g = window.__AUTUS_GOLDEN__;
      if (!g) return;
      window.__AUTUS_FIXED__ = g;  // ê¸°ì¡´ ë Œë”ëŸ¬ì—ì„œ ì´ ê°’ì„ ì°¸ì¡°í•˜ë„ë¡ ì—°ê²°
    }

    // ëª¨ë“œ ì „í™˜ì€ "ë ˆì´ì–´/ìƒíƒœ"ë¡œë§Œ ì²˜ë¦¬ (display:none ê¸ˆì§€ ê¶Œì¥)
    function setMode(mode) {
      applyGoldenFixture();
      setAttr("data-mode", mode);

      if (mode === "NAV") {
        setAttr("data-leftpanel", "rail");
        setAttr("data-maneuver", "active");
        setAttr("data-alert", "off");
        // Apply LayerSet
        if (typeof applyLayerSet === 'function') applyLayerSet('NAV');
      } else if (mode === "ALERT") {
        setAttr("data-leftpanel", "rail");
        setAttr("data-maneuver", "promoted");
        setAttr("data-alert", "on");
        // Apply LayerSet
        if (typeof applyLayerSet === 'function') applyLayerSet('ALERT');
      } else if (mode === "CONTROL") {
        setAttr("data-leftpanel", "expanded");
        setAttr("data-maneuver", "collapsed");
        setAttr("data-alert", "off");
        // Apply LayerSet
        if (typeof applyLayerSet === 'function') applyLayerSet('CONTROL');
      } else if (mode === "SETTINGS") {
        setAttr("data-leftpanel", "collapsed");
        setAttr("data-maneuver", "hidden");
        setAttr("data-alert", "off");
        if (typeof applyLayerSet === 'function') applyLayerSet('SETTINGS');
      }

      console.log(`[AUTUS] Mode switched to: ${mode}`);
    }

    // ì „ì—­ API ë…¸ì¶œ
    window.autusSetMode = setMode;

    // URL íŒŒë¼ë¯¸í„° ì²˜ë¦¬
    const params = new URLSearchParams(location.search);
    const mode = params.get("mode");
    if (mode) {
      // DOMì´ ì¤€ë¹„ëœ í›„ ëª¨ë“œ ì ìš©
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => setMode(mode));
      } else {
        setMode(mode);
      }
    }
  })();
  </script>
</body>
</html>
