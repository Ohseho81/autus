/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * AUTUS ExecutorCard - ì‹¤í–‰ì(K1~K2) ì „ìš© ì¹´ë“œ
 * "ìƒê°í•˜ì§€ ì•Šê²Œ í•œë‹¤. ë‹¤ìŒ í–‰ë™ë§Œ ë³´ì—¬ì¤€ë‹¤."
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

import React, { useState } from 'react';
import { 
  BaseCard, 
  CardInfoRow, 
  CardStatusBadge, 
  CardAlert, 
  CardActions, 
  CardButton 
} from './BaseCard';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Types
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export interface NextAction {
  id: string;
  task: string;
  standard: string;
  status: 'pending' | 'in_progress' | 'completed';
  warning?: string;
  metadata?: {
    location?: string;
    deadline?: string;
    priority?: 'low' | 'normal' | 'high';
  };
}

interface ExecutorCardProps {
  action: NextAction;
  onContinue: (actionId: string) => void;
  onPause?: (actionId: string) => void;
  onComplete?: (actionId: string) => void;
  onReportIssue?: (actionId: string) => void;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NextActionCard - ë‹¤ìŒ ì‘ì—… ì¹´ë“œ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

export function NextActionCard({
  action,
  onContinue,
  onPause,
  onComplete,
  onReportIssue,
}: ExecutorCardProps) {
  const [isLoading, setIsLoading] = useState(false);

  const handleContinue = async () => {
    setIsLoading(true);
    try {
      await onContinue(action.id);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <BaseCard 
      type="action"
      title={action.task}
      priority={action.warning ? 'high' : 'normal'}
    >
      {/* ê¸°ì¤€ í‘œì‹œ */}
      <CardInfoRow 
        label="ê¸°ì¤€" 
        value={action.standard} 
        highlight 
      />

      {/* í˜„ì¬ ìƒíƒœ */}
      <div className="flex items-center justify-between">
        <span className="text-gray-400 text-sm">í˜„ì¬ ìƒíƒœ</span>
        <CardStatusBadge status={action.status} />
      </div>

      {/* ë©”íƒ€ë°ì´í„° */}
      {action.metadata?.location && (
        <CardInfoRow 
          label="ìœ„ì¹˜" 
          value={action.metadata.location} 
        />
      )}

      {/* ê²½ê³  */}
      {action.warning && (
        <CardAlert type="warning" message={action.warning} />
      )}

      {/* ì•¡ì…˜ ë²„íŠ¼ */}
      <CardActions variant="vertical">
        <CardButton 
          variant="primary" 
          onClick={handleContinue}
          loading={isLoading}
          fullWidth
        >
          {action.status === 'pending' ? 'ì‘ì—… ì‹œì‘' : 'ì¡°ì • í›„ ê³„ì†'}
        </CardButton>
        
        {onComplete && action.status === 'in_progress' && (
          <CardButton 
            variant="secondary" 
            onClick={() => onComplete(action.id)}
            fullWidth
          >
            ì‘ì—… ì™„ë£Œ
          </CardButton>
        )}
      </CardActions>
    </BaseCard>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AutoReportCard - ìë™ ë³´ê³  ì™„ë£Œ ì¹´ë“œ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

interface AutoReportCardProps {
  reportId: string;
  photoCount: number;
  workDuration: string;
  autoGenerated: boolean;
  onConfirm: () => void;
  onEdit?: () => void;
}

export function AutoReportCard({
  reportId,
  photoCount,
  workDuration,
  autoGenerated,
  onConfirm,
  onEdit,
}: AutoReportCardProps) {
  return (
    <BaseCard 
      type="success"
      title="ë³´ê³ ì„œ ìƒì„± ì™„ë£Œ"
    >
      <CardInfoRow label="ì‚¬ì§„" value={`${photoCount}ì¥`} />
      <CardInfoRow label="ì‘ì—… ì‹œê°„" value={workDuration} />
      
      {autoGenerated && (
        <CardAlert 
          type="info" 
          message="ì‘ì—… ì‹œê°„ì´ ìë™ìœ¼ë¡œ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤" 
        />
      )}

      <CardActions>
        <CardButton variant="primary" onClick={onConfirm} fullWidth>
          í™•ì¸
        </CardButton>
        {onEdit && (
          <CardButton variant="ghost" onClick={onEdit}>
            ìˆ˜ì •
          </CardButton>
        )}
      </CardActions>
    </BaseCard>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// RiskAlertCard - ìœ„í—˜ ê²½ê³  ì¹´ë“œ (ENGINE B)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

interface RiskAlertCardProps {
  riskType: 'mistake' | 'safety' | 'deadline' | 'quality';
  message: string;
  suggestion?: string;
  onAcknowledge: () => void;
  onIgnore?: () => void;
}

export function RiskAlertCard({
  riskType,
  message,
  suggestion,
  onAcknowledge,
  onIgnore,
}: RiskAlertCardProps) {
  const riskLabels = {
    mistake: 'ì‹¤ìˆ˜ ìœ„í—˜',
    safety: 'ì•ˆì „ ê²½ê³ ',
    deadline: 'ê¸°í•œ ìœ„í—˜',
    quality: 'í’ˆì§ˆ ìœ„í—˜',
  };

  return (
    <BaseCard 
      type="warning"
      title={riskLabels[riskType]}
      priority="high"
    >
      <CardAlert type="error" message={message} />
      
      {suggestion && (
        <div className="p-3 bg-blue-500/10 rounded-lg border border-blue-500/30">
          <span className="text-sm text-blue-400">ğŸ’¡ ê¶Œì¥: {suggestion}</span>
        </div>
      )}

      <CardActions>
        <CardButton variant="primary" onClick={onAcknowledge} fullWidth>
          í™•ì¸í–ˆìŠµë‹ˆë‹¤
        </CardButton>
        {onIgnore && (
          <CardButton variant="ghost" onClick={onIgnore}>
            ë¬´ì‹œ
          </CardButton>
        )}
      </CardActions>
    </BaseCard>
  );
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TaskDeletedCard - ì—…ë¬´ ì‚­ì œ ì•Œë¦¼ ì¹´ë“œ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

interface TaskDeletedCardProps {
  taskName: string;
  reason: string;
  onConfirm: () => void;
}

export function TaskDeletedCard({
  taskName,
  reason,
  onConfirm,
}: TaskDeletedCardProps) {
  return (
    <BaseCard 
      type="info"
      title="ì—…ë¬´ ì‚­ì œë¨"
    >
      <div className="text-center py-4">
        <div className="text-4xl mb-2">ğŸ‰</div>
        <p className="text-lg font-medium text-white mb-2">
          "{taskName}"
        </p>
        <p className="text-gray-400">
          ì´ê±´ ì´ì œ ì•ˆ í•´ë„ ë©ë‹ˆë‹¤
        </p>
      </div>

      <CardAlert type="success" message={reason} />

      <CardButton variant="primary" onClick={onConfirm} fullWidth>
        í™•ì¸
      </CardButton>
    </BaseCard>
  );
}

export default NextActionCard;
