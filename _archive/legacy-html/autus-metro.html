<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUTUS Metro - 1-Line Core</title>
    <style>
        :root {
            /* Core Line */
            --core-blue: #3498db;
            --core-active: #00ff88;
            
            /* States */
            --stable: #00ff88;
            --warning: #ffcc00;
            --danger: #ff3366;
            --critical: #ff0040;
            
            /* Detour */
            --detour: #ff6b35;
            
            /* Background */
            --bg-dark: #0a0a0f;
            --bg-card: rgba(20, 20, 30, 0.9);
            --text-primary: #ffffff;
            --text-dim: #666680;
            
            /* Axis Colors */
            --axis-out: #ff6b6b;
            --axis-mch: #4ecdc4;
            --axis-res: #45b7d1;
            --axis-dmd: #96ceb4;
            --axis-shk: #ff3366;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, 'SF Pro Display', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HEADER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .header {
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 2px;
        }
        
        .logo span { color: var(--core-active); }
        
        .status-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: var(--bg-card);
            border-radius: 20px;
            font-size: 13px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           METRO CONTAINER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .metro-container {
            padding: 40px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .metro-title {
            font-size: 14px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 30px;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           1-LINE CORE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .core-line {
            position: relative;
            background: var(--bg-card);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
        }
        
        /* Main Track */
        .track {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }
        
        .track-line {
            position: absolute;
            top: 50%;
            left: 60px;
            right: 60px;
            height: 4px;
            background: linear-gradient(90deg, var(--core-blue) 0%, var(--core-active) 100%);
            transform: translateY(-50%);
            border-radius: 2px;
        }
        
        .track-line::after {
            content: '';
            position: absolute;
            top: -3px;
            right: 0;
            width: 10px;
            height: 10px;
            background: var(--core-active);
            border-radius: 50%;
            box-shadow: 0 0 20px var(--core-active);
        }
        
        /* Train (Current Position) */
        .train {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
            background: var(--core-active);
            border-radius: 50%;
            box-shadow: 0 0 30px var(--core-active), 0 0 60px rgba(0,255,136,0.3);
            z-index: 10;
            transition: left 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .train::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
        }
        
        /* Stations */
        .station {
            position: relative;
            z-index: 5;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .station:hover { transform: scale(1.1); }
        
        .station-node {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-dark);
            border: 3px solid var(--core-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .station.active .station-node {
            border-color: var(--core-active);
            box-shadow: 0 0 20px var(--core-active);
        }
        
        .station.passed .station-node {
            background: var(--core-blue);
            border-color: var(--core-blue);
        }
        
        .station.warning .station-node {
            border-color: var(--warning);
            animation: warning-pulse 1s infinite;
        }
        
        .station.danger .station-node {
            border-color: var(--danger);
            animation: danger-pulse 0.5s infinite;
        }
        
        @keyframes warning-pulse {
            0%, 100% { box-shadow: 0 0 10px var(--warning); }
            50% { box-shadow: 0 0 25px var(--warning); }
        }
        
        @keyframes danger-pulse {
            0%, 100% { box-shadow: 0 0 10px var(--danger); }
            50% { box-shadow: 0 0 30px var(--danger); }
        }
        
        .station-label {
            margin-top: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-dim);
            transition: color 0.3s;
        }
        
        .station.active .station-label { color: var(--core-active); }
        .station.passed .station-label { color: var(--core-blue); }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DETOUR LINE (Conditional)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .detour-section {
            position: relative;
            margin-top: 30px;
            padding: 30px;
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 16px;
            opacity: 0.3;
            transition: all 0.5s;
        }
        
        .detour-section.active {
            opacity: 1;
            border-color: var(--detour);
            box-shadow: 0 0 30px rgba(255, 107, 53, 0.1);
        }
        
        .detour-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .detour-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--detour);
        }
        
        .detour-title {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--detour);
        }
        
        .detour-trigger {
            margin-left: auto;
            font-size: 11px;
            color: var(--text-dim);
            padding: 4px 12px;
            border: 1px solid var(--text-dim);
            border-radius: 12px;
        }
        
        .detour-section.active .detour-trigger {
            color: var(--detour);
            border-color: var(--detour);
        }
        
        /* Detour Steps */
        .detour-track {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 10px 0;
        }
        
        .detour-step {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .detour-node {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: var(--bg-dark);
            border: 2px solid var(--text-dim);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .detour-section.active .detour-node {
            border-color: var(--detour);
        }
        
        .detour-step.active .detour-node {
            background: var(--detour);
            border-color: var(--detour);
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.5);
        }
        
        .detour-step-label {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            text-align: center;
        }
        
        .detour-connector {
            width: 40px;
            height: 2px;
            background: var(--text-dim);
            transition: background 0.3s;
        }
        
        .detour-section.active .detour-connector {
            background: var(--detour);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AXIS SELECTOR
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .axis-panel {
            margin-top: 20px;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 12px;
            display: none;
        }
        
        .detour-section.active .axis-panel { display: block; }
        
        .axis-title {
            font-size: 11px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        
        .axis-grid {
            display: flex;
            gap: 10px;
        }
        
        .axis-btn {
            flex: 1;
            padding: 15px 10px;
            background: transparent;
            border: 1px solid var(--text-dim);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .axis-btn:hover { transform: translateY(-2px); }
        
        .axis-btn.selected {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        
        .axis-btn[data-axis="OUT"] { --axis-color: var(--axis-out); }
        .axis-btn[data-axis="MCH"] { --axis-color: var(--axis-mch); }
        .axis-btn[data-axis="RES"] { --axis-color: var(--axis-res); }
        .axis-btn[data-axis="DMD"] { --axis-color: var(--axis-dmd); }
        .axis-btn[data-axis="SHK"] { --axis-color: var(--axis-shk); }
        
        .axis-btn.selected {
            border-color: var(--axis-color);
            background: rgba(255,255,255,0.05);
        }
        
        .axis-code {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 2px;
            margin-bottom: 5px;
            color: var(--text-dim);
            transition: color 0.3s;
        }
        
        .axis-btn.selected .axis-code { color: var(--axis-color); }
        
        .axis-name {
            font-size: 10px;
            color: var(--text-dim);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STATE PANEL
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .state-panel {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        
        .state-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 25px;
        }
        
        .state-label {
            font-size: 11px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        
        .state-value {
            font-size: 36px;
            font-weight: 300;
        }
        
        .state-unit {
            font-size: 14px;
            color: var(--text-dim);
            margin-left: 5px;
        }
        
        .state-bar {
            margin-top: 15px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .state-bar-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.8s ease;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PACK SELECTOR
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .pack-selector {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            padding: 10px;
            background: var(--bg-card);
            border-radius: 30px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .pack-btn {
            padding: 12px 24px;
            border: none;
            background: transparent;
            color: var(--text-dim);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            border-radius: 20px;
            transition: all 0.3s;
        }
        
        .pack-btn:hover { color: var(--text-primary); }
        
        .pack-btn.active {
            background: var(--core-active);
            color: var(--bg-dark);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ACTION PANEL
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .action-panel {
            margin-top: 30px;
            display: flex;
            gap: 15px;
        }
        
        .action-btn {
            flex: 1;
            padding: 20px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .action-btn.primary {
            background: var(--core-active);
            color: var(--bg-dark);
        }
        
        .action-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,255,136,0.3);
        }
        
        .action-btn.secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .action-btn.danger {
            background: rgba(255,51,102,0.1);
            color: var(--danger);
            border: 1px solid var(--danger);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        @media (max-width: 768px) {
            .metro-container { padding: 20px; }
            .core-line { padding: 30px 20px; }
            .track { flex-wrap: wrap; gap: 20px; justify-content: center; }
            .track-line { display: none; }
            .train { display: none; }
            .state-panel { grid-template-columns: 1fr; }
            .axis-grid { flex-wrap: wrap; }
            .axis-btn { min-width: calc(50% - 5px); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">AUT<span>US</span></div>
        <div class="status-badge">
            <div class="status-dot" style="background: var(--stable)"></div>
            <span id="system-status">OPERATIONAL</span>
        </div>
    </header>

    <!-- Metro Container -->
    <main class="metro-container">
        <div class="metro-title">1-Line Core System</div>
        
        <!-- Core Line -->
        <section class="core-line">
            <div class="track">
                <div class="track-line"></div>
                <div class="train" id="train"></div>
                
                <!-- 8 Stations -->
                <div class="station passed" data-station="0">
                    <div class="station-node">ğŸ“¡</div>
                    <div class="station-label">Reality</div>
                </div>
                
                <div class="station passed" data-station="1">
                    <div class="station-node">âš¡</div>
                    <div class="station-label">State</div>
                </div>
                
                <div class="station active" data-station="2">
                    <div class="station-node">ğŸ¯</div>
                    <div class="station-label">Threshold</div>
                </div>
                
                <div class="station" data-station="3">
                    <div class="station-node">ğŸ“Š</div>
                    <div class="station-label">Forecast</div>
                </div>
                
                <div class="station" data-station="4">
                    <div class="station-node">ğŸ§ </div>
                    <div class="station-label">Decision</div>
                </div>
                
                <div class="station" data-station="5">
                    <div class="station-node">ğŸš€</div>
                    <div class="station-label">Action</div>
                </div>
                
                <div class="station" data-station="6">
                    <div class="station-node">ğŸ“</div>
                    <div class="station-label">Log</div>
                </div>
                
                <div class="station" data-station="7">
                    <div class="station-node">ğŸ”„</div>
                    <div class="station-label">Loop</div>
                </div>
            </div>
        </section>
        
        <!-- Detour Section -->
        <section class="detour-section" id="detour">
            <div class="detour-header">
                <div class="detour-indicator"></div>
                <div class="detour-title">Conditional Detour</div>
                <div class="detour-trigger">THRESHOLD FAIL ONLY</div>
            </div>
            
            <div class="detour-track">
                <div class="detour-step" data-step="0">
                    <div class="detour-node">ğŸ”</div>
                    <div class="detour-step-label">Bottleneck<br>ê°ì§€</div>
                </div>
                <div class="detour-connector"></div>
                <div class="detour-step" data-step="1">
                    <div class="detour-node">âš™ï¸</div>
                    <div class="detour-step-label">Root Cause<br>Axis ì„ íƒ</div>
                </div>
                <div class="detour-connector"></div>
                <div class="detour-step" data-step="2">
                    <div class="detour-node">ğŸ“‹</div>
                    <div class="detour-step-label">Evidence<br>Drilldown</div>
                </div>
                <div class="detour-connector"></div>
                <div class="detour-step" data-step="3">
                    <div class="detour-node">ğŸ› ï¸</div>
                    <div class="detour-step-label">Fix / Divert<br>/ Pause</div>
                </div>
                <div class="detour-connector"></div>
                <div class="detour-step" data-step="4">
                    <div class="detour-node">â†©ï¸</div>
                    <div class="detour-step-label">State<br>ë³µê·€</div>
                </div>
            </div>
            
            <!-- Axis Selector -->
            <div class="axis-panel">
                <div class="axis-title">Select Root Cause Axis (1ê°œë§Œ)</div>
                <div class="axis-grid">
                    <button class="axis-btn" data-axis="OUT">
                        <div class="axis-code">OUT</div>
                        <div class="axis-name">ìœ ì¶œ</div>
                    </button>
                    <button class="axis-btn" data-axis="MCH">
                        <div class="axis-code">MCH</div>
                        <div class="axis-name">ê¸°ê³„</div>
                    </button>
                    <button class="axis-btn" data-axis="RES">
                        <div class="axis-code">RES</div>
                        <div class="axis-name">ìì›</div>
                    </button>
                    <button class="axis-btn" data-axis="DMD">
                        <div class="axis-code">DMD</div>
                        <div class="axis-name">ìˆ˜ìš”</div>
                    </button>
                    <button class="axis-btn" data-axis="SHK">
                        <div class="axis-code">SHK</div>
                        <div class="axis-name">ì¶©ê²©</div>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- State Panel -->
        <section class="state-panel">
            <div class="state-card">
                <div class="state-label">Energy</div>
                <div class="state-value" id="energy-value">87<span class="state-unit">%</span></div>
                <div class="state-bar">
                    <div class="state-bar-fill" id="energy-bar" style="width: 87%; background: var(--stable);"></div>
                </div>
            </div>
            
            <div class="state-card">
                <div class="state-label">Flow</div>
                <div class="state-value" id="flow-value">+2.4<span class="state-unit">ì–µ/ì›”</span></div>
                <div class="state-bar">
                    <div class="state-bar-fill" id="flow-bar" style="width: 70%; background: var(--core-active);"></div>
                </div>
            </div>
            
            <div class="state-card">
                <div class="state-label">Risk</div>
                <div class="state-value" id="risk-value">0.23<span class="state-unit"></span></div>
                <div class="state-bar">
                    <div class="state-bar-fill" id="risk-bar" style="width: 23%; background: var(--warning);"></div>
                </div>
            </div>
        </section>
        
        <!-- Action Panel -->
        <section class="action-panel">
            <button class="action-btn primary" onclick="proceedNext()">
                â–¶ PROCEED
            </button>
            <button class="action-btn secondary" onclick="toggleDetour()">
                âš¡ THRESHOLD TEST
            </button>
            <button class="action-btn danger" onclick="triggerDetour()">
                âš ï¸ DETOUR
            </button>
        </section>
    </main>
    
    <!-- Pack Selector -->
    <nav class="pack-selector">
        <button class="pack-btn active" data-pack="overseas">ğŸŒ í•´ì™¸ì¸ë ¥</button>
        <button class="pack-btn" data-pack="tax">ğŸ’° ì ˆì„¸</button>
        <button class="pack-btn" data-pack="b2b">ğŸ¤ B2B</button>
    </nav>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // AUTUS METRO ENGINE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const STATIONS = ['Reality', 'State', 'Threshold', 'Forecast', 'Decision', 'Action', 'Log', 'Loop'];
        const AXIS = ['OUT', 'MCH', 'RES', 'DMD', 'SHK'];
        
        let currentStation = 2;
        let detourActive = false;
        let currentDetourStep = -1;
        let selectedAxis = null;
        
        // Pack Data
        const packData = {
            overseas: { energy: 87, flow: 2.4, risk: 0.23, state: 'STABLE' },
            tax: { energy: 92, flow: 13.4, risk: 0.15, state: 'STABLE' },
            b2b: { energy: 65, flow: -16.4, risk: 0.45, state: 'WARNING' }
        };
        
        let currentPack = 'overseas';
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CORE FUNCTIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function updateTrainPosition() {
            const train = document.getElementById('train');
            const stations = document.querySelectorAll('.station');
            const trackWidth = document.querySelector('.track').offsetWidth - 120;
            const step = trackWidth / (STATIONS.length - 1);
            
            train.style.left = `${60 + currentStation * step}px`;
        }
        
        function updateStations() {
            document.querySelectorAll('.station').forEach((station, index) => {
                station.classList.remove('passed', 'active', 'warning', 'danger');
                
                if (index < currentStation) {
                    station.classList.add('passed');
                } else if (index === currentStation) {
                    station.classList.add('active');
                    
                    // Thresholdì—ì„œ detour í™œì„±í™” ìƒíƒœë©´ warning
                    if (index === 2 && detourActive) {
                        station.classList.add('warning');
                    }
                }
            });
        }
        
        function proceedNext() {
            if (detourActive) {
                // Detour ì™„ë£Œ í›„ ë³µê·€
                if (currentDetourStep >= 4) {
                    exitDetour();
                    return;
                }
            }
            
            if (currentStation < STATIONS.length - 1) {
                currentStation++;
                
                // Loopì—ì„œ ë‹¤ì‹œ Stateë¡œ
                if (currentStation === STATIONS.length - 1) {
                    setTimeout(() => {
                        currentStation = 1;
                        updateTrainPosition();
                        updateStations();
                    }, 1000);
                }
            }
            
            updateTrainPosition();
            updateStations();
            logAction(`Station: ${STATIONS[currentStation]}`);
        }
        
        function toggleDetour() {
            // Thresholdì—ì„œë§Œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
            if (currentStation !== 2) {
                showToast('Threshold ë‹¨ê³„ì—ì„œë§Œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥', 'warning');
                return;
            }
            
            // ì„ì˜ë¡œ threshold fail/pass
            const passed = Math.random() > 0.5;
            
            if (passed) {
                showToast('âœ… Threshold PASS â†’ ì •ìƒ ì§„í–‰', 'success');
                proceedNext();
            } else {
                showToast('âŒ Threshold FAIL â†’ Detour ì§„ì…', 'danger');
                triggerDetour();
            }
        }
        
        function triggerDetour() {
            detourActive = true;
            currentDetourStep = 0;
            
            document.getElementById('detour').classList.add('active');
            document.querySelector('.station.active').classList.add('warning');
            
            updateDetourSteps();
            logAction('Detour Activated');
        }
        
        function exitDetour() {
            detourActive = false;
            currentDetourStep = -1;
            selectedAxis = null;
            
            document.getElementById('detour').classList.remove('active');
            document.querySelectorAll('.detour-step').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.axis-btn').forEach(b => b.classList.remove('selected'));
            
            // Threshold â†’ Forecastë¡œ ë³µê·€
            currentStation = 3;
            updateTrainPosition();
            updateStations();
            
            showToast('â†©ï¸ State ë³µê·€ ì™„ë£Œ', 'success');
            logAction('Detour Exit â†’ Forecast');
        }
        
        function updateDetourSteps() {
            document.querySelectorAll('.detour-step').forEach((step, index) => {
                step.classList.toggle('active', index <= currentDetourStep);
            });
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // AXIS SELECTION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        document.querySelectorAll('.axis-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (!detourActive || currentDetourStep !== 1) return;
                
                // ë‹¨ì¼ ì„ íƒë§Œ
                document.querySelectorAll('.axis-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                selectedAxis = btn.dataset.axis;
                
                showToast(`ğŸ¯ Root Cause: ${selectedAxis}`, 'info');
                logAction(`Axis Selected: ${selectedAxis}`);
                
                // ìë™ ì§„í–‰
                setTimeout(() => {
                    currentDetourStep = 2;
                    updateDetourSteps();
                }, 500);
            });
        });
        
        // Detour step click
        document.querySelectorAll('.detour-step').forEach((step, index) => {
            step.addEventListener('click', () => {
                if (!detourActive) return;
                if (index > currentDetourStep + 1) return;
                
                currentDetourStep = index;
                updateDetourSteps();
                
                if (index === 4) {
                    setTimeout(exitDetour, 800);
                }
            });
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // PACK SWITCHING
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        document.querySelectorAll('.pack-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.pack-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                currentPack = btn.dataset.pack;
                updatePackData();
            });
        });
        
        function updatePackData() {
            const data = packData[currentPack];
            
            // Energy
            document.getElementById('energy-value').innerHTML = 
                `${data.energy}<span class="state-unit">%</span>`;
            document.getElementById('energy-bar').style.width = `${data.energy}%`;
            document.getElementById('energy-bar').style.background = 
                data.energy > 70 ? 'var(--stable)' : data.energy > 40 ? 'var(--warning)' : 'var(--danger)';
            
            // Flow
            const flowSign = data.flow >= 0 ? '+' : '';
            document.getElementById('flow-value').innerHTML = 
                `${flowSign}${data.flow}<span class="state-unit">ì–µ/ì›”</span>`;
            document.getElementById('flow-bar').style.width = `${Math.min(Math.abs(data.flow) * 5, 100)}%`;
            document.getElementById('flow-bar').style.background = 
                data.flow >= 0 ? 'var(--core-active)' : 'var(--danger)';
            
            // Risk
            document.getElementById('risk-value').innerHTML = 
                `${data.risk.toFixed(2)}<span class="state-unit"></span>`;
            document.getElementById('risk-bar').style.width = `${data.risk * 100}%`;
            document.getElementById('risk-bar').style.background = 
                data.risk < 0.3 ? 'var(--stable)' : data.risk < 0.6 ? 'var(--warning)' : 'var(--danger)';
            
            // Status badge
            const statusDot = document.querySelector('.status-dot');
            const statusText = document.getElementById('system-status');
            statusText.textContent = data.state;
            statusDot.style.background = 
                data.state === 'STABLE' ? 'var(--stable)' : 
                data.state === 'WARNING' ? 'var(--warning)' : 'var(--danger)';
            
            logAction(`Pack: ${currentPack.toUpperCase()}`);
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // UTILITIES
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                padding: 15px 25px;
                background: var(--bg-card);
                border: 1px solid ${
                    type === 'success' ? 'var(--stable)' : 
                    type === 'warning' ? 'var(--warning)' : 
                    type === 'danger' ? 'var(--danger)' : 'var(--core-blue)'
                };
                border-radius: 12px;
                font-size: 14px;
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => toast.remove(), 300);
            }, 2000);
        }
        
        function logAction(action) {
            const time = new Date().toLocaleTimeString('ko-KR');
            console.log(`[${time}] AUTUS: ${action}`);
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INIT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        window.addEventListener('load', () => {
            updateTrainPosition();
            updateStations();
            updatePackData();
        });
        
        window.addEventListener('resize', updateTrainPosition);
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') proceedNext();
            if (e.key === 'ArrowLeft' && currentStation > 0) {
                currentStation--;
                updateTrainPosition();
                updateStations();
            }
            if (e.key === 'd') triggerDetour();
            if (e.key === 't') toggleDetour();
        });
        
        // CSS Animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
