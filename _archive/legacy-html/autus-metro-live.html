<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AUTUS Metro Live</title>
    <style>
        :root {
            --core-blue: #3498db;
            --core-active: #00ff88;
            --stable: #00ff88;
            --warning: #ffcc00;
            --danger: #ff3366;
            --detour: #ff6b35;
            --bg-dark: #0a0a0f;
            --bg-card: rgba(20, 20, 30, 0.95);
            --text-primary: #ffffff;
            --text-secondary: #b0b0c0;
            --text-dim: #666680;
            --bead-active: #00ff88;
            --bead-locked: #444466;
            --bead-unlock: #3498db;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, 'SF Pro Display', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            display: grid;
            grid-template-columns: 1fr 380px;
            grid-template-rows: auto 1fr;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HEADER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .header {
            grid-column: 1 / -1;
            padding: 12px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            background: var(--bg-card);
        }
        
        .logo {
            font-size: 20px;
            font-weight: 700;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo span { color: var(--core-active); }
        
        .live-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: var(--core-active);
        }
        
        .live-dot {
            width: 6px;
            height: 6px;
            background: var(--core-active);
            border-radius: 50%;
            animation: livePulse 1s infinite;
        }
        
        @keyframes livePulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }
        
        /* Acceleration Display */
        .accel-display {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 8px 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 25px;
        }
        
        .accel-label {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .accel-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--core-active);
        }
        
        .accel-bar {
            width: 100px;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .accel-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--core-blue), var(--core-active));
            transition: width 0.5s;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .pack-tabs {
            display: flex;
            gap: 3px;
        }
        
        .pack-tab {
            padding: 6px 14px;
            background: transparent;
            border: 1px solid var(--text-dim);
            color: var(--text-dim);
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pack-tab:first-child { border-radius: 15px 0 0 15px; }
        .pack-tab:last-child { border-radius: 0 15px 15px 0; }
        
        .pack-tab.active {
            background: var(--core-active);
            border-color: var(--core-active);
            color: var(--bg-dark);
        }
        
        .status-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
        }
        
        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BEAD SYSTEM
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .autus-beads {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .bead {
            flex: 1;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.15);
            background: rgba(255,255,255,0.03);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .bead::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--bead-locked);
            transition: background 0.3s;
        }
        
        .bead.locked {
            opacity: 0.5;
        }
        
        .bead.active {
            border-color: var(--bead-active);
            background: rgba(0,255,136,0.05);
        }
        
        .bead.active::before {
            background: var(--bead-active);
        }
        
        .bead.unlocked {
            border-color: var(--bead-unlock);
            background: rgba(52,152,219,0.05);
        }
        
        .bead.unlocked::before {
            background: var(--bead-unlock);
        }
        
        .bead-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .bead-num {
            font-size: 9px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .bead-state {
            font-size: 9px;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        .bead.locked .bead-state {
            background: rgba(255,255,255,0.1);
            color: var(--text-dim);
        }
        
        .bead.active .bead-state {
            background: rgba(0,255,136,0.2);
            color: var(--bead-active);
        }
        
        .bead.unlocked .bead-state {
            background: rgba(52,152,219,0.2);
            color: var(--bead-unlock);
        }
        
        .bead-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .bead-name {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .bead-desc {
            font-size: 10px;
            color: var(--text-dim);
            line-height: 1.4;
        }
        
        .bead-cond {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255,255,255,0.05);
            font-size: 9px;
            color: var(--text-dim);
        }
        
        .bead-cond strong {
            color: var(--warning);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MAIN AREA
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .main-area {
            padding: 25px;
            overflow-y: auto;
        }
        
        /* GOAL Section */
        .goal-section {
            background: linear-gradient(135deg, rgba(0,255,136,0.08) 0%, rgba(52,152,219,0.08) 100%);
            border: 1px solid rgba(0,255,136,0.25);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .goal-label {
            font-size: 10px;
            color: var(--core-active);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 10px;
        }
        
        .goal-text {
            font-size: 16px;
            font-weight: 500;
            line-height: 1.5;
            margin-bottom: 12px;
        }
        
        .goal-text em {
            color: var(--core-active);
            font-style: normal;
            font-weight: 600;
        }
        
        .progress-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 14px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            font-size: 11px;
        }
        
        .progress-badge strong {
            color: var(--core-active);
        }
        
        /* Metro Track + Bead2 Toggle */
        .metro-section {
            position: relative;
            margin-bottom: 20px;
        }
        
        .metro-track {
            background: var(--bg-card);
            border-radius: 14px;
            padding: 20px;
        }
        
        .track-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .track-title {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        /* Bead2 Toggle (ë£¨í”„ ì˜†) */
        .bead2-toggle {
            position: absolute;
            right: -50px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 2px solid var(--bead-locked);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            opacity: 0.5;
        }
        
        .bead2-toggle.unlocked {
            border-color: var(--bead-unlock);
            opacity: 1;
            box-shadow: 0 0 15px rgba(52,152,219,0.3);
        }
        
        .bead2-toggle:hover {
            transform: translateY(-50%) scale(1.1);
        }
        
        /* Stations */
        .stations {
            display: flex;
            align-items: flex-start;
            position: relative;
            padding: 0 5px;
            margin-bottom: 12px;
        }
        
        .track-line {
            position: absolute;
            top: 18px;
            left: 25px;
            right: 25px;
            height: 3px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
        }
        
        .track-line-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--core-blue), var(--core-active));
            border-radius: 2px;
            transition: width 0.5s;
        }
        
        .station {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .station:hover { transform: translateY(-2px); }
        
        .station-node {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-dark);
            border: 3px solid rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .station.passed .station-node {
            background: var(--core-blue);
            border-color: var(--core-blue);
        }
        
        .station.active .station-node {
            border-color: var(--core-active);
            box-shadow: 0 0 15px var(--core-active);
        }
        
        .station.warning .station-node {
            border-color: var(--warning);
            box-shadow: 0 0 15px var(--warning);
        }
        
        .station-label {
            margin-top: 6px;
            font-size: 9px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }
        
        .station.active .station-label { color: var(--core-active); }
        .station.passed .station-label { color: var(--core-blue); }
        
        .loop-notice {
            text-align: center;
            font-size: 9px;
            color: var(--text-dim);
            padding: 10px;
            background: rgba(255, 107, 53, 0.05);
            border: 1px dashed rgba(255, 107, 53, 0.2);
            border-radius: 8px;
        }
        
        .loop-notice strong { color: var(--detour); }
        
        /* Proof Panel (Bead2) */
        .proof-panel {
            background: rgba(52, 152, 219, 0.08);
            border: 1px solid rgba(52, 152, 219, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }
        
        .proof-panel.show { display: block; }
        
        .proof-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .proof-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--bead-unlock);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .proof-desc {
            font-size: 10px;
            color: var(--text-dim);
            margin-bottom: 12px;
            line-height: 1.5;
        }
        
        .proof-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .proof-btn {
            flex: 1;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .proof-btn:hover {
            border-color: var(--bead-unlock);
            background: rgba(52,152,219,0.1);
        }
        
        .proof-btn-icon {
            font-size: 18px;
            margin-bottom: 4px;
        }
        
        .proof-status {
            font-size: 10px;
            color: var(--text-dim);
            text-align: center;
            padding: 8px;
            background: rgba(0,0,0,0.2);
            border-radius: 6px;
        }
        
        .proof-status.has-proof {
            color: var(--stable);
            background: rgba(0,255,136,0.1);
        }
        
        /* Detour Box */
        .detour-box {
            background: rgba(255, 107, 53, 0.05);
            border: 1px dashed rgba(255, 107, 53, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            opacity: 0.4;
            transition: all 0.5s;
        }
        
        .detour-box.active {
            opacity: 1;
            border-style: solid;
            border-color: var(--detour);
        }
        
        .detour-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .detour-icon {
            width: 20px;
            height: 20px;
            background: var(--detour);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }
        
        .detour-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--detour);
        }
        
        .detour-steps {
            display: flex;
            gap: 6px;
        }
        
        .detour-step {
            flex: 1;
            padding: 10px 6px;
            background: rgba(0,0,0,0.2);
            border-radius: 6px;
            text-align: center;
            font-size: 9px;
            color: var(--text-dim);
            border: 1px solid transparent;
            transition: all 0.3s;
        }
        
        .detour-step.active {
            border-color: var(--detour);
            color: var(--detour);
        }
        
        .detour-step-icon {
            font-size: 14px;
            margin-bottom: 3px;
        }
        
        .axis-selector {
            display: none;
            gap: 6px;
            margin-top: 12px;
        }
        
        .detour-box.active .axis-selector { display: flex; }
        
        .axis-btn {
            flex: 1;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--text-dim);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .axis-btn:hover { transform: translateY(-2px); }
        
        .axis-btn.selected {
            border-color: var(--warning);
            background: rgba(255,204,0,0.1);
        }
        
        .axis-code {
            font-size: 11px;
            font-weight: 700;
        }
        
        .axis-name {
            font-size: 8px;
            color: var(--text-dim);
            margin-top: 2px;
        }
        
        /* State Grid */
        .state-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .state-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .state-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--card-color, var(--text-dim));
        }
        
        .state-label {
            font-size: 9px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .state-value {
            font-size: 24px;
            font-weight: 300;
        }
        
        .state-unit {
            font-size: 11px;
            color: var(--text-dim);
        }
        
        .state-trend {
            font-size: 10px;
            margin-top: 6px;
        }
        
        .state-trend.up { color: var(--stable); }
        .state-trend.down { color: var(--danger); }
        
        /* NOW/NEXT Cards */
        .nav-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .nav-card {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 15px;
            border-left: 3px solid;
        }
        
        .nav-card.now { border-left-color: var(--core-active); }
        .nav-card.next { border-left-color: var(--core-blue); }
        
        .nav-card-label {
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .nav-card.now .nav-card-label { color: var(--core-active); }
        .nav-card.next .nav-card-label { color: var(--core-blue); }
        
        .nav-card-text {
            font-size: 13px;
            line-height: 1.4;
        }
        
        /* Bead3 Banner */
        .bead3-banner {
            background: rgba(0, 255, 136, 0.08);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            padding: 12px 15px;
            margin-bottom: 15px;
            display: none;
        }
        
        .bead3-banner.show { display: block; }
        
        .bead3-banner-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--core-active);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .bead3-banner-desc {
            font-size: 10px;
            color: var(--text-secondary);
        }
        
        /* Action Section */
        .action-section {
            margin-bottom: 20px;
        }
        
        .action-header {
            font-size: 9px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .action-bar {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            flex: 1;
            padding: 0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            background: var(--bg-card);
            overflow: hidden;
            text-align: left;
        }
        
        .action-btn:hover { transform: translateY(-2px); }
        
        .action-btn-main {
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .action-btn.primary .action-btn-main {
            background: var(--core-active);
            color: var(--bg-dark);
        }
        
        .action-btn.primary:hover {
            box-shadow: 0 5px 20px rgba(0,255,136,0.3);
        }
        
        .action-btn.secondary {
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .action-btn.danger {
            border: 1px solid rgba(255, 107, 53, 0.3);
        }
        
        .action-btn.danger .action-btn-main {
            color: var(--detour);
        }
        
        .action-btn-sub {
            padding: 8px 12px;
            font-size: 9px;
            color: var(--text-dim);
            line-height: 1.3;
            background: rgba(0,0,0,0.2);
        }
        
        .action-btn.primary .action-btn-sub {
            background: rgba(0,0,0,0.15);
            color: rgba(0,0,0,0.7);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SIDEBAR
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .sidebar {
            background: var(--bg-card);
            border-left: 1px solid rgba(255,255,255,0.05);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .sidebar-section {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .sidebar-title {
            font-size: 10px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 12px;
        }
        
        .layer-notice {
            padding: 12px 15px;
            background: rgba(52, 152, 219, 0.08);
            border-bottom: 1px solid rgba(52, 152, 219, 0.2);
            font-size: 9px;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        .layer-notice strong {
            color: var(--core-active);
            display: block;
            margin-bottom: 4px;
        }
        
        .pack-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
        }
        
        .pack-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .pack-meta h3 {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .pack-meta p {
            font-size: 10px;
            color: var(--text-dim);
        }
        
        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.03);
        }
        
        .metric-row:last-child { border: none; }
        
        .metric-label {
            font-size: 11px;
            color: var(--text-dim);
        }
        
        .metric-value {
            font-size: 12px;
            font-weight: 600;
        }
        
        /* Unlock Log */
        .unlock-log {
            background: rgba(0,255,136,0.05);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
        }
        
        .unlock-log-title {
            font-size: 9px;
            color: var(--core-active);
            margin-bottom: 6px;
        }
        
        .unlock-log-item {
            font-size: 10px;
            color: var(--text-secondary);
            padding: 4px 0;
            border-bottom: 1px solid rgba(255,255,255,0.03);
        }
        
        .unlock-log-item:last-child { border: none; }
        
        .log-list {
            flex: 1;
            overflow-y: auto;
            padding: 0 15px 15px;
        }
        
        .log-item {
            display: flex;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.03);
        }
        
        .log-time {
            font-size: 9px;
            color: var(--text-dim);
            min-width: 45px;
        }
        
        .log-content { flex: 1; }
        
        .log-action {
            font-size: 11px;
            margin-bottom: 2px;
        }
        
        .log-badge {
            font-size: 8px;
            padding: 2px 6px;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
        }
        
        .log-badge.pass { background: rgba(0,255,136,0.2); color: var(--stable); }
        .log-badge.fail { background: rgba(255,51,102,0.2); color: var(--danger); }
        .log-badge.bead { background: rgba(52,152,219,0.2); color: var(--bead-unlock); }
        .log-badge.proof { background: rgba(255,204,0,0.2); color: var(--warning); }
        
        /* Toast */
        .toast {
            position: fixed;
            top: 70px;
            left: 50%;
            transform: translateX(-50%) translateY(-20px);
            padding: 10px 20px;
            background: var(--bg-card);
            border-radius: 20px;
            font-size: 12px;
            opacity: 0;
            transition: all 0.3s;
            z-index: 1001;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        .toast.success { border-color: var(--stable); }
        .toast.warning { border-color: var(--warning); }
        .toast.bead { border-color: var(--bead-unlock); }
        
        /* Responsive */
        @media (max-width: 1024px) {
            body { grid-template-columns: 1fr; }
            .sidebar { display: none; }
            .bead2-toggle { right: 10px; }
        }
        
        @media (max-width: 768px) {
            .autus-beads { flex-direction: column; }
            .state-grid, .nav-cards { grid-template-columns: 1fr; }
            .stations { flex-wrap: wrap; gap: 10px; justify-content: center; }
            .track-line { display: none; }
            .action-bar { flex-direction: column; }
            .accel-display { display: none; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            AUT<span>US</span>
            <div class="live-indicator">
                <div class="live-dot"></div>
                LIVE
            </div>
        </div>
        
        <div class="accel-display">
            <div>
                <div class="accel-label">Acceleration</div>
            </div>
            <div class="accel-value" id="accelValue">0.0</div>
            <div class="accel-bar">
                <div class="accel-bar-fill" id="accelFill" style="width: 0%"></div>
            </div>
        </div>
        
        <div class="header-right">
            <div class="pack-tabs">
                <button class="pack-tab active" data-pack="overseas">ğŸŒ í•´ì™¸ì¸ë ¥</button>
                <button class="pack-tab" data-pack="tax">ğŸ’° ì ˆì„¸</button>
                <button class="pack-tab" data-pack="b2b">ğŸ¤ B2B</button>
            </div>
            <div class="status-badge">
                <div class="status-dot" id="statusDot" style="background: var(--stable)"></div>
                <span id="statusText">STABLE</span>
            </div>
        </div>
    </header>

    <!-- Main Area -->
    <main class="main-area">
        
        <!-- BEAD 1: Goal (ëª©í‘œ ìœ„) -->
        <section class="autus-beads" id="beadsPanel">
            <div class="bead active" data-bead="1" id="bead1">
                <div class="bead-header">
                    <span class="bead-num">BEAD 1</span>
                    <span class="bead-state" id="bead1State">ACTIVE</span>
                </div>
                <div class="bead-icon">ğŸ¯</div>
                <div class="bead-name">GOAL</div>
                <div class="bead-desc">ì´ í™”ë©´ì˜ ì£¼ê¶Œ â€” ëª©í‘œ ì •ë°€í™” ì™„ë£Œ</div>
            </div>
            
            <div class="bead locked" data-bead="2" id="bead2">
                <div class="bead-header">
                    <span class="bead-num">BEAD 2</span>
                    <span class="bead-state" id="bead2State">LOCK</span>
                </div>
                <div class="bead-icon">ğŸ“‹</div>
                <div class="bead-name">PROOF</div>
                <div class="bead-desc">ì¦ê±°/ê´€ì¸¡ ê¶Œí•œ â€” ì„ íƒí˜• ê¸°ë¡ í™œì„±í™”</div>
                <div class="bead-cond">Unlock: <strong>Accel â‰¥ 1.0</strong></div>
            </div>
            
            <div class="bead locked" data-bead="3" id="bead3">
                <div class="bead-header">
                    <span class="bead-num">BEAD 3</span>
                    <span class="bead-state" id="bead3State">LOCK</span>
                </div>
                <div class="bead-icon">âš¡</div>
                <div class="bead-name">AUTO</div>
                <div class="bead-desc">ìë™ ì‹¤í–‰ ê¶Œí•œ â€” NOW ê°•ì œ ê³ ì •</div>
                <div class="bead-cond">Unlock: <strong>Accel â‰¥ 2.0 + Proof</strong></div>
            </div>
        </section>
        
        <!-- GOAL Section -->
        <section class="goal-section">
            <div class="goal-label">GOAL</div>
            <div class="goal-text" id="goalText">
                <em>ëª©í‘œ ì„¤ì • ëŒ€ê¸°</em>
            </div>
            <div class="progress-badge">
                Station <strong id="stationNum">3 / 8</strong> â€” <span id="stageName">Threshold</span>
            </div>
        </section>
        
        <!-- Metro Track + Bead2 Toggle -->
        <section class="metro-section">
            <div class="metro-track">
                <div class="track-header">
                    <div class="track-title">íŒë‹¨ ë£¨í”„</div>
                </div>
                
                <div class="stations">
                    <div class="track-line">
                        <div class="track-line-fill" id="trackFill" style="width: 28%"></div>
                    </div>
                    
                    <div class="station passed" data-idx="0"><div class="station-node">ğŸ“¡</div><div class="station-label">Reality</div></div>
                    <div class="station passed" data-idx="1"><div class="station-node">âš¡</div><div class="station-label">State</div></div>
                    <div class="station active" data-idx="2"><div class="station-node">ğŸ¯</div><div class="station-label">Threshold</div></div>
                    <div class="station" data-idx="3"><div class="station-node">ğŸ“Š</div><div class="station-label">Forecast</div></div>
                    <div class="station" data-idx="4"><div class="station-node">ğŸ§ </div><div class="station-label">Decision</div></div>
                    <div class="station" data-idx="5"><div class="station-node">ğŸš€</div><div class="station-label">Action</div></div>
                    <div class="station" data-idx="6"><div class="station-node">ğŸ“</div><div class="station-label">Log</div></div>
                    <div class="station" data-idx="7"><div class="station-node">ğŸ”„</div><div class="station-label">Loop</div></div>
                </div>
                
                <div class="loop-notice">
                    <strong>DetourëŠ” Threshold ë‹¨ê³„ì—ì„œë§Œ í—ˆìš©ë¨.</strong> ëª¨ë“  ìš°íšŒëŠ” ë¹„ìš©ìœ¼ë¡œ ê¸°ë¡.
                </div>
            </div>
            
            <!-- Bead2 Toggle (ë£¨í”„ ì˜†) -->
            <div class="bead2-toggle" id="bead2Toggle" title="PROOF Panel">ğŸ“‹</div>
        </section>
        
        <!-- Proof Panel (Bead2) -->
        <section class="proof-panel" id="proofPanel">
            <div class="proof-header">
                <div class="proof-title">ğŸ“‹ PROOF (Bead 2)</div>
            </div>
            <div class="proof-desc">
                ê¸°ë³¸ê°’ì€ ì„ íƒí˜• ì¦ê±°(ì²´í¬/íƒ€ì´ë¨¸/ì—…ë¡œë“œ). ì„¼ì„œëŠ” ê³ ê¸‰ ì˜µì…˜.
            </div>
            <div class="proof-actions">
                <button class="proof-btn" id="proofCheck">
                    <div class="proof-btn-icon">âœ…</div>
                    CHECK ì™„ë£Œ
                </button>
                <button class="proof-btn" id="proofTimer">
                    <div class="proof-btn-icon">â±ï¸</div>
                    TIMER 30m
                </button>
                <button class="proof-btn" id="proofUpload">
                    <div class="proof-btn-icon">ğŸ“¤</div>
                    UPLOAD
                </button>
            </div>
            <div class="proof-status" id="proofStatus">No proof yet.</div>
        </section>
        
        <!-- Detour Box -->
        <section class="detour-box" id="detourBox">
            <div class="detour-header">
                <div class="detour-icon">âš¡</div>
                <div class="detour-title">Conditional Detour</div>
            </div>
            <div class="detour-steps">
                <div class="detour-step" data-step="0"><div class="detour-step-icon">ğŸ”</div>Bottleneck</div>
                <div class="detour-step" data-step="1"><div class="detour-step-icon">âš™ï¸</div>Axis</div>
                <div class="detour-step" data-step="2"><div class="detour-step-icon">ğŸ“‹</div>Drilldown</div>
                <div class="detour-step" data-step="3"><div class="detour-step-icon">ğŸ› ï¸</div>Fix</div>
                <div class="detour-step" data-step="4"><div class="detour-step-icon">â†©ï¸</div>ë³µê·€</div>
            </div>
            <div class="axis-selector">
                <button class="axis-btn" data-axis="OUT"><div class="axis-code">OUT</div><div class="axis-name">ìœ ì¶œ</div></button>
                <button class="axis-btn" data-axis="MCH"><div class="axis-code">MCH</div><div class="axis-name">ê¸°ê³„</div></button>
                <button class="axis-btn" data-axis="RES"><div class="axis-code">RES</div><div class="axis-name">ìì›</div></button>
                <button class="axis-btn" data-axis="DMD"><div class="axis-code">DMD</div><div class="axis-name">ìˆ˜ìš”</div></button>
                <button class="axis-btn" data-axis="SHK"><div class="axis-code">SHK</div><div class="axis-name">ì¶©ê²©</div></button>
            </div>
        </section>
        
        <!-- State Grid -->
        <section class="state-grid">
            <div class="state-card" style="--card-color: var(--stable)">
                <div class="state-label">Energy</div>
                <div class="state-value" id="energyValue">87<span class="state-unit">%</span></div>
                <div class="state-trend up" id="energyTrend">â†‘ +2.3%</div>
            </div>
            <div class="state-card" style="--card-color: var(--core-active)">
                <div class="state-label">Flow</div>
                <div class="state-value" id="flowValue">+2.4<span class="state-unit">ì–µ/ì›”</span></div>
                <div class="state-trend up" id="flowTrend">â†‘ Positive</div>
            </div>
            <div class="state-card" style="--card-color: var(--warning)">
                <div class="state-label">Risk</div>
                <div class="state-value" id="riskValue">0.23</div>
                <div class="state-trend down" id="riskTrend">â†“ -0.05</div>
            </div>
        </section>
        
        <!-- NOW/NEXT Cards -->
        <section class="nav-cards">
            <div class="nav-card now">
                <div class="nav-card-label">NOW â€” ì§€ê¸ˆ í•  1ê°œ</div>
                <div class="nav-card-text" id="nowAction">Threshold í†µê³¼ í™•ì¸</div>
            </div>
            <div class="nav-card next">
                <div class="nav-card-label">NEXT â€” ë‹¤ìŒ 1ê°œ</div>
                <div class="nav-card-text" id="nextAction">ìƒíƒœ ê°œì„  í›„ ê²°ì •</div>
            </div>
        </section>
        
        <!-- Bead3 Banner (3ë²„íŠ¼ ìœ„) -->
        <section class="bead3-banner" id="bead3Banner">
            <div class="bead3-banner-title">âš¡ AUTO ê¶Œí•œ ê°•í™” (Bead 3)</div>
            <div class="bead3-banner-desc">í•´ê¸ˆ ì‹œ AUTO PROCEEDëŠ” "ë‹¤ìŒ 1ê°œ í–‰ë™"ì„ ê°•ì œ ê³ ì •í•œë‹¤.</div>
        </section>
        
        <!-- Action Section -->
        <section class="action-section">
            <div class="action-header">ì„ íƒì€ 3ê°œë¿ì´ê³ , ê²°ê³¼ëŠ” ì¦‰ì‹œ ìˆ«ìë¡œ ë‚¨ëŠ”ë‹¤</div>
            <div class="action-bar">
                <button class="action-btn primary" id="btnAuto">
                    <div class="action-btn-main">â–¶ AUTO PROCEED</div>
                    <div class="action-btn-sub">í˜„ì¬ ê¸°ì¤€ ìµœì  ê²½ë¡œë¡œ ì§„í–‰</div>
                </button>
                <button class="action-btn secondary" id="btnThreshold">
                    <div class="action-btn-main">ğŸ¯ THRESHOLD</div>
                    <div class="action-btn-sub">ê¸°ì¤€ ì¬ì •ì˜ / í…ŒìŠ¤íŠ¸</div>
                </button>
                <button class="action-btn danger" id="btnDetour">
                    <div class="action-btn-main">âš ï¸ DETOUR</div>
                    <div class="action-btn-sub">ìš°íšŒ ê²½ë¡œ (Thresholdë§Œ)</div>
                </button>
            </div>
        </section>
    </main>
    
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="layer-notice">
            <strong>ë ˆì´ì–´ ì´ë™ì€ ëª©í‘œë¥¼ ë°”ê¾¸ì§€ ì•ŠëŠ”ë‹¤.</strong>
            ê°™ì€ ëª©í‘œë¥¼ ë‹¤ë¥¸ í•´ìƒë„ë¡œ ë³¸ë‹¤.
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">ğŸ“¦ Active Pack</div>
            <div class="pack-info">
                <div class="pack-icon" id="packIcon" style="background: rgba(52,152,219,0.2)">ğŸŒ</div>
                <div class="pack-meta">
                    <h3 id="packName">í•´ì™¸ì¸ë ¥ Pack</h3>
                    <p id="packDesc">ì¸ê±´ë¹„ ìµœì í™”</p>
                </div>
            </div>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">ğŸ“Š Live Metrics</div>
            <div class="metric-row">
                <span class="metric-label">Loss Velocity</span>
                <span class="metric-value" id="lossVelocity" style="color: var(--danger)">â‚©250/sec</span>
            </div>
            <div class="metric-row">
                <span class="metric-label">ì—°ì† ì²´í¬</span>
                <span class="metric-value" id="checkStreak" style="color: var(--core-active)">0íšŒ</span>
            </div>
            <div class="metric-row">
                <span class="metric-label">Proof ì—¬ë¶€</span>
                <span class="metric-value" id="hasProof">âŒ</span>
            </div>
            
            <div class="unlock-log" id="unlockLog">
                <div class="unlock-log-title">ğŸ”“ í•´ê¸ˆ ê¸°ë¡</div>
                <div id="unlockLogItems">
                    <!-- Items added by JS -->
                </div>
            </div>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-title">ğŸ“ Decision Log</div>
        </div>
        <div class="log-list" id="logList"></div>
    </aside>
    
    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // AUTUS BEAD STATE MACHINE
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const AutusBeads = {
            accel: 0.0,
            hasProof: false,
            checkStreak: 0,
            bead1: "ACTIVE",
            bead2: "LOCK",
            bead3: "LOCK",
            unlockLog: []
        };
        
        const STATIONS = ['Reality', 'State', 'Threshold', 'Forecast', 'Decision', 'Action', 'Log', 'Loop'];
        
        const PACKS = {
            overseas: { name: 'í•´ì™¸ì¸ë ¥ Pack', icon: 'ğŸŒ', desc: 'ì¸ê±´ë¹„ ìµœì í™”', color: '#3498db', data: { energy: 87, flow: 2.4, risk: 0.23, state: 'STABLE', lossVelocity: 250 }, thresholds: { energy: 60, risk: 0.5 } },
            tax: { name: 'ì ˆì„¸ Pack', icon: 'ğŸ’°', desc: 'ì„¸ê¸ˆ ìµœì í™”', color: '#f1c40f', data: { energy: 92, flow: 13.4, risk: 0.15, state: 'STABLE', lossVelocity: 48 }, thresholds: { energy: 70, risk: 0.4 } },
            b2b: { name: 'B2B Pack', icon: 'ğŸ¤', desc: 'ê±°ë˜ ìµœì í™”', color: '#e74c3c', data: { energy: 65, flow: -16.4, risk: 0.45, state: 'WARNING', lossVelocity: 520 }, thresholds: { energy: 50, risk: 0.6 } }
        };
        
        let currentPack = 'overseas';
        let currentStation = 2;
        let detourActive = false;
        let detourStep = -1;
        let logs = [];
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // BEAD UNLOCK LOGIC
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function setBeadState(num, state) {
            const bead = document.getElementById(`bead${num}`);
            const stateEl = document.getElementById(`bead${num}State`);
            if (!bead || !stateEl) return;
            
            bead.classList.remove('locked', 'active', 'unlocked');
            bead.classList.add(state === 'LOCK' ? 'locked' : state === 'ACTIVE' ? 'active' : 'unlocked');
            stateEl.textContent = state;
            
            AutusBeads[`bead${num}`] = state;
        }
        
        function applyUnlockRules() {
            const prev2 = AutusBeads.bead2;
            const prev3 = AutusBeads.bead3;
            
            // Bead2: Accel >= 1.0
            if (AutusBeads.accel >= 1.0 && AutusBeads.bead2 === 'LOCK') {
                setBeadState(2, 'UNLOCK');
                logUnlock(2, `Acceleration ${AutusBeads.accel.toFixed(1)} â‰¥ 1.0`);
                showToast('ğŸ”“ Bead 2 UNLOCK â€” Proof ê¶Œí•œ íšë“!', 'bead');
            }
            
            // Bead3: Accel >= 2.0 + Proof
            if (AutusBeads.accel >= 2.0 && AutusBeads.hasProof && AutusBeads.bead3 === 'LOCK') {
                setBeadState(3, 'UNLOCK');
                logUnlock(3, `Acceleration ${AutusBeads.accel.toFixed(1)} â‰¥ 2.0 + Proof`);
                showToast('ğŸ”“ Bead 3 UNLOCK â€” AUTO ê¶Œí•œ ê°•í™”!', 'bead');
            }
            
            // UI updates
            const toggle = document.getElementById('bead2Toggle');
            toggle.classList.toggle('unlocked', AutusBeads.bead2 === 'UNLOCK');
            
            document.getElementById('bead3Banner').classList.toggle('show', AutusBeads.bead3 === 'UNLOCK');
            
            // Acceleration display
            document.getElementById('accelValue').textContent = AutusBeads.accel.toFixed(1);
            document.getElementById('accelFill').style.width = `${Math.min(AutusBeads.accel / 3 * 100, 100)}%`;
            
            // Sidebar
            document.getElementById('checkStreak').textContent = `${AutusBeads.checkStreak}íšŒ`;
            document.getElementById('hasProof').textContent = AutusBeads.hasProof ? 'âœ…' : 'âŒ';
        }
        
        function bumpAccel(delta, reason) {
            AutusBeads.accel = Math.max(0, +(AutusBeads.accel + delta).toFixed(2));
            addLog('ACCEL', `+${delta.toFixed(2)} â†’ ${AutusBeads.accel.toFixed(1)} (${reason})`, 'info');
            applyUnlockRules();
        }
        
        function logUnlock(beadNum, reason) {
            const time = new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
            AutusBeads.unlockLog.push({ bead: beadNum, reason, time });
            renderUnlockLog();
        }
        
        function renderUnlockLog() {
            const container = document.getElementById('unlockLogItems');
            container.innerHTML = AutusBeads.unlockLog.map(log => 
                `<div class="unlock-log-item">Bead ${log.bead}: ${log.reason} (${log.time})</div>`
            ).join('');
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // PROOF ACTIONS (Bead2)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        document.getElementById('bead2Toggle').addEventListener('click', () => {
            if (AutusBeads.bead2 !== 'UNLOCK') {
                showToast('ğŸ”’ Bead 2 ì ê¸ˆ â€” Acceleration â‰¥ 1.0 í•„ìš”', 'warning');
                return;
            }
            document.getElementById('proofPanel').classList.toggle('show');
        });
        
        document.getElementById('proofCheck').addEventListener('click', () => {
            AutusBeads.hasProof = true;
            AutusBeads.checkStreak++;
            document.getElementById('proofStatus').textContent = `âœ… CHECK ì™„ë£Œ (ì—°ì† ${AutusBeads.checkStreak}íšŒ)`;
            document.getElementById('proofStatus').classList.add('has-proof');
            bumpAccel(0.4, 'ì²´í¬ ì™„ë£Œ');
            addLog('PROOF', 'CHECK ê¸°ë¡', 'proof');
        });
        
        document.getElementById('proofTimer').addEventListener('click', () => {
            AutusBeads.hasProof = true;
            document.getElementById('proofStatus').textContent = 'â±ï¸ TIMER 30ë¶„ ì‹œì‘ë¨';
            document.getElementById('proofStatus').classList.add('has-proof');
            bumpAccel(0.6, 'íƒ€ì´ë¨¸ ì‹œì‘');
            addLog('PROOF', 'TIMER ì‹œì‘', 'proof');
        });
        
        document.getElementById('proofUpload').addEventListener('click', () => {
            AutusBeads.hasProof = true;
            document.getElementById('proofStatus').textContent = 'ğŸ“¤ UPLOAD ì™„ë£Œ';
            document.getElementById('proofStatus').classList.add('has-proof');
            bumpAccel(0.8, 'ì¦ê±° ì—…ë¡œë“œ');
            addLog('PROOF', 'UPLOAD ê¸°ë¡', 'proof');
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CORE FUNCTIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function switchPack(packId) {
            currentPack = packId;
            const pack = PACKS[packId];
            
            document.querySelectorAll('.pack-tab').forEach(t => t.classList.toggle('active', t.dataset.pack === packId));
            document.getElementById('packName').textContent = pack.name;
            document.getElementById('packDesc').textContent = pack.desc;
            document.getElementById('packIcon').textContent = pack.icon;
            
            updateMetrics(pack.data);
            updateStatus(pack.data.state);
            currentStation = 2;
            updateStations();
            addLog('PACK', pack.name, 'info');
        }
        
        function updateMetrics(data) {
            document.getElementById('energyValue').innerHTML = `${data.energy}<span class="state-unit">%</span>`;
            document.querySelector('.state-card:nth-child(1)').style.setProperty('--card-color', data.energy > 70 ? 'var(--stable)' : 'var(--warning)');
            
            const flowSign = data.flow >= 0 ? '+' : '';
            document.getElementById('flowValue').innerHTML = `${flowSign}${data.flow}<span class="state-unit">ì–µ/ì›”</span>`;
            document.getElementById('flowTrend').className = `state-trend ${data.flow >= 0 ? 'up' : 'down'}`;
            
            document.getElementById('riskValue').textContent = data.risk.toFixed(2);
            document.getElementById('lossVelocity').textContent = `â‚©${data.lossVelocity}/sec`;
        }
        
        function updateStatus(state) {
            document.getElementById('statusText').textContent = state;
            document.getElementById('statusDot').style.background = state === 'STABLE' ? 'var(--stable)' : 'var(--warning)';
        }
        
        function updateStations() {
            document.querySelectorAll('.station').forEach((s, i) => {
                s.classList.remove('passed', 'active', 'warning');
                if (i < currentStation) s.classList.add('passed');
                else if (i === currentStation) {
                    s.classList.add('active');
                    if (detourActive) s.classList.add('warning');
                }
            });
            
            document.getElementById('trackFill').style.width = `${(currentStation / 7) * 100}%`;
            document.getElementById('stationNum').textContent = `${currentStation + 1} / 8`;
            document.getElementById('stageName').textContent = STATIONS[currentStation];
        }
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ACTION BUTTONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        document.getElementById('btnAuto').addEventListener('click', () => {
            if (AutusBeads.bead3 === 'UNLOCK') {
                // Bead3 ê°•í™”: NOW ê³ ì •
                document.getElementById('nowAction').textContent = 'âš¡ ìë™ ì‹¤í–‰ ì¤‘...';
                bumpAccel(0.3, 'AUTO+ê°•í™”');
            } else {
                bumpAccel(0.15, 'AUTO');
            }
            proceed();
        });
        
        document.getElementById('btnThreshold').addEventListener('click', () => {
            if (currentStation !== 2) {
                showToast('Threshold ë‹¨ê³„ì—ì„œë§Œ ê°€ëŠ¥', 'warning');
                return;
            }
            
            const pack = PACKS[currentPack];
            const passed = pack.data.energy >= pack.thresholds.energy && pack.data.risk <= pack.thresholds.risk;
            
            if (passed) {
                showToast('âœ… Threshold PASS', 'success');
                addLog('THRESHOLD', 'PASS', 'pass');
                bumpAccel(0.3, 'Threshold í†µê³¼');
                setTimeout(proceed, 500);
            } else {
                showToast('âŒ Threshold FAIL', 'warning');
                addLog('THRESHOLD', 'FAIL', 'fail');
                setTimeout(enterDetour, 500);
            }
        });
        
        document.getElementById('btnDetour').addEventListener('click', () => {
            if (currentStation !== 2) {
                showToast('Thresholdì—ì„œë§Œ ê°€ëŠ¥', 'warning');
                return;
            }
            enterDetour();
        });
        
        function proceed() {
            if (detourActive) {
                if (detourStep < 4) {
                    detourStep++;
                    updateDetourSteps();
                    if (detourStep === 4) setTimeout(exitDetour, 500);
                }
                return;
            }
            
            if (currentStation < 7) {
                currentStation++;
                addLog('STATION', STATIONS[currentStation], 'info');
                if (currentStation === 7) {
                    setTimeout(() => { currentStation = 1; updateStations(); addLog('LOOP', 'ìˆœí™˜', 'info'); }, 800);
                }
            }
            updateStations();
        }
        
        function enterDetour() {
            detourActive = true;
            detourStep = 0;
            document.getElementById('detourBox').classList.add('active');
            updateDetourSteps();
            addLog('DETOUR', 'ìš°íšŒ ì§„ì…', 'fail');
        }
        
        function updateDetourSteps() {
            document.querySelectorAll('.detour-step').forEach((s, i) => s.classList.toggle('active', i <= detourStep));
        }
        
        function exitDetour() {
            detourActive = false;
            detourStep = -1;
            document.getElementById('detourBox').classList.remove('active');
            
            const pack = PACKS[currentPack];
            pack.data.energy = Math.min(100, pack.data.energy + 5);
            pack.data.risk = Math.max(0, pack.data.risk - 0.1);
            updateMetrics(pack.data);
            
            currentStation = 3;
            updateStations();
            bumpAccel(0.2, 'Detour ì™„ë£Œ');
            addLog('FIX', 'State ë³µê·€', 'pass');
        }
        
        // Detour step & axis click
        document.querySelectorAll('.detour-step').forEach(step => {
            step.addEventListener('click', () => {
                if (!detourActive) return;
                const idx = parseInt(step.dataset.step);
                if (idx <= detourStep + 1) { detourStep = idx; updateDetourSteps(); if (idx === 4) setTimeout(exitDetour, 500); }
            });
        });
        
        document.querySelectorAll('.axis-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                if (detourActive && detourStep === 1) {
                    document.querySelectorAll('.axis-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    setTimeout(() => { detourStep = 2; updateDetourSteps(); }, 300);
                }
            });
        });
        
        // Station click
        document.querySelectorAll('.station').forEach(station => {
            station.addEventListener('click', () => {
                if (!detourActive) { currentStation = parseInt(station.dataset.idx); updateStations(); }
            });
        });
        
        // Pack tabs
        document.querySelectorAll('.pack-tab').forEach(tab => {
            tab.addEventListener('click', () => switchPack(tab.dataset.pack));
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // LOGGING & TOAST
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        function addLog(type, message, badge) {
            const time = new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            logs.unshift({ time, type, message, badge });
            if (logs.length > 10) logs.pop();
            renderLogs();
        }
        
        function renderLogs() {
            document.getElementById('logList').innerHTML = logs.map(log => `
                <div class="log-item">
                    <div class="log-time">${log.time}</div>
                    <div class="log-content">
                        <div class="log-action">${log.message}</div>
                        <span class="log-badge ${log.badge}">${log.type}</span>
                    </div>
                </div>
            `).join('');
        }
        
        function showToast(message, type) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast show ${type}`;
            setTimeout(() => toast.classList.remove('show'), 2500);
        }
        
        // Keyboard
        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowRight') proceed();
            if (e.key === 't') document.getElementById('btnThreshold').click();
            if (e.key === 'd') document.getElementById('btnDetour').click();
            if (e.key === 'c' && AutusBeads.bead2 === 'UNLOCK') document.getElementById('proofCheck').click();
        });
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // INIT
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        switchPack('overseas');
        applyUnlockRules();
        addLog('SYSTEM', 'AUTUS ì´ˆê¸°í™”', 'info');
    </script>
</body>
</html>
