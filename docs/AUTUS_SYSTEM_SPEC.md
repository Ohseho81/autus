# 🏛️ AUTUS System Specification v2.0

**핵심 공식: A = T^σ**

---

# Part 1: 노드별 역할 및 도움자료

## 1.1 노드 계층 구조

```
                    ┌──────────┐
                    │  OWNER   │ λ=5.0
                    │  오너    │ 전략/목표
                    └────┬─────┘
                         │
                    ┌────▼─────┐
                    │ MANAGER  │ λ=3.0
                    │  관리자  │ 계획/관리
                    └────┬─────┘
                         │
          ┌──────────────┼──────────────┐
          │              │              │
     ┌────▼────┐    ┌────▼────┐    ┌────▼────┐
     │  STAFF  │    │ STUDENT │    │ PARENT  │
     │ 실무자  │    │  학생   │    │ 학부모  │
     │ λ=2.0  │    │ λ=1.0  │    │ λ=1.2  │
     └─────────┘    └─────────┘    └─────────┘
```

---

## 1.2 OWNER (오너)

### 기본 정보
| 항목 | 값 |
|------|-----|
| **λ (노드 가치)** | 5.0 |
| **의사결정 주기** | 분기/연간 |
| **핵심 역할** | 목표 설정 (What & Why) |
| **시간 배분** | 전략 70% / 운영 30% |

### 책임
1. 비전/미션 정의
2. 연간/분기 목표 설정
3. 핵심 지표 (KPI) 결정
4. 자원 배분 결정
5. 최종 의사결정

### 목표 설정 대상
- **Ω (조직 가치)**: Σ(T^σ) 총합
- **평균 σ**: 조직 전체 시너지
- **N (노드 수)**: 활성 노드 수
- **재등록률/추천율**
- **매출/이익**

### 제공되는 도움자료

| 자료 | 형태 | 갱신 주기 | 내용 |
|------|------|----------|------|
| **Ω 추이 차트** | 그래프 | 실시간 | 조직 가치 변화 |
| **σ 분포 파이** | 차트 | 일간 | 등급별 분포 |
| **이탈 위험 TOP 10** | 테이블 | 실시간 | σ < 1.0 노드 |
| **목표 달성률** | 게이지 | 실시간 | KPI 대비 현황 |
| **경쟁사 벤치마크** | 리포트 | 월간 | 시장 포지션 |
| **예측 시뮬레이션** | 인터랙티브 | 온디맨드 | What-if 분석 |

### 대시보드 구성
```
┌────────────────────────────────────────────────────┐
│  🏛️ OWNER DASHBOARD                               │
├────────────────────────────────────────────────────┤
│  ┌──────────────┐ ┌──────────────┐ ┌────────────┐ │
│  │  Ω = 1.2M   │ │  σ̄ = 1.47   │ │ N = 234   │ │
│  │  ▲ +12.5%   │ │  ▲ +0.05    │ │ ▲ +15     │ │
│  └──────────────┘ └──────────────┘ └────────────┘ │
│                                                    │
│  [Ω 추이 그래프 ──────────────────────────]       │
│                                                    │
│  σ 분포: ⚫5% 🔴10% 🟡30% 🟢35% 🔵15% 💜5%        │
│                                                    │
│  🚨 이탈 위험 TOP 10                              │
│  ├─ 김학생 σ=0.65 ▼-0.12                         │
│  ├─ 박학부모 σ=0.72 ▼-0.08                       │
│  └─ ...                                           │
└────────────────────────────────────────────────────┘
```

---

## 1.3 MANAGER (관리자)

### 기본 정보
| 항목 | 값 |
|------|-----|
| **λ (노드 가치)** | 3.0 |
| **의사결정 주기** | 주간/월간 |
| **핵심 역할** | 계획 수립 (How) |
| **시간 배분** | 계획 40% / 관리 40% / 실행 20% |

### 책임
1. 목표 → 실행 계획 변환
2. 일정/자원/인력 배치
3. 실무자 성과 관리
4. 진척 모니터링
5. 이슈 에스컬레이션

### 계획 수립 대상
- 월간/주간 목표 분해
- 교사별 담당 배정
- 상담/이벤트 일정
- 마케팅 계획
- 리스크 관리 계획

### 제공되는 도움자료

| 자료 | 형태 | 갱신 주기 | 내용 |
|------|------|----------|------|
| **주간 목표 현황** | 체크리스트 | 실시간 | 목표 달성률 |
| **교사별 σ 매트릭스** | 히트맵 | 일간 | 담당별 관계 상태 |
| **학생 σ 리스트** | 정렬 테이블 | 실시간 | 전체 학생 σ |
| **재등록 파이프라인** | 퍼널 | 일간 | 재등록 예정/완료 |
| **상담 일정** | 캘린더 | 실시간 | 예정 상담 목록 |
| **이탈 예측 알림** | 푸시 | 실시간 | σ 급락 감지 |
| **자동 계획 제안** | AI 생성 | 주간 | 목표 기반 계획 |

### 대시보드 구성
```
┌────────────────────────────────────────────────────┐
│  📋 MANAGER DASHBOARD                              │
├────────────────────────────────────────────────────┤
│  이번 주 목표                                      │
│  ├─ ✅ 재등록 상담 15건 (12/15)                   │
│  ├─ 🔄 신규 체험 10건 (7/10)                      │
│  └─ ⏳ 이탈 방지 5건 (2/5)                        │
│                                                    │
│  교사별 성과           학생 σ 분포                │
│  ┌──────────────┐     ┌──────────────┐            │
│  │ 김교사 σ̄=1.5 │     │ ⚫ 3명       │            │
│  │ 박교사 σ̄=1.3 │     │ 🔴 8명       │            │
│  │ 이교사 σ̄=1.6 │     │ 🟡 25명      │            │
│  └──────────────┘     └──────────────┘            │
│                                                    │
│  🔔 오늘 상담: 3건 | 📞 학부모 연락: 5건          │
└────────────────────────────────────────────────────┘
```

---

## 1.4 STAFF (실무자/교사)

### 기본 정보
| 항목 | 값 |
|------|-----|
| **λ (노드 가치)** | 1.5 ~ 2.5 (경력/성과) |
| **의사결정 주기** | 일간 |
| **핵심 역할** | 실행 & 피드백 (Do & Report) |
| **시간 배분** | 실행 80% / 기록 15% / 보고 5% |

### 책임
1. 수업 실행
2. 학생/학부모 직접 소통
3. 데이터 기록 (행위 태깅)
4. 현장 이슈 보고
5. 개선 아이디어 제안

### 피드백 대상
- 학생별 σ 변화 감지
- 이탈 징후 보고
- 학부모 반응
- 수업 효과
- 운영 이슈

### 제공되는 도움자료

| 자료 | 형태 | 갱신 주기 | 내용 |
|------|------|----------|------|
| **오늘 수업 일정** | 타임라인 | 일간 | 시간별 수업 |
| **담당 학생 σ 현황** | 그리드 | 실시간 | 개별 학생 상태 |
| **학부모 메시지** | 인박스 | 실시간 | 미확인 메시지 |
| **빠른 기록 버튼** | 원터치 | 즉시 | 행위 태깅 |
| **학생 프로필** | 카드 | 온디맨드 | 이력/특성 |
| **추천 액션** | AI 제안 | 실시간 | σ 개선 행동 |
| **오늘 할 일** | 체크리스트 | 일간 | 우선순위 태스크 |

### 대시보드 구성
```
┌────────────────────────────────────────────────────┐
│  👨‍🏫 STAFF DASHBOARD                               │
├────────────────────────────────────────────────────┤
│  오늘 수업 (5/8 완료)                              │
│  ├─ ✅ 09:00 초등수학 A반                          │
│  ├─ ✅ 10:30 중등영어 B반                          │
│  ├─ 🔵 14:00 고등국어 C반 ← 진행 중               │
│  └─ ⏳ 16:00 초등과학 D반                          │
│                                                    │
│  담당 학생 σ 현황 (32명)                          │
│  ┌──────────────────────────────────────────┐     │
│  │ 🟢🟢🟢🟡🟡🟡🟡🟡🔴🔴⚫                    │     │
│  │ 김○○ 박○○ 이○○ ...                      │     │
│  └──────────────────────────────────────────┘     │
│                                                    │
│  빠른 기록: [✅출결] [💬소통] [🙋참여] [👍긍정]   │
│                                                    │
│  🔔 학부모 메시지: 3건 미확인                      │
└────────────────────────────────────────────────────┘
```

---

## 1.5 STUDENT (학생)

### 기본 정보
| 항목 | 값 |
|------|-----|
| **λ (노드 가치)** | 1.0 |
| **역할** | 서비스 수혜자 / σ 생성원 |

### σ 영향 행위
| 행위 | σ 기여 | 측정 방법 |
|------|--------|----------|
| 출석 | -0.1 ~ +0.15 | 자동 (카드키) |
| 수업 참여 | 0 ~ +0.15 | 교사 태깅 |
| 과제 제출 | 0 ~ +0.05 | LMS |
| 자발적 체류 | 0 ~ +0.25 | 자동 (체류시간) |
| 긍정 피드백 | 0 ~ +0.3 | 설문/관찰 |
| 이탈 신호 | -0.8 ~ 0 | AI 감지 |

### 제공되는 도움자료 (Parent Portal 경유)

| 자료 | 형태 | 내용 |
|------|------|------|
| **출결 현황** | 캘린더 | 월간 출석 기록 |
| **학습 진도** | 프로그레스 바 | 과목별 진도율 |
| **성취 배지** | 아이콘 | 달성 마일스톤 |
| **성장 리포트** | PDF | 월간 성장 요약 |

---

## 1.6 PARENT (학부모)

### 기본 정보
| 항목 | 값 |
|------|-----|
| **λ (노드 가치)** | 1.2 |
| **역할** | 의사결정자 / σ 핵심 결정자 |

### σ 영향 행위
| 행위 | σ 기여 | 측정 방법 |
|------|--------|----------|
| 재등록 | -0.15 ~ +0.6 | CRM |
| 소개 | 0 ~ +0.7 | 추천인 필드 |
| 추가 수강 | 0 ~ +0.65 | 등록 변경 |
| 수납 | -0.2 ~ +0.15 | 결제 시스템 |
| 소통 반응 | 0 ~ +0.15 | 메시지 시스템 |
| 긍정 피드백 | 0 ~ +0.3 | 리뷰/설문 |
| 불만 | -0.7 ~ 0 | CS 기록 |

### 제공되는 도움자료 (Parent Portal)

| 자료 | 형태 | 내용 |
|------|------|------|
| **자녀 현황 요약** | 카드 | σ, 출석, 진도 |
| **알림장** | 리스트 | 학원 공지 |
| **상담 예약** | 캘린더 | 가용 시간 선택 |
| **결제/수납** | 인보이스 | 청구 내역 |
| **Safety Mirror** | 리포트 | 성장 시각화 |

---

## 1.7 외부 노드

### PROSPECT (잠재 고객)
| 항목 | 값 |
|------|-----|
| **λ** | 0.8 |
| **목표** | → STUDENT/PARENT 전환 |
| **σ 기여** | 상담 응대, 체험 수업 |

### CHURNED (이탈 고객)
| 항목 | 값 |
|------|-----|
| **λ** | 0.5 (시간 감쇠) |
| **목표** | 복귀 또는 추천 유도 |
| **σ 기여** | 이탈 사유 분석 |

### EXTERNAL (외부 노드)
| 항목 | 값 |
|------|-----|
| **λ** | 1.0 |
| **유형** | 경쟁자, 파트너, 영향력자, 기관 |

---

# Part 2: 데이터 플로우

## 2.1 전체 플로우

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│  ① 수집          ② 가공           ③ 계획          ④ 실행          ⑤ 피드백  │
│  COLLECT        PROCESS         PLAN           EXECUTE        FEEDBACK │
│                                                                         │
│  ┌─────┐       ┌─────┐        ┌─────┐        ┌─────┐        ┌─────┐   │
│  │ RAW │  ───▶ │  σ  │  ───▶  │ AI  │  ───▶  │ DO  │  ───▶  │ A=T^σ│   │
│  │DATA │       │CALC │        │PLAN │        │     │        │     │   │
│  └─────┘       └─────┘        └─────┘        └─────┘        └─────┘   │
│     │             │              │              │              │       │
│     ▼             ▼              ▼              ▼              ▼       │
│  출결,결제      σ값 산출       목표→계획      행위 실행      A값 갱신    │
│  메시지,        등급 판정      태스크 생성    태깅           Ω 갱신     │
│  외부 API                     우선순위                      알림 발송   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 2.2 ① 수집 (COLLECT)

### 자동 수집 (71%)

| 데이터 | 소스 | 수집 방법 | 측정값 |
|--------|------|----------|--------|
| 출결 시간 | 카드키/QR | IoT 자동 | t (분) |
| 체류 시간 | 출입 기록 | 계산 | t (분) |
| 결제 시점 | PG사 | Webhook | 조기/정시/연체 |
| 메시지 응답 | 카카오/문자 | API | 응답 시간/율 |
| 공지 확인 | 앱 | 로그 | 확인 시점 |
| 캘린더 | Google/Outlook | OAuth | 미팅 시간 |
| 성적 | LMS | 시스템 | 점수 변화 |

### 반자동 수집 (21%)

| 데이터 | 소스 | 수집 방법 | 측정값 |
|--------|------|----------|--------|
| 상담 내용 | 교사 입력 | Quick Tag | 주제, 시간, 톤 |
| 수업 참여 | 교사 태깅 | 원터치 버튼 | 질문/발표/반응 |
| 소개 관계 | CRM | 추천인 필드 | 소개자-피소개자 |
| 불만 사항 | CS | 기록 | 내용, 강도 |
| 긍정 피드백 | 설문 | 폼 | 만족도 점수 |

### 수동 수집 (8%)

| 데이터 | 소스 | 수집 방법 | 측정값 |
|--------|------|----------|--------|
| 굿즈 소지 | 관찰 | 체크박스 | Y/N |
| SNS 게시 | 모니터링 | 태깅 | 링크 |
| 경쟁사 문의 | 대화 | 기록 | Y/N |

### 외부 데이터 (8개 소스)

```
┌──────────────────────────────────────────────────────┐
│  External Data Sources                               │
├──────────┬──────────┬──────────┬──────────┬────────┤
│ EMAIL    │ CALENDAR │ MESSENGER│ SOCIAL   │ REPUTATION │
│ 10%      │ 15%      │ 20%      │ 15%      │ 15%    │
├──────────┴──────────┴──────────┴──────────┴────────┤
│ LOCATION │ PAYMENT  │ NETWORK  │          │        │
│ 10%      │ 10%      │ 5%       │          │        │
└──────────────────────────────────────────────────────┘
```

---

## 2.3 ② 가공 (PROCESS)

### σ 계산 파이프라인

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  RAW DATA                                                   │
│     │                                                       │
│     ▼                                                       │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  행위 → σ 기여 계산                                  │   │
│  │  ─────────────────────────────────────────────────   │   │
│  │  behavior_type + modifiers → σ_contribution         │   │
│  │                                                      │   │
│  │  예: REENROLLMENT + {early:true, consecutive:3}     │   │
│  │      → 0.3 + 0.1 + 0.1×(3/5) = 0.46                │   │
│  └─────────────────────────────────────────────────────┘   │
│     │                                                       │
│     ▼                                                       │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  내부 σ 집계                                         │   │
│  │  ─────────────────────────────────────────────────   │   │
│  │  σ_internal = Σ(σ_contribution) for all behaviors   │   │
│  │                                                      │   │
│  │  범위: -1.5 ~ +3.85                                 │   │
│  └─────────────────────────────────────────────────────┘   │
│     │                                                       │
│     ▼                                                       │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  외부 σ 집계                                         │   │
│  │  ─────────────────────────────────────────────────   │   │
│  │  σ_external = Σ(weight_i × σ_i) for all sources    │   │
│  │                                                      │   │
│  │  범위: -0.55 ~ +0.60                                │   │
│  └─────────────────────────────────────────────────────┘   │
│     │                                                       │
│     ▼                                                       │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  전체 σ 계산                                         │   │
│  │  ─────────────────────────────────────────────────   │   │
│  │  σ_total = σ_base + σ_internal + σ_external        │   │
│  │                                                      │   │
│  │  σ_base = 1.0 (중립 시작점)                         │   │
│  │  σ_total = clamp(σ_total, 0.5, 3.0)                │   │
│  └─────────────────────────────────────────────────────┘   │
│     │                                                       │
│     ▼                                                       │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  등급 판정                                           │   │
│  │  ─────────────────────────────────────────────────   │   │
│  │  < 0.7 → critical                                   │   │
│  │  < 1.0 → at_risk                                    │   │
│  │  < 1.3 → neutral                                    │   │
│  │  < 1.6 → good                                       │   │
│  │  < 2.0 → loyal                                      │   │
│  │  ≥ 2.0 → advocate                                   │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### T 계산

```
T = λ × t

예: 교사(λ=2.0) + 학부모(λ=1.2) = λ_avg = 1.6
    상담 60분 = t
    T = 1.6 × 60 = 96 (가치 시간)
```

### A 계산

```
A = T^σ

예: T = 96, σ = 1.5
    A = 96^1.5 = 940.8 (증폭된 시간)
```

---

## 2.4 ③ 계획 (PLAN)

### 목표 → 계획 자동 생성

```
┌─────────────────────────────────────────────────────────────┐
│  OWNER 목표                                                 │
│  ─────────────────────────────────────────────────────────  │
│  "분기 매출 1.5억 달성"                                     │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│  AI 분해                                                    │
│  ─────────────────────────────────────────────────────────  │
│  ├─ 신규 유치 (40%) → 6,000만원                            │
│  ├─ 재등록 유지 (35%) → 5,250만원                          │
│  └─ 객단가 상승 (25%) → 3,750만원                          │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│  MANAGER 계획                                               │
│  ─────────────────────────────────────────────────────────  │
│  주간 목표:                                                 │
│  ├─ 재등록 상담 15건                                       │
│  ├─ 체험 수업 10건                                         │
│  └─ 이탈 방지 상담 5건                                     │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│  STAFF 태스크                                               │
│  ─────────────────────────────────────────────────────────  │
│  오늘 할 일:                                                │
│  ├─ 김학부모 재등록 상담 (14:00)                           │
│  ├─ 박학생 이탈 징후 상담 (16:00)                          │
│  └─ 신규 체험 수업 2건 (18:00, 19:00)                      │
└─────────────────────────────────────────────────────────────┘
```

### 우선순위 알고리즘

```python
priority = (
    churn_risk × 0.4 +          # 이탈 위험도
    potential_value × 0.3 +     # 잠재 가치
    urgency × 0.2 +             # 긴급도
    effort_efficiency × 0.1     # 노력 대비 효과
)

# 이탈 위험도 = max(0, 1.5 - σ) / 1.0
# 잠재 가치 = λ × expected_t
# 긴급도 = 1 - (days_remaining / total_days)
# 노력 효율 = expected_σ_increase / required_time
```

---

## 2.5 ④ 실행 (EXECUTE)

### 행위 태깅 시스템

```
┌─────────────────────────────────────────────────────────────┐
│  Quick Tag Console                                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  학생 선택: [김학생 ▼]                                      │
│                                                             │
│  Tier 1: 결정적                                             │
│  [🔄 재등록] [👥 소개]                                      │
│                                                             │
│  Tier 2: 확장                                               │
│  [➕ 추가수강] [🎉 유료이벤트]                               │
│                                                             │
│  Tier 3: 참여                                               │
│  [🏫 자발적체류] [🎊 무료이벤트] [🙋 수업참여]              │
│                                                             │
│  Tier 4: 유지                                               │
│  [✅ 출결] [💳 수납] [💬 소통]                              │
│                                                             │
│  Tier 5: 표현                                               │
│  [👍 긍정피드백] [👕 굿즈]                                  │
│                                                             │
│  Tier 6: 부정                                               │
│  [⚠️ 불만] [🚨 이탈신호]                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 실행 → 기록 플로우

```
1. STAFF가 행위 실행
   │
   ▼
2. Quick Tag로 행위 기록
   │
   ▼
3. Modifier 선택 (해당 시)
   예: 재등록 → [조기등록 ✓] [연속등록 3회]
   │
   ▼
4. σ 기여 자동 계산
   예: 0.3 + 0.1 + 0.06 = 0.46
   │
   ▼
5. 관계 σ 업데이트
   │
   ▼
6. A 값 재계산
   │
   ▼
7. 이상 감지 시 알림 발송
```

---

## 2.6 ⑤ 피드백 (FEEDBACK)

### 자동 알림 트리거

| 트리거 | 조건 | 알림 대상 | 내용 |
|--------|------|----------|------|
| σ 급락 | Δσ < -0.1 (24h) | MANAGER, STAFF | 이탈 위험 경고 |
| 등급 하락 | good → neutral | MANAGER | 관계 악화 알림 |
| 이탈 임박 | σ < 0.7 | OWNER, MANAGER | 긴급 조치 필요 |
| 목표 달성 | KPI 100% | OWNER | 축하 + 다음 목표 |
| 마일스톤 | 연속 출석 30일 | STAFF, PARENT | 성취 배지 |

### Ω 갱신

```
1. 개별 A 값 갱신
   A_i = T_i^σ_i
   │
   ▼
2. Ω 재계산
   Ω = Σ(A_i)
   │
   ▼
3. 스냅샷 저장 (일간)
   │
   ▼
4. 추이 분석
   Ω_trend = (Ω_today - Ω_yesterday) / Ω_yesterday
   │
   ▼
5. 대시보드 갱신
```

### 리포트 생성

| 리포트 | 주기 | 대상 | 내용 |
|--------|------|------|------|
| Daily Brief | 일간 | MANAGER | σ 변화, 오늘 할 일 |
| Weekly Summary | 주간 | OWNER | Ω 추이, 목표 달성률 |
| Monthly Report | 월간 | OWNER | 전체 분석, 예측 |
| Safety Mirror | 월간 | PARENT | 자녀 성장 리포트 |

---

# Part 3: 상수 및 지수 체계

## 3.1 노드 λ (Lambda) 상수

| 노드 타입 | λ 기본값 | 범위 | 조정 요인 |
|----------|---------|------|----------|
| OWNER | 5.0 | 4.0~6.0 | 의사결정 영향력 |
| MANAGER | 3.0 | 2.5~3.5 | 팀 규모, 성과 |
| STAFF | 2.0 | 1.5~2.5 | 경력, 담당 학생 수 |
| STUDENT | 1.0 | 0.8~1.2 | 학년, 수강 과목 수 |
| PARENT | 1.2 | 1.0~1.5 | 자녀 수, 영향력 |
| PROSPECT | 0.8 | 0.6~1.0 | 전환 가능성 |
| CHURNED | 0.5 | 0.3~0.7 | 이탈 기간 감쇠 |
| EXTERNAL | 1.0 | 0.5~2.0 | 유형별 차등 |

### λ 동적 조정 공식

```python
λ_dynamic = λ_base × (
    1 + 
    0.1 × performance_factor +    # 성과 기반 (±10%)
    0.05 × tenure_factor +        # 경력 기반 (±5%)
    0.05 × network_centrality     # 네트워크 위치 (±5%)
)
```

---

## 3.2 σ (Sigma) 시너지 상수

### σ 범위

| 구간 | 범위 | 등급 | 의미 |
|------|------|------|------|
| 최소 | 0.5 | - | Hard floor |
| Critical | < 0.7 | ⚫ | 이탈 임박 |
| At Risk | 0.7 ~ 1.0 | 🔴 | 이탈 위험 |
| Neutral | 1.0 ~ 1.3 | 🟡 | 보통 관계 |
| Good | 1.3 ~ 1.6 | 🟢 | 좋은 관계 |
| Loyal | 1.6 ~ 2.0 | 🔵 | 충성 고객 |
| Advocate | ≥ 2.0 | 💜 | 팬/전도사 |
| 최대 | 3.0 | - | Hard ceiling |

### σ 기본값

```python
σ_base = 1.0  # 중립 시작점
σ_min = 0.5   # 최소값
σ_max = 3.0   # 최대값
```

---

## 3.3 행위별 σ 기여 상수 (14개)

### Tier 1: 결정적 행위

#### REENROLLMENT (재등록)
```yaml
tier: 1
base: 0.30
modifiers:
  early: +0.10       # 조기 등록 (7일+)
  consecutive: +0.10 # 연속 등록 (max: 횟수/5)
  expansion: +0.10   # 과목 확대
  reduction: -0.05   # 과목 축소
range: [-0.15, +0.60]
```

#### REFERRAL (소개등록)
```yaml
tier: 1
base: 0.20
modifiers:
  converted: +0.30   # 등록 전환
  multiple: +0.10    # 다수 추천 (max: 횟수/3)
  retained: +0.10    # 피추천자 재등록
range: [0, +0.70]
```

### Tier 2: 확장 행위

#### ADDITIONAL_CLASS (추가수강)
```yaml
tier: 2
base: 0.15
modifiers:
  parentInitiated: +0.15  # 학부모 주도
  converted: +0.20        # 등록 전환
  multiSubject: +0.10     # 다과목
  sibling: +0.20          # 형제 등록
range: [0, +0.65]
```

#### PAID_EVENT (유료이벤트)
```yaml
tier: 2
base: 0.15
modifiers:
  highValue: +0.10   # 고가 이벤트
  consecutive: +0.05 # 연속 참여
range: [0, +0.30]
```

### Tier 3: 참여 행위

#### VOLUNTARY_STAY (자발적체류)
```yaml
tier: 3
base: 0.10
modifiers:
  studyRoom: +0.10   # 자습실 사용
  extraStay: +0.05   # 추가 체류
range: [0, +0.25]
```

#### FREE_EVENT (무료이벤트)
```yaml
tier: 3
base: 0.10
modifiers:
  parentAttend: +0.10  # 학부모 동반
  active: +0.05        # 적극 참여
range: [0, +0.25]
```

#### CLASS_PARTICIPATION (수업참여)
```yaml
tier: 3
base: 0.05
modifiers:
  questions: +0.05     # 질문
  homework: +0.05      # 과제 완성
  interaction: +0.05   # 상호작용
range: [0, +0.15]
```

### Tier 4: 유지 행위

#### ATTENDANCE (출결)
```yaml
tier: 4
base: 0.00
modifiers:
  perfect: +0.10       # 완벽 출석률
  noUnexcused: +0.05   # 무단결석 없음
  latePenalty: -0.10   # 지각 페널티
range: [-0.10, +0.15]
```

#### PAYMENT (수납)
```yaml
tier: 4
base: 0.00
modifiers:
  early: +0.10         # 조기 납부
  auto: +0.05          # 자동이체
  late: -0.15          # 연체
  discount: -0.05      # 할인 요청
range: [-0.20, +0.15]
```

#### COMMUNICATION (소통반응)
```yaml
tier: 4
base: 0.00
modifiers:
  readRate: +0.05      # 확인율
  responseRate: +0.05  # 응답률
  compliance: +0.05    # 이행률
range: [0, +0.15]
```

### Tier 5: 표현 행위

#### POSITIVE_FEEDBACK (긍정피드백)
```yaml
tier: 5
base: 0.10
modifiers:
  onlineReview: +0.15      # 온라인 후기
  highSatisfaction: +0.05  # 높은 만족도
range: [0, +0.30]
```

#### MERCHANDISE (굿즈소지)
```yaml
tier: 5
base: 0.05
modifiers:
  sns: +0.10           # SNS 게시
  uniform: +0.05       # 유니폼 착용
range: [0, +0.20]
```

### Tier 6: 부정 행위

#### COMPLAINT (불만)
```yaml
tier: 6
base: -0.10
modifiers:
  severe: -0.20           # 강한 항의
  negativeReview: -0.30   # 부정 후기
  teacherChange: -0.10    # 교사 변경 요청
range: [-0.70, 0]
```

#### CHURN_SIGNAL (이탈신호)
```yaml
tier: 6
base: -0.20
modifiers:
  attendanceDrop: -0.20   # 출석률 급감
  noResponse: -0.15       # 소통 단절
  paymentDelay: -0.15     # 수납 지연
  competitor: -0.30       # 경쟁사 문의
range: [-0.80, 0]
```

---

## 3.4 외부 데이터 가중치 상수

| 소스 | 가중치 | 설명 |
|------|--------|------|
| EMAIL | 0.10 | 이메일 응답/빈도 |
| CALENDAR | 0.15 | 미팅/일정 |
| MESSENGER | 0.20 | 메신저 반응 (가장 높음) |
| SOCIAL | 0.15 | SNS 상호작용 |
| REPUTATION | 0.15 | 리뷰/평판 |
| LOCATION | 0.10 | 방문/체류 |
| PAYMENT | 0.10 | 결제 패턴 |
| NETWORK | 0.05 | 네트워크 연결 |
| **합계** | **1.00** | |

### 외부 소스별 σ 계산

```yaml
EMAIL:
  σ_speed: 0.1 × (1 - min(응답시간/24h, 1))
  σ_freq: 0.05 × min(월간빈도/10, 1)
  σ_depth: 0.05 × min(평균단어수/100, 1)
  σ_sentiment: 0.1 × 감정점수(-1~1)
  range: [-0.1, +0.3]

CALENDAR:
  σ_freq: 0.1 × min(월간미팅/4, 1)
  σ_initiative: 0.05 × 균형비율
  σ_cancel: -0.1 × 취소율
  range: [-0.1, +0.15]

MESSENGER:
  σ_speed: 0.15 × (1 - min(응답분/60, 1))
  σ_freq: 0.1 × min(일간빈도/20, 1)
  σ_balance: 0.05 × 균형
  σ_emoji: 0.05 × min(이모티콘비율/0.3, 1)
  σ_mention: 0.05 × min(상호멘션/10, 1)
  range: [0, +0.4]

SOCIAL:
  σ_follow: 0.05 × (상호팔로우 ? 1 : 0)
  σ_reaction: 0.05 × min(상호반응/10, 1) + 0.05 × (댓글여부)
  σ_tag: 0.1 × (긍정태그) - 0.2 × (부정태그)
  σ_share: 0.1 × min(공유횟수/3, 1)
  σ_dm: 0.1 × min(DM빈도/5, 1) × 응답률
  range: [-0.2, +0.45]

REPUTATION:
  σ_review: 0.2 × (평점-3)/2 + 0.1 × (리뷰작성) + 0.1 × (사진첨부)
  σ_mention: 0.15 × 감정점수 + 0.1 × (추천여부)
  range: [-0.55, +0.65]

LOCATION:
  σ_visit: 0.1 × min(월간빈도/기대빈도, 1.5) - 0.5
  σ_companion: 0.1 × min(동반횟수/5, 1) + 0.05 × (비공식장소여부)
  range: [-0.05, +0.25]

PAYMENT:
  σ_transaction: 0.1 × min(빈도/기대빈도, 1) + 0.1 × (금액증가여부)
  σ_payment: 0.1 × (조기결제) + 0.05 × (자동결제) - 0.15 × (연체)
  range: [-0.15, +0.35]

NETWORK:
  σ_mutual: 0.1 × min(공통연결/10, 1) × avg(공통연결_λ)
  range: [0, +0.1]
```

---

## 3.5 시간 관련 상수

### 활동 유형별 λ 가중치

| 활동 | λ 가중치 | 설명 |
|------|---------|------|
| 1:1 상담 | ×1.5 | 집중 시간 |
| 소그룹 (2-5명) | ×1.0 | 일반 수업 |
| 대그룹 (5명+) | ×0.5 | 희석 효과 |
| 자습 | ×0.3 | 간접 관여 |

### 시간 감쇠 (이탈 고객)

```python
λ_churned = λ_final × decay_factor

# 최근 이탈 (0-6개월)
decay_factor = 0.8^(경과월/6)

# 장기 이탈 (6개월-2년)
decay_factor = 0.5^(경과년)

# 졸업 이탈
decay_factor = 0.9  # 감소 느림
```

---

## 3.6 예측 및 알림 임계값

### 이탈 위험 임계값

| 지표 | 임계값 | 알림 레벨 |
|------|--------|----------|
| σ | < 0.7 | 🚨 Critical |
| σ | < 1.0 | ⚠️ Warning |
| Δσ (24h) | < -0.1 | ⚠️ Warning |
| Δσ (7d) | < -0.2 | 🚨 Critical |

### 목표 달성 임계값

| 지표 | 임계값 | 상태 |
|------|--------|------|
| 달성률 | ≥ 100% | ✅ Achieved |
| 달성률 | ≥ 80% | 🟢 On Track |
| 달성률 | ≥ 60% | 🟡 At Risk |
| 달성률 | < 60% | 🔴 Behind |

---

## 3.7 전체 공식 요약

```python
# 1. 가치 시간
T = λ × t

# 2. 증폭된 시간 (가치)
A = T^σ

# 3. 조직 가치
Ω = Σ(T_i^σ_i)

# 4. σ 역산
σ = log(A) / log(T)

# 5. 내부 σ
σ_internal = Σ(σ_behavior)
           = Σ(base + Σ(modifier × value))

# 6. 외부 σ
σ_external = Σ(weight × σ_source)

# 7. 전체 σ
σ_total = clamp(σ_base + σ_internal + σ_external, 0.5, 3.0)

# 8. 노드 λ 동적 조정
λ = λ_base × (1 + performance + tenure + centrality)

# 9. 이탈 위험도
churn_risk = max(0, 1.5 - σ) + |Δσ| × (Δσ < 0 ? 2 : 0)

# 10. 예측 A
A_predicted = A_current + (λ × t_remaining)^σ
```

---

# 부록: 상수 테이블 (Quick Reference)

## A. 노드 λ

| 노드 | λ |
|------|---|
| OWNER | 5.0 |
| MANAGER | 3.0 |
| STAFF | 2.0 |
| STUDENT | 1.0 |
| PARENT | 1.2 |
| PROSPECT | 0.8 |
| CHURNED | 0.5 |
| EXTERNAL | 1.0 |

## B. σ 등급

| 등급 | 범위 | 색상 |
|------|------|------|
| critical | < 0.7 | #000000 |
| at_risk | 0.7-1.0 | #ef4444 |
| neutral | 1.0-1.3 | #eab308 |
| good | 1.3-1.6 | #22c55e |
| loyal | 1.6-2.0 | #3b82f6 |
| advocate | ≥ 2.0 | #a855f7 |

## C. 행위 σ 요약

| 행위 | Tier | Base | Max |
|------|------|------|-----|
| REENROLLMENT | 1 | +0.30 | +0.60 |
| REFERRAL | 1 | +0.20 | +0.70 |
| ADDITIONAL_CLASS | 2 | +0.15 | +0.65 |
| PAID_EVENT | 2 | +0.15 | +0.30 |
| VOLUNTARY_STAY | 3 | +0.10 | +0.25 |
| FREE_EVENT | 3 | +0.10 | +0.25 |
| CLASS_PARTICIPATION | 3 | +0.05 | +0.15 |
| ATTENDANCE | 4 | 0.00 | +0.15 |
| PAYMENT | 4 | 0.00 | +0.15 |
| COMMUNICATION | 4 | 0.00 | +0.15 |
| POSITIVE_FEEDBACK | 5 | +0.10 | +0.30 |
| MERCHANDISE | 5 | +0.05 | +0.20 |
| COMPLAINT | 6 | -0.10 | -0.70 |
| CHURN_SIGNAL | 6 | -0.20 | -0.80 |

## D. 외부 가중치

| 소스 | 가중치 |
|------|--------|
| MESSENGER | 0.20 |
| CALENDAR | 0.15 |
| SOCIAL | 0.15 |
| REPUTATION | 0.15 |
| EMAIL | 0.10 |
| LOCATION | 0.10 |
| PAYMENT | 0.10 |
| NETWORK | 0.05 |

---

**Build on the Rock. 🏛️**

*AUTUS System Specification v2.0*
*Generated: 2026-01-25*
