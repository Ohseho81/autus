(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[413],{17413:function(e,t,s){Promise.resolve().then(s.bind(s,1441))},1441:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var n=s(57437),a=s(2265),r=s(35398),i=s(7683),o=s(48934),c=s(62926),l=s(82431),d=s(75395),u=s(11239),x=s(61649),g=s(89345),m=s(94766),f=s(92735),h=s(17689),b=s(88906);function v(){let[e,t]=(0,a.useState)("disconnected"),[s]=(0,a.useState)("autus://pairing/".concat(Date.now())),[v,j]=(0,a.useState)({n8nWebhook:!1,sheetsImport:!1,emailParse:!1,notifications:!0});async function w(){try{let e=await (0,o.exportLedger)(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download="autus-ledger-".concat(new Date().toISOString().split("T")[0],".json"),n.click(),URL.revokeObjectURL(s)}catch(e){}}async function y(){let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s)try{let e=await s.text();await (0,o.importLedger)(e),alert("데이터가 복원되었습니다. 페이지를 새로고침합니다."),window.location.reload()}catch(e){alert("데이터 복원에 실패했습니다.")}},e.click()}function N(e){j(t=>({...t,[e]:!t[e]}))}return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(i.Zb,{title:"P2P 연결",subtitle:"WebRTC DataChannel (다음 루프에서 구현)",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"rounded-lg border border-slate-800 p-4",children:[(0,n.jsx)("div",{className:"text-sm mb-3",children:"Pairing QR"}),(0,n.jsx)("div",{className:"bg-white p-4 inline-block rounded-lg",children:(0,n.jsx)(r.Qd,{value:s,size:160,level:"M"})}),(0,n.jsx)("div",{className:"mt-3 text-xs text-slate-500",children:"다른 기기에서 스캔하여 연결"})]}),(0,n.jsxs)("div",{className:"rounded-lg border border-slate-800 p-4",children:[(0,n.jsx)("div",{className:"text-sm mb-3",children:"연결 상태"}),(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:["connected"===e?(0,n.jsx)(c.Z,{className:"h-8 w-8 text-green-400"}):"connecting"===e?(0,n.jsx)(l.Z,{className:"h-8 w-8 text-yellow-400 animate-spin"}):(0,n.jsx)(d.Z,{className:"h-8 w-8 text-slate-500"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:"connected"===e?"연결됨":"connecting"===e?"연결 중...":"연결 안 됨"}),(0,n.jsx)("div",{className:"text-xs text-slate-500",children:"disconnected"===e&&"QR 스캔 또는 토큰 입력"})]})]}),(0,n.jsx)(i.zx,{variant:"secondary",size:"sm",disabled:!0,children:"수동 연결 (준비 중)"})]})]})}),(0,n.jsxs)(i.Zb,{title:"자동화 연결",subtitle:"외부 데이터 소스 연동",children:[(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(p,{icon:u.Z,label:"n8n Webhook",description:"n8n 워크플로우에서 데이터 수신",enabled:v.n8nWebhook,onChange:()=>N("n8nWebhook")}),(0,n.jsx)(p,{icon:x.Z,label:"Google Sheets 연동",description:"시트 데이터 자동 가져오기",enabled:v.sheetsImport,onChange:()=>N("sheetsImport")}),(0,n.jsx)(p,{icon:g.Z,label:"이메일 파싱",description:"결정 필요 이메일 자동 감지",enabled:v.emailParse,onChange:()=>N("emailParse")}),(0,n.jsx)(p,{icon:m.Z,label:"알림",description:"결정 필요 항목 알림",enabled:v.notifications,onChange:()=>N("notifications")})]}),(0,n.jsx)("div",{className:"mt-4 text-xs text-slate-500",children:"* 외부 연동은 클라이언트 사이드에서만 처리됩니다. 서버 저장 없음."})]}),(0,n.jsx)(i.Zb,{title:"데이터 관리",subtitle:"로컬 Ledger 백업 및 복원",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("button",{onClick:w,className:"flex items-center gap-3 rounded-lg border border-slate-700 p-4 hover:bg-slate-800 transition-colors",children:[(0,n.jsx)(f.Z,{className:"h-5 w-5 text-green-400"}),(0,n.jsxs)("div",{className:"text-left",children:[(0,n.jsx)("div",{className:"font-medium",children:"내보내기"}),(0,n.jsx)("div",{className:"text-xs text-slate-500",children:"JSON 파일로 백업"})]})]}),(0,n.jsxs)("button",{onClick:y,className:"flex items-center gap-3 rounded-lg border border-slate-700 p-4 hover:bg-slate-800 transition-colors",children:[(0,n.jsx)(h.Z,{className:"h-5 w-5 text-blue-400"}),(0,n.jsxs)("div",{className:"text-left",children:[(0,n.jsx)("div",{className:"font-medium",children:"가져오기"}),(0,n.jsx)("div",{className:"text-xs text-slate-500",children:"JSON 파일에서 복원"})]})]})]})}),(0,n.jsx)(i.Zb,{title:"보안 상태",children:(0,n.jsxs)("div",{className:"flex items-center gap-4 rounded-lg border border-green-500/30 bg-green-500/10 p-4",children:[(0,n.jsx)(b.Z,{className:"h-8 w-8 text-green-400"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium text-green-400",children:"Local Only 모드"}),(0,n.jsx)("div",{className:"text-sm text-slate-400",children:"모든 데이터는 이 기기의 IndexedDB에만 저장됩니다."}),(0,n.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"서버 전송 없음 \xb7 API Route 없음 \xb7 DB 커넥터 없음"})]})]})})]})}function p(e){let{icon:t,label:s,description:a,enabled:r,onChange:i}=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-800 p-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(t,{className:"h-5 w-5 ".concat(r?"text-green-400":"text-slate-500")}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:s}),(0,n.jsx)("div",{className:"text-xs text-slate-500",children:a})]})]}),(0,n.jsx)("button",{onClick:i,className:"relative h-6 w-11 rounded-full transition-colors ".concat(r?"bg-green-500":"bg-slate-700"),children:(0,n.jsx)("span",{className:"absolute top-1 h-4 w-4 rounded-full bg-white transition-transform ".concat(r?"left-6":"left-1")})})]})}},7683:function(e,t,s){"use strict";s.d(t,{Ct:function(){return o},Zb:function(){return r},zx:function(){return i}});var n=s(57437),a=s(94508);function r(e){let{children:t,className:s,title:r,subtitle:i,action:o}=e;return(0,n.jsxs)("div",{className:(0,a.cn)("rounded-xl border border-slate-800 bg-slate-900/50 p-5",s),children:[(r||o)&&(0,n.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,n.jsxs)("div",{children:[r&&(0,n.jsx)("div",{className:"text-sm font-medium text-slate-400",children:r}),i&&(0,n.jsx)("div",{className:"mt-1 text-xs text-slate-500",children:i})]}),o]}),t]})}function i(e){let{children:t,variant:s="secondary",size:r="md",className:i,...o}=e;return(0,n.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors","disabled:opacity-50 disabled:pointer-events-none",{"bg-slate-100 text-slate-900 hover:bg-slate-200":"primary"===s,"border border-slate-700 text-slate-300 hover:bg-slate-800":"secondary"===s,"text-slate-400 hover:text-slate-200 hover:bg-slate-800/50":"ghost"===s},{"px-3 py-1.5 text-xs":"sm"===r,"px-4 py-2 text-sm":"md"===r,"px-6 py-3 text-base":"lg"===r},i),...o,children:t})}function o(e){let{children:t,variant:s="default"}=e;return(0,n.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",{"bg-slate-700 text-slate-300":"default"===s,"bg-green-500/20 text-green-400":"success"===s,"bg-yellow-500/20 text-yellow-400":"warning"===s,"bg-red-500/20 text-red-400":"error"===s}),children:t})}},48934:function(e,t,s){"use strict";s.r(t),s.d(t,{AutusLedger:function(){return a},exportLedger:function(){return u},getActiveTasks:function(){return o},getLedgerStats:function(){return d},getLogsForTask:function(){return c},getProofsForRelated:function(){return l},getRecentDecisions:function(){return i},importLedger:function(){return x},ledger:function(){return r}});var n=s(35966);class a extends n.ZP{constructor(){super("autus_sovereign_ledger"),this.version(1).stores({nodes:"node_id, kind, tier, created_at",motions:"motion_id, kind, source_node_id, target_node_id, created_at",decisions:"event_id, decision, created_at, linked_task_id",tasks:"task_id, status, priority, source_decision_id, created_at, due_at",actionLogs:"log_id, task_id, action_status, logged_at",proofs:"proof_id, related_id, related_type, kind, created_at",logic:"config_id, updated_at",syncMessages:"message_id, type, sender_id, created_at"})}}let r=new a;async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return r.decisions.orderBy("created_at").reverse().limit(e).toArray()}async function o(){return r.tasks.where("status").anyOf(["pending","active"]).toArray()}async function c(e){return r.actionLogs.where("task_id").equals(e).toArray()}async function l(e){return r.proofs.where("related_id").equals(e).toArray()}async function d(){let[e,t,s,n]=await Promise.all([r.decisions.count(),r.tasks.count(),r.actionLogs.count(),r.proofs.count()]);return{decisions:e,tasks:t,logs:s,proofs:n,delayedLogs:await r.actionLogs.where("action_status").equals("delayed").count(),needsDecisionLogs:await r.actionLogs.where("action_status").equals("needs_decision").count(),completedLogs:await r.actionLogs.where("action_status").equals("completed").count()}}async function u(){return JSON.stringify({version:1,exported_at:Date.now(),nodes:await r.nodes.toArray(),motions:await r.motions.toArray(),decisions:await r.decisions.toArray(),tasks:await r.tasks.toArray(),actionLogs:await r.actionLogs.toArray(),proofs:await r.proofs.toArray(),logic:await r.logic.toArray()},null,2)}async function x(e){let t=JSON.parse(e);await r.transaction("rw",[r.nodes,r.motions,r.decisions,r.tasks,r.actionLogs,r.proofs,r.logic],async()=>{var e,s,n,a,i,o,c;await Promise.all([r.nodes.clear(),r.motions.clear(),r.decisions.clear(),r.tasks.clear(),r.actionLogs.clear(),r.proofs.clear(),r.logic.clear()]),(null===(e=t.nodes)||void 0===e?void 0:e.length)&&await r.nodes.bulkAdd(t.nodes),(null===(s=t.motions)||void 0===s?void 0:s.length)&&await r.motions.bulkAdd(t.motions),(null===(n=t.decisions)||void 0===n?void 0:n.length)&&await r.decisions.bulkAdd(t.decisions),(null===(a=t.tasks)||void 0===a?void 0:a.length)&&await r.tasks.bulkAdd(t.tasks),(null===(i=t.actionLogs)||void 0===i?void 0:i.length)&&await r.actionLogs.bulkAdd(t.actionLogs),(null===(o=t.proofs)||void 0===o?void 0:o.length)&&await r.proofs.bulkAdd(t.proofs),(null===(c=t.logic)||void 0===c?void 0:c.length)&&await r.logic.bulkAdd(t.logic)})}},94508:function(e,t,s){"use strict";s.d(t,{Pq:function(){return d},SY:function(){return i},_$:function(){return o},cn:function(){return r},jm:function(){return l},z2:function(){return c}});var n=s(61994),a=s(53335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,n.W)(t))}function i(e){let t=Math.floor(Math.floor((Date.now()-e)/1e3)/60),s=Math.floor(t/60),n=Math.floor(s/24);return n>0?"".concat(n,"일 전"):s>0?"".concat(s,"시간 전"):t>0?"".concat(t,"분 전"):"방금 전"}function o(e){switch(e){case"high":return"text-red-400";case"medium":return"text-yellow-400";default:return"text-slate-400"}}function c(e){switch(e){case"completed":case"done":return"text-green-400";case"delayed":return"text-red-400";case"needs_decision":return"text-yellow-400";case"in_progress":case"active":return"text-blue-400";case"pending":default:return"text-slate-400";case"cancelled":return"text-slate-500"}}function l(e){switch(e){case"do":return"실행";case"delegate":return"위임";case"stop":return"중단";default:return e}}function d(e){switch(e){case"do":return"bg-green-500/20 text-green-400 border-green-500/30";case"delegate":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"stop":return"bg-slate-500/20 text-slate-400 border-slate-500/30";default:return"bg-slate-500/20 text-slate-400"}}}},function(e){e.O(0,[216,744],function(){return e(e.s=17413)}),_N_E=e.O()}]);