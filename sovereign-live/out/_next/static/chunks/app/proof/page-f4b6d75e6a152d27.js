(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{74499:function(e,t,s){Promise.resolve().then(s.bind(s,29162))},29162:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var a=s(57437),l=s(2265),n=s(66365),i=s(48934);async function r(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function o(e){let t=await e.arrayBuffer();return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}var d=s(48736),c=s(29985),u=s(65698),x=s(41217),m=s(88906),g=s(17689),h=s(91723),f=s(92934);let p=[{id:"all",label:"전체"},{id:"finance",label:"Finance"},{id:"legal",label:"Legal"},{id:"hr",label:"HR"}];function v(){var e,t,s,v,j,y;let[N,w]=(0,l.useState)("all"),[b,_]=(0,l.useState)("all"),k=(0,l.useRef)(null),A=(0,n.yR)(()=>i.ledger.proofs.orderBy("created_at").reverse().toArray(),[]),L=(0,n.yR)(async()=>{let e=await i.ledger.proofs.toArray();return{total:e.length,files:e.filter(e=>"file"===e.kind).length,links:e.filter(e=>"link"===e.kind).length,notes:e.filter(e=>"note"===e.kind).length}},[]);async function Z(e){var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;let a=await o(s),l=Date.now();await i.ledger.proofs.add({proof_id:"proof_".concat(l,"_").concat(Math.random().toString(36).slice(2,8)),related_id:"manual",related_type:"task",kind:"file",label:s.name,payload:JSON.stringify({name:s.name,size:s.size,type:s.type}),sha256:a,created_at:l}),e.target.value=""}async function S(){let e=prompt("증빙 URL을 입력하세요:");if(!e)return;let t=prompt("라벨을 입력하세요:",e),s=Date.now(),a=await r(e+s);await i.ledger.proofs.add({proof_id:"proof_".concat(s,"_").concat(Math.random().toString(36).slice(2,8)),related_id:"manual",related_type:"task",kind:"link",label:t||e,payload:e,sha256:a,created_at:s})}async function R(){let e=prompt("노트 내용을 입력하세요:");if(!e)return;let t=Date.now(),s=await r(e);await i.ledger.proofs.add({proof_id:"proof_".concat(t,"_").concat(Math.random().toString(36).slice(2,8)),related_id:"manual",related_type:"task",kind:"note",label:e.slice(0,50)+(e.length>50?"...":""),payload:e,sha256:s,created_at:t})}async function D(){let e=await i.ledger.proofs.toArray(),t=0,s=0;for(let a of e)("note"===a.kind?await r(a.payload):a.sha256)===a.sha256?t++:s++;alert("검증 완료\n✓ 유효: ".concat(t,"\n✗ 무효: ").concat(s))}return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-3",children:["Proof Dock",(0,a.jsx)("span",{className:"text-lg font-normal text-slate-400",children:"(불변의 증빙 소전트)"})]})}),(0,a.jsxs)("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-slate-900 rounded-lg font-medium hover:bg-green-400 transition-colors",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"VERIFY ALL PROOFS"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsxs)("div",{className:"col-span-2 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-3",children:"Filters"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-slate-400",children:"By Category (Finance, Legal, HR)"}),(0,a.jsx)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm",children:p.map(e=>(0,a.jsx)("option",{value:e.id,children:e.label},e.id))})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-slate-400",children:"Date Range Slider"}),(0,a.jsx)("input",{type:"range",min:0,max:100,className:"w-full accent-green-500"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:["총 ",null!==(e=null==L?void 0:L.total)&&void 0!==e?e:0,"건"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:null!==(t=null==L?void 0:L.files)&&void 0!==t?t:0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:null!==(s=null==L?void 0:L.links)&&void 0!==s?s:0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-slate-400",children:[(0,a.jsx)(u.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:null!==(v=null==L?void 0:L.notes)&&void 0!==v?v:0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("input",{ref:k,type:"file",className:"hidden",onChange:Z}),(0,a.jsxs)("button",{onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.click()},className:"w-full flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm hover:bg-slate-700",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"})," 파일"]}),(0,a.jsxs)("button",{onClick:S,className:"w-full flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm hover:bg-slate-700",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4"})," 링크"]}),(0,a.jsxs)("button",{onClick:R,className:"w-full flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm hover:bg-slate-700",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"})," 노트"]})]})]}),(0,a.jsx)("div",{className:"col-span-6",children:(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 text-green-400"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Log_Hash ID: #AUTUS-PROOF-XYZ-789"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-4 top-0 bottom-0 w-px bg-slate-700"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(null!=A?A:[]).map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"relative flex gap-4",children:[(0,a.jsxs)("div",{className:"relative z-10 flex-shrink-0",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-500/20 border-2 border-green-500 flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"h-3 w-3 text-green-400"})}),t<(null!==(s=null==A?void 0:A.length)&&void 0!==s?s:0)-1&&(0,a.jsx)("div",{className:"absolute top-8 left-1/2 -translate-x-1/2 h-8 flex items-center",children:(0,a.jsx)(x.Z,{className:"h-3 w-3 text-slate-600"})})]}),(0,a.jsxs)("div",{className:"flex-1 rounded-lg border border-slate-700 bg-slate-800/50 p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-slate-700",children:function(e){switch(e){case"file":return(0,a.jsx)(d.Z,{className:"h-4 w-4"});case"link":return(0,a.jsx)(c.Z,{className:"h-4 w-4"});case"note":return(0,a.jsx)(u.Z,{className:"h-4 w-4"});default:return(0,a.jsx)(x.Z,{className:"h-4 w-4"})}}(e.kind)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:"file"===e.kind?"Project Preset Carried Signed":"link"===e.kind?"External Reference":"Internal Note"})]})]}),"file"===e.kind&&(0,a.jsx)("div",{className:"w-12 h-12 rounded bg-slate-700 flex items-center justify-center",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-slate-500"})})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-4 text-xs text-slate-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.Z,{className:"h-3 w-3"}),new Date(e.created_at).toLocaleDateString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,a.jsxs)("span",{className:"font-mono text-green-400/70",children:["#",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e.slice(0,t)+"…"+e.slice(-4)}(e.sha256,8)]})]})]})]},e.proof_id)}),(null!==(j=null==A?void 0:A.length)&&void 0!==j?j:0)===0&&(0,a.jsx)("div",{className:"text-center py-12 text-slate-500",children:"아직 증빙이 없습니다. 파일, 링크, 또는 노트를 추가하세요."})]})]})]})}),(0,a.jsx)("div",{className:"col-span-4",children:(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900 p-5",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-4",children:"Audit Trail"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-slate-800/50",children:[(0,a.jsx)("div",{className:"text-xs text-slate-400 mb-2",children:"Recent Activities"}),(0,a.jsx)("div",{className:"text-sm text-slate-300 leading-relaxed",children:"Ha chart aa ha narurat beautiful beautiful deslt test attractive tempot protector crown large talk 5th 30% test DOdl 5tructts ta! Hopahan tauss alwas!"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg border border-green-500/30 bg-green-500/5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 text-green-400"}),(0,a.jsx)("span",{className:"text-sm text-green-400",children:"Data Integrity: 100%"})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:["All ",null!==(y=null==L?void 0:L.total)&&void 0!==y?y:0," proofs verified"]})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-green-400",children:[(0,a.jsx)(f.Z,{className:"h-3 w-3"}),"All evidence is encrypted & stored locally on device. Data integrity: 100%"]})]})}},48934:function(e,t,s){"use strict";s.r(t),s.d(t,{AutusLedger:function(){return l},exportLedger:function(){return u},getActiveTasks:function(){return r},getLedgerStats:function(){return c},getLogsForTask:function(){return o},getProofsForRelated:function(){return d},getRecentDecisions:function(){return i},importLedger:function(){return x},ledger:function(){return n}});var a=s(35966);class l extends a.ZP{constructor(){super("autus_sovereign_ledger"),this.version(1).stores({nodes:"node_id, kind, tier, created_at",motions:"motion_id, kind, source_node_id, target_node_id, created_at",decisions:"event_id, decision, created_at, linked_task_id",tasks:"task_id, status, priority, source_decision_id, created_at, due_at",actionLogs:"log_id, task_id, action_status, logged_at",proofs:"proof_id, related_id, related_type, kind, created_at",logic:"config_id, updated_at",syncMessages:"message_id, type, sender_id, created_at"})}}let n=new l;async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return n.decisions.orderBy("created_at").reverse().limit(e).toArray()}async function r(){return n.tasks.where("status").anyOf(["pending","active"]).toArray()}async function o(e){return n.actionLogs.where("task_id").equals(e).toArray()}async function d(e){return n.proofs.where("related_id").equals(e).toArray()}async function c(){let[e,t,s,a]=await Promise.all([n.decisions.count(),n.tasks.count(),n.actionLogs.count(),n.proofs.count()]);return{decisions:e,tasks:t,logs:s,proofs:a,delayedLogs:await n.actionLogs.where("action_status").equals("delayed").count(),needsDecisionLogs:await n.actionLogs.where("action_status").equals("needs_decision").count(),completedLogs:await n.actionLogs.where("action_status").equals("completed").count()}}async function u(){return JSON.stringify({version:1,exported_at:Date.now(),nodes:await n.nodes.toArray(),motions:await n.motions.toArray(),decisions:await n.decisions.toArray(),tasks:await n.tasks.toArray(),actionLogs:await n.actionLogs.toArray(),proofs:await n.proofs.toArray(),logic:await n.logic.toArray()},null,2)}async function x(e){let t=JSON.parse(e);await n.transaction("rw",[n.nodes,n.motions,n.decisions,n.tasks,n.actionLogs,n.proofs,n.logic],async()=>{var e,s,a,l,i,r,o;await Promise.all([n.nodes.clear(),n.motions.clear(),n.decisions.clear(),n.tasks.clear(),n.actionLogs.clear(),n.proofs.clear(),n.logic.clear()]),(null===(e=t.nodes)||void 0===e?void 0:e.length)&&await n.nodes.bulkAdd(t.nodes),(null===(s=t.motions)||void 0===s?void 0:s.length)&&await n.motions.bulkAdd(t.motions),(null===(a=t.decisions)||void 0===a?void 0:a.length)&&await n.decisions.bulkAdd(t.decisions),(null===(l=t.tasks)||void 0===l?void 0:l.length)&&await n.tasks.bulkAdd(t.tasks),(null===(i=t.actionLogs)||void 0===i?void 0:i.length)&&await n.actionLogs.bulkAdd(t.actionLogs),(null===(r=t.proofs)||void 0===r?void 0:r.length)&&await n.proofs.bulkAdd(t.proofs),(null===(o=t.logic)||void 0===o?void 0:o.length)&&await n.logic.bulkAdd(t.logic)})}}},function(e){e.O(0,[216,744],function(){return e(e.s=74499)}),_N_E=e.O()}]);