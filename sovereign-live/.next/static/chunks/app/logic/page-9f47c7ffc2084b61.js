(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[917],{42408:function(e,t,s){Promise.resolve().then(s.bind(s,7580))},7580:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(57437),i=s(2265),n=s(66365),o=s(48934),l=s(98728),r=s(33276),d=s(73247);let c=[{id:"m1",label:"M (Mint)",description:"System + Prod? Revenue",x:100,y:80,type:"mint"},{id:"m2",label:"M (Tax)",description:"Admin Time + Fees",x:100,y:280,type:"mint"},{id:"t1",label:"T (Tax)",description:"V @ Admin Time + Fees",x:400,y:180,type:"tax"},{id:"s1",label:"Synergy (s)",description:"ex: P2P Interactions",x:400,y:350,type:"synergy"}],u=[{from:"m1",to:"t1"},{from:"m2",to:"t1"},{from:"t1",to:"s1"}],g=[{id:"financial",label:"Financial Loop",description:"Auto-Pay",enabled:!0,color:"green"},{id:"global",label:"Global Sync",description:"Translate",enabled:!0,color:"green"},{id:"onboarding",label:"Onboarding",description:"New Node Setup",enabled:!1,color:"slate"}];function x(){let[e,t]=(0,i.useState)(c),[s]=(0,i.useState)(u),[x,m]=(0,i.useState)(g),[h,p]=(0,i.useState)(null),[f,v]=(0,i.useState)(""),y=(0,i.useRef)(null),b=(0,n.yR)(async()=>{var e;return null!==(e=await o.ledger.logic.orderBy("updated_at").last())&&void 0!==e?e:null},[]);async function w(e,t){b&&await o.ledger.logic.add({...b,updated_at:Date.now(),weights:{...b.weights,[e]:t}})}return(0,i.useEffect)(()=>{let t=y.current;if(!t)return;let a=t.getContext("2d");if(!a)return;let i=window.devicePixelRatio||1,n=t.getBoundingClientRect();t.width=n.width*i,t.height=n.height*i,a.scale(i,i),a.fillStyle="#0f172a",a.fillRect(0,0,n.width,n.height),a.strokeStyle="#1e293b",a.lineWidth=1;for(let e=0;e<n.width;e+=40)a.beginPath(),a.moveTo(e,0),a.lineTo(e,n.height),a.stroke();for(let e=0;e<n.height;e+=40)a.beginPath(),a.moveTo(0,e),a.lineTo(n.width,e),a.stroke();s.forEach(t=>{let s=e.find(e=>e.id===t.from),i=e.find(e=>e.id===t.to);if(!s||!i)return;a.strokeStyle="#22c55e",a.lineWidth=2,a.beginPath();let n=(s.x+120+i.x)/2;a.moveTo(s.x+120,s.y+30),a.bezierCurveTo(n,s.y+30,n,i.y+30,i.x,i.y+30),a.stroke();let o=Math.atan2(i.y-s.y,i.x-s.x-120);a.fillStyle="#22c55e",a.beginPath(),a.moveTo(i.x,i.y+30),a.lineTo(i.x-10*Math.cos(o-.3),i.y+30-10*Math.sin(o-.3)),a.lineTo(i.x-10*Math.cos(o+.3),i.y+30-10*Math.sin(o+.3)),a.fill()})},[e,s]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Logic Map"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"V-Formula: Asset Growth Logic"})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("code",{className:"px-4 py-2 bg-slate-800 rounded-lg font-mono text-green-400",children:["V = (M - T) \xd7 (1 + s)",(0,a.jsx)("sup",{children:"t"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,a.jsx)("div",{className:"text-xs text-slate-500 uppercase tracking-wider mb-3",children:"Logic Map"}),["V-Digital Weights","Synergy Logic (s)","Automation Flows","Custom Events"].map((e,t)=>(0,a.jsxs)("button",{className:"w-full text-left px-3 py-2 rounded-lg text-sm flex items-center gap-2 ".concat(0===t?"bg-slate-800 text-white":"text-slate-400 hover:bg-slate-800/50"),children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),e]},e))]}),(0,a.jsx)("div",{className:"col-span-6 relative",children:(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-slate-800 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"V-Formula: Asset Growth Logic"}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{className:"p-1.5 rounded hover:bg-slate-800",children:(0,a.jsx)(r.Z,{className:"h-4 w-4 text-green-400"})})})]}),(0,a.jsxs)("div",{className:"relative h-[400px]",children:[(0,a.jsx)("canvas",{ref:y,className:"absolute inset-0 w-full h-full"}),e.map(e=>{var t,s;return(0,a.jsxs)("div",{className:"absolute cursor-pointer transition-all ".concat(h===e.id?"ring-2 ring-green-400":""),style:{left:e.x,top:e.y},onClick:()=>p(e.id),children:[(0,a.jsxs)("div",{className:"w-[120px] rounded-lg border border-green-500/50 bg-slate-800/90 p-3",children:[(0,a.jsx)("div",{className:"text-xs text-green-400 font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-[10px] text-slate-400 mt-1",children:e.description}),b&&("mint"===e.type||"tax"===e.type||"synergy"===e.type)&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("input",{type:"range",min:0,max:2,step:.1,value:null!==(t=b.weights[e.type])&&void 0!==t?t:1,onChange:t=>w(e.type,parseFloat(t.target.value)),className:"w-full h-1 accent-green-500"}),(0,a.jsxs)("div",{className:"text-[10px] text-right text-slate-500",children:["x",(null!==(s=b.weights[e.type])&&void 0!==s?s:1).toFixed(1)]})]})]}),(0,a.jsx)("div",{className:"absolute -right-1 top-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-green-500 border-2 border-slate-900"}),(0,a.jsx)("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-green-500 border-2 border-slate-900"})]},e.id)})]})]})}),(0,a.jsx)("div",{className:"col-span-4 space-y-4",children:(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900 p-5",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-4",children:"Automation Hub (n8n Integration)"}),(0,a.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"text-sm",children:[e.label,": ",(0,a.jsx)("span",{className:"text-green-400",children:e.description})]})}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void m(e=>e.map(e=>e.id===t?{...e,enabled:!e.enabled}:e))},className:"relative w-12 h-6 rounded-full transition-colors ".concat(e.enabled?"bg-green-500":"bg-slate-700"),children:(0,a.jsx)("div",{className:"absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ".concat(e.enabled?"left-7":"left-1")})})]},e.id))}),(0,a.jsxs)("div",{className:"mt-6 relative",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),(0,a.jsx)("input",{type:"text",placeholder:"Command Palette (/) for raw code editing",value:f,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-800 border border-slate-700 rounded-lg text-sm focus:outline-none focus:ring-1 focus:ring-green-500"})]}),b&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-slate-800/50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-[10px] font-mono text-slate-500 mb-2",children:"V = {M:".concat(b.weights.mint.toFixed(1),", T:").concat(b.weights.tax.toFixed(1),"} \xd7 (1+s)^t")}),(0,a.jsxs)("div",{className:"text-[10px] font-mono text-slate-600 break-all",children:["MAN:7ARV8V.OMP/AUTOV/TR3.4.ILB",(0,a.jsx)("br",{}),"MAS:7VERN.OMP/AUTGMTR3 GH4CQUBN3.AN4 QHD5 THO7",(0,a.jsx)("br",{}),"SLOVO"]})]})]})})]}),(0,a.jsx)("div",{className:"text-center text-xs text-green-400",children:"All changes are saved & processed locally. Full Sovereign Control"})]})}},48934:function(e,t,s){"use strict";s.r(t),s.d(t,{AutusLedger:function(){return i},exportLedger:function(){return u},getActiveTasks:function(){return l},getLedgerStats:function(){return c},getLogsForTask:function(){return r},getProofsForRelated:function(){return d},getRecentDecisions:function(){return o},importLedger:function(){return g},ledger:function(){return n}});var a=s(35966);class i extends a.ZP{constructor(){super("autus_sovereign_ledger"),this.version(1).stores({nodes:"node_id, kind, tier, created_at",motions:"motion_id, kind, source_node_id, target_node_id, created_at",decisions:"event_id, decision, created_at, linked_task_id",tasks:"task_id, status, priority, source_decision_id, created_at, due_at",actionLogs:"log_id, task_id, action_status, logged_at",proofs:"proof_id, related_id, related_type, kind, created_at",logic:"config_id, updated_at",syncMessages:"message_id, type, sender_id, created_at"})}}let n=new i;async function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return n.decisions.orderBy("created_at").reverse().limit(e).toArray()}async function l(){return n.tasks.where("status").anyOf(["pending","active"]).toArray()}async function r(e){return n.actionLogs.where("task_id").equals(e).toArray()}async function d(e){return n.proofs.where("related_id").equals(e).toArray()}async function c(){let[e,t,s,a]=await Promise.all([n.decisions.count(),n.tasks.count(),n.actionLogs.count(),n.proofs.count()]);return{decisions:e,tasks:t,logs:s,proofs:a,delayedLogs:await n.actionLogs.where("action_status").equals("delayed").count(),needsDecisionLogs:await n.actionLogs.where("action_status").equals("needs_decision").count(),completedLogs:await n.actionLogs.where("action_status").equals("completed").count()}}async function u(){return JSON.stringify({version:1,exported_at:Date.now(),nodes:await n.nodes.toArray(),motions:await n.motions.toArray(),decisions:await n.decisions.toArray(),tasks:await n.tasks.toArray(),actionLogs:await n.actionLogs.toArray(),proofs:await n.proofs.toArray(),logic:await n.logic.toArray()},null,2)}async function g(e){let t=JSON.parse(e);await n.transaction("rw",[n.nodes,n.motions,n.decisions,n.tasks,n.actionLogs,n.proofs,n.logic],async()=>{var e,s,a,i,o,l,r;await Promise.all([n.nodes.clear(),n.motions.clear(),n.decisions.clear(),n.tasks.clear(),n.actionLogs.clear(),n.proofs.clear(),n.logic.clear()]),(null===(e=t.nodes)||void 0===e?void 0:e.length)&&await n.nodes.bulkAdd(t.nodes),(null===(s=t.motions)||void 0===s?void 0:s.length)&&await n.motions.bulkAdd(t.motions),(null===(a=t.decisions)||void 0===a?void 0:a.length)&&await n.decisions.bulkAdd(t.decisions),(null===(i=t.tasks)||void 0===i?void 0:i.length)&&await n.tasks.bulkAdd(t.tasks),(null===(o=t.actionLogs)||void 0===o?void 0:o.length)&&await n.actionLogs.bulkAdd(t.actionLogs),(null===(l=t.proofs)||void 0===l?void 0:l.length)&&await n.proofs.bulkAdd(t.proofs),(null===(r=t.logic)||void 0===r?void 0:r.length)&&await n.logic.bulkAdd(t.logic)})}}},function(e){e.O(0,[216,744],function(){return e(e.s=42408)}),_N_E=e.O()}]);