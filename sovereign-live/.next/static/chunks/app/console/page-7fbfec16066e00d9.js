(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[443],{16364:function(e,t,s){Promise.resolve().then(s.bind(s,12241))},12241:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var a=s(57437),r=s(2265),l=s(73619),n=s(66365),o=s(48934);let i={do:{creates_task:!0,task_status:"active",requires_log:!0,requires_proof:!1},delegate:{creates_task:!0,task_status:"pending",requires_log:!0,requires_proof:!0},stop:{creates_task:!1,task_status:null,requires_log:!1,requires_proof:!1}};var c=s(94508),d=s(44794),u=s(95805),x=s(95252),g=s(11239),m=s(99397),b=s(41671),h=s(99388),f=s(92451),p=s(10407),v=s(91723),j=s(82023);let N=[{id:"product",label:"제품",icon:d.Z,color:"text-purple-400"},{id:"team",label:"팀",icon:u.Z,color:"text-blue-400"},{id:"funding",label:"자금",icon:x.Z,color:"text-green-400"},{id:"ops",label:"운영",icon:g.Z,color:"text-orange-400"}],y=[{title:"시리즈 A 투자 조건 협상",context:"VC에서 제안한 밸류에이션. 희석률 15% 조건.",category:"funding",urgency:90,suggestDelegate:!1},{title:"개발팀 2명 추가 채용",context:"런웨이 18개월. 인건비 월 1,200만원 증가.",category:"team",urgency:70,suggestDelegate:!0},{title:"신규 기능 로드맵 확정",context:"고객 요청 Top 3 기능. 개발 기간 3주.",category:"product",urgency:60,suggestDelegate:!1},{title:"사무실 임대 계약 갱신",context:"현 계약 2개월 후 만료. 10% 인상 제안.",category:"ops",urgency:50,suggestDelegate:!0},{title:"마케팅 예산 2배 증액",context:"CAC 개선을 위한 실험. 월 500만원 → 1000만원.",category:"funding",urgency:55,suggestDelegate:!0},{title:"핵심 개발자 스톡옵션 제안",context:"경쟁사 오퍼 대응. 0.5% 지분 제안.",category:"team",urgency:85,suggestDelegate:!1}];function _(){var e;let[t,s]=(0,r.useState)(0),[d,x]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[p,v]=(0,r.useState)(""),[j,_]=(0,r.useState)(""),[C,A]=(0,r.useState)("product"),[L,Z]=(0,r.useState)(null),D=(0,n.yR)(()=>o.ledger.decisions.orderBy("created_at").reverse().limit(10).toArray(),[]),q=d?y.filter(e=>e.category===d):y,S=q[t%q.length],P=N.find(e=>e.id===(null==S?void 0:S.category));async function M(e){let t=g?p:S.title,a=g?j:S.context;if(!t.trim())return;let r=Date.now(),n=(0,l.x0)(),c=i[e],d={event_id:n,created_at:r,title:t,context:a,decision:e,linked_task_id:void 0};if(c.creates_task){let e=(0,l.x0)();d.linked_task_id=e,await o.ledger.tasks.add({task_id:e,created_at:r,title:t,description:a,priority:"high",due_at:null,source_decision_id:n,status:c.task_status})}await o.ledger.decisions.add(d),Z({title:t,decision:e}),g?(f(!1),v(""),_("")):s(e=>(e+1)%q.length),"vibrate"in navigator&&navigator.vibrate("do"===e?[50]:"delegate"===e?[30,30]:[20])}return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Decision Console"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"창업자 결정 센터"})]}),(0,a.jsxs)("button",{onClick:()=>f(!g),className:"flex items-center gap-2 rounded-lg border border-slate-700 px-4 py-2 text-sm hover:bg-slate-800",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),g?"샘플 보기":"직접 입력"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>x(null),className:"rounded-lg px-3 py-2 text-sm transition-colors ".concat(d?"bg-slate-800 text-slate-400 hover:bg-slate-700":"bg-white text-slate-900"),children:"전체"}),N.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>x(e.id),className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm transition-colors ".concat(d===e.id?"bg-white text-slate-900":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:[(0,a.jsx)(t,{className:"h-4 w-4"}),e.label]},e.id)})]}),L&&(0,a.jsx)("div",{className:"rounded-xl border p-4 animate-fade-in ".concat((0,c.Pq)(L.decision)),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["do"===L.decision&&(0,a.jsx)(b.Z,{className:"h-4 w-4"}),"delegate"===L.decision&&(0,a.jsx)(u.Z,{className:"h-4 w-4"}),"stop"===L.decision&&(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"text-sm",children:['"',L.title,'" → ',(0,c.jm)(L.decision)]})]})}),g?(0,a.jsx)(k,{title:p,setTitle:v,context:j,setContext:_,category:C,setCategory:A,onCommit:M}):(0,a.jsx)(w,{item:S,category:P,onCommit:M,onPrev:()=>s(e=>(e-1+q.length)%q.length),onNext:()=>s(e=>(e+1)%q.length),currentIndex:t,totalCount:q.length}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-800 bg-slate-900/50 p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"최근 결정"}),(0,a.jsxs)("span",{className:"text-xs text-slate-500",children:[null!==(e=null==D?void 0:D.length)&&void 0!==e?e:0,"건"]})]}),D&&D.length>0?(0,a.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto scrollbar-thin",children:D.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-slate-800/50 p-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm truncate",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-slate-500",children:(0,c.SY)(e.created_at)})]}),(0,a.jsx)("div",{className:"text-xs px-2 py-1 rounded-full ".concat((0,c.Pq)(e.decision)),children:(0,c.jm)(e.decision)})]},e.event_id))}):(0,a.jsx)("div",{className:"text-center py-6 text-sm text-slate-500",children:"아직 결정이 없습니다"})]})]})}function w(e){var t,s;let{item:r,category:l,onCommit:n,onPrev:o,onNext:i,currentIndex:c,totalCount:x}=e,g=null!==(t=null==l?void 0:l.icon)&&void 0!==t?t:d.Z;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:o,className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 rounded-full bg-slate-800 p-2 hover:bg-slate-700",children:(0,a.jsx)(f.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:i,className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 rounded-full bg-slate-800 p-2 hover:bg-slate-700",children:(0,a.jsx)(p.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-gradient-to-br from-slate-900 to-slate-800 p-6 mx-8",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-full bg-slate-800 px-3 py-1 ".concat(null==l?void 0:l.color),children:[(0,a.jsx)(g,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-xs font-medium",children:null!==(s=null==l?void 0:l.label)&&void 0!==s?s:"일반"})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-500",children:[c+1," / ",x]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 ".concat(r.urgency>70?"text-red-400":r.urgency>50?"text-yellow-400":"text-slate-400")}),(0,a.jsx)("div",{className:"flex-1 h-1.5 rounded-full bg-slate-700",children:(0,a.jsx)("div",{className:"h-full rounded-full ".concat(r.urgency>70?"bg-red-500":r.urgency>50?"bg-yellow-500":"bg-slate-500"),style:{width:"".concat(r.urgency,"%")}})}),(0,a.jsxs)("span",{className:"text-xs text-slate-400",children:[r.urgency,"%"]})]}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:r.title}),(0,a.jsx)("p",{className:"text-sm text-slate-400 mb-6",children:r.context}),r.suggestDelegate&&(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-blue-500/10 border border-blue-500/30 px-3 py-2 mb-4",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 text-blue-400"}),(0,a.jsx)("span",{className:"text-xs text-blue-400",children:"\uD83D\uDCA1 위임 가능한 결정입니다"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("button",{onClick:()=>n("do"),className:"group relative rounded-xl bg-gradient-to-br from-green-500/20 to-green-600/20 border border-green-500/30 p-4 hover:border-green-500/60 transition-all",children:[(0,a.jsx)(b.Z,{className:"h-6 w-6 text-green-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),(0,a.jsx)("div",{className:"text-sm font-medium text-green-400",children:"실행"}),(0,a.jsx)("div",{className:"text-xs text-green-500/60 mt-1",children:"직접 처리"})]}),(0,a.jsxs)("button",{onClick:()=>n("delegate"),className:"group relative rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-600/20 border border-blue-500/30 p-4 hover:border-blue-500/60 transition-all",children:[(0,a.jsx)(u.Z,{className:"h-6 w-6 text-blue-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),(0,a.jsx)("div",{className:"text-sm font-medium text-blue-400",children:"위임"}),(0,a.jsx)("div",{className:"text-xs text-blue-500/60 mt-1",children:"팀에 맡기기"})]}),(0,a.jsxs)("button",{onClick:()=>n("stop"),className:"group relative rounded-xl bg-gradient-to-br from-slate-500/20 to-slate-600/20 border border-slate-500/30 p-4 hover:border-slate-500/60 transition-all",children:[(0,a.jsx)(h.Z,{className:"h-6 w-6 text-slate-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),(0,a.jsx)("div",{className:"text-sm font-medium text-slate-400",children:"중단"}),(0,a.jsx)("div",{className:"text-xs text-slate-500/60 mt-1",children:"지금은 아님"})]})]}),(0,a.jsx)("div",{className:"mt-4 text-center text-xs text-slate-600",children:"선택은 기록됩니다. 되돌리기 없음."})]})]})}function k(e){let{title:t,setTitle:s,context:r,setContext:l,category:n,setCategory:o,onCommit:i}=e;return(0,a.jsxs)("div",{className:"rounded-2xl border border-slate-700 bg-gradient-to-br from-slate-900 to-slate-800 p-6",children:[(0,a.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-500 mb-2 block",children:"카테고리"}),(0,a.jsx)("div",{className:"flex gap-2",children:N.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>o(e.id),className:"flex items-center gap-2 rounded-lg px-3 py-2 text-sm ".concat(n===e.id?"bg-slate-700 text-white":"bg-slate-800/50 text-slate-400"),children:[(0,a.jsx)(t,{className:"h-4 w-4"}),e.label]},e.id)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-500 mb-2 block",children:"결정 항목"}),(0,a.jsx)("input",{type:"text",placeholder:"결정이 필요한 항목을 입력하세요",value:t,onChange:e=>s(e.target.value),className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-4 py-3 focus:border-slate-600 focus:outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs text-slate-500 mb-2 block",children:"배경/컨텍스트"}),(0,a.jsx)("textarea",{placeholder:"관련 정보, 숫자, 제약 조건 등",value:r,onChange:e=>l(e.target.value),rows:2,className:"w-full rounded-lg border border-slate-700 bg-slate-800 px-4 py-3 focus:border-slate-600 focus:outline-none resize-none"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("button",{onClick:()=>i("do"),disabled:!t.trim(),className:"rounded-xl bg-green-500/20 border border-green-500/30 p-4 text-green-400 hover:bg-green-500/30 disabled:opacity-50",children:[(0,a.jsx)(b.Z,{className:"h-6 w-6 mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"실행"})]}),(0,a.jsxs)("button",{onClick:()=>i("delegate"),disabled:!t.trim(),className:"rounded-xl bg-blue-500/20 border border-blue-500/30 p-4 text-blue-400 hover:bg-blue-500/30 disabled:opacity-50",children:[(0,a.jsx)(u.Z,{className:"h-6 w-6 mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"위임"})]}),(0,a.jsxs)("button",{onClick:()=>i("stop"),disabled:!t.trim(),className:"rounded-xl bg-slate-500/20 border border-slate-500/30 p-4 text-slate-400 hover:bg-slate-500/30 disabled:opacity-50",children:[(0,a.jsx)(h.Z,{className:"h-6 w-6 mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:"중단"})]})]})]})}},48934:function(e,t,s){"use strict";s.r(t),s.d(t,{AutusLedger:function(){return r},exportLedger:function(){return u},getActiveTasks:function(){return o},getLedgerStats:function(){return d},getLogsForTask:function(){return i},getProofsForRelated:function(){return c},getRecentDecisions:function(){return n},importLedger:function(){return x},ledger:function(){return l}});var a=s(35966);class r extends a.ZP{constructor(){super("autus_sovereign_ledger"),this.version(1).stores({nodes:"node_id, kind, tier, created_at",motions:"motion_id, kind, source_node_id, target_node_id, created_at",decisions:"event_id, decision, created_at, linked_task_id",tasks:"task_id, status, priority, source_decision_id, created_at, due_at",actionLogs:"log_id, task_id, action_status, logged_at",proofs:"proof_id, related_id, related_type, kind, created_at",logic:"config_id, updated_at",syncMessages:"message_id, type, sender_id, created_at"})}}let l=new r;async function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return l.decisions.orderBy("created_at").reverse().limit(e).toArray()}async function o(){return l.tasks.where("status").anyOf(["pending","active"]).toArray()}async function i(e){return l.actionLogs.where("task_id").equals(e).toArray()}async function c(e){return l.proofs.where("related_id").equals(e).toArray()}async function d(){let[e,t,s,a]=await Promise.all([l.decisions.count(),l.tasks.count(),l.actionLogs.count(),l.proofs.count()]);return{decisions:e,tasks:t,logs:s,proofs:a,delayedLogs:await l.actionLogs.where("action_status").equals("delayed").count(),needsDecisionLogs:await l.actionLogs.where("action_status").equals("needs_decision").count(),completedLogs:await l.actionLogs.where("action_status").equals("completed").count()}}async function u(){return JSON.stringify({version:1,exported_at:Date.now(),nodes:await l.nodes.toArray(),motions:await l.motions.toArray(),decisions:await l.decisions.toArray(),tasks:await l.tasks.toArray(),actionLogs:await l.actionLogs.toArray(),proofs:await l.proofs.toArray(),logic:await l.logic.toArray()},null,2)}async function x(e){let t=JSON.parse(e);await l.transaction("rw",[l.nodes,l.motions,l.decisions,l.tasks,l.actionLogs,l.proofs,l.logic],async()=>{var e,s,a,r,n,o,i;await Promise.all([l.nodes.clear(),l.motions.clear(),l.decisions.clear(),l.tasks.clear(),l.actionLogs.clear(),l.proofs.clear(),l.logic.clear()]),(null===(e=t.nodes)||void 0===e?void 0:e.length)&&await l.nodes.bulkAdd(t.nodes),(null===(s=t.motions)||void 0===s?void 0:s.length)&&await l.motions.bulkAdd(t.motions),(null===(a=t.decisions)||void 0===a?void 0:a.length)&&await l.decisions.bulkAdd(t.decisions),(null===(r=t.tasks)||void 0===r?void 0:r.length)&&await l.tasks.bulkAdd(t.tasks),(null===(n=t.actionLogs)||void 0===n?void 0:n.length)&&await l.actionLogs.bulkAdd(t.actionLogs),(null===(o=t.proofs)||void 0===o?void 0:o.length)&&await l.proofs.bulkAdd(t.proofs),(null===(i=t.logic)||void 0===i?void 0:i.length)&&await l.logic.bulkAdd(t.logic)})}},94508:function(e,t,s){"use strict";s.d(t,{Pq:function(){return d},SY:function(){return n},_$:function(){return o},cn:function(){return l},jm:function(){return c},z2:function(){return i}});var a=s(61994),r=s(53335);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}function n(e){let t=Math.floor(Math.floor((Date.now()-e)/1e3)/60),s=Math.floor(t/60),a=Math.floor(s/24);return a>0?"".concat(a,"일 전"):s>0?"".concat(s,"시간 전"):t>0?"".concat(t,"분 전"):"방금 전"}function o(e){switch(e){case"high":return"text-red-400";case"medium":return"text-yellow-400";default:return"text-slate-400"}}function i(e){switch(e){case"completed":case"done":return"text-green-400";case"delayed":return"text-red-400";case"needs_decision":return"text-yellow-400";case"in_progress":case"active":return"text-blue-400";case"pending":default:return"text-slate-400";case"cancelled":return"text-slate-500"}}function c(e){switch(e){case"do":return"실행";case"delegate":return"위임";case"stop":return"중단";default:return e}}function d(e){switch(e){case"do":return"bg-green-500/20 text-green-400 border-green-500/30";case"delegate":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"stop":return"bg-slate-500/20 text-slate-400 border-slate-500/30";default:return"bg-slate-500/20 text-slate-400"}}}},function(e){e.O(0,[216,744],function(){return e(e.s=16364)}),_N_E=e.O()}]);