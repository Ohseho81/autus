openapi: 3.0.0
info:
  title: AUTUS Unified Data OS API
  description: |
    AUTUS API based on benchmarking from Apple, Google, Tesla, Palantir, ByteDance, OpenAI + Philosophers.
    
    ## Layers
    - **Sovereign**: Privacy-by-Architecture (Apple)
    - **Federated**: Federated Learning (Google)
    - **Events**: Reality Event Compression (Tesla)
    - **Graph**: Context Graph Model (Palantir)
    - **Impact**: Impact Prediction Engine (ByteDance)
    - **Telemetry**: Behavior Signal Telemetry (OpenAI)
    - **Philosophy**: Identity/Intent Models
  version: 1.0.0
  contact:
    name: AUTUS Team

servers:
  - url: http://127.0.0.1:8003
    description: Local Development

paths:
  # ========== SOVEREIGN (Apple) ==========
  /sovereign/local/process:
    post:
      tags: [Sovereign]
      summary: Process data locally on device
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                raw_data: { type: object }
                process_type: { type: string }
      responses:
        '200':
          description: Processed data
          content:
            application/json:
              schema:
                type: object
                properties:
                  processed_data: { type: object }
                  level: { type: string, enum: [L0, L1, L2, L3] }

  /sovereign/local/delete:
    delete:
      tags: [Sovereign]
      summary: Delete local data
      parameters:
        - name: data_id
          in: query
          required: true
          schema: { type: string }
      responses:
        '200':
          description: Deletion status

  /sovereign/privacy/status:
    get:
      tags: [Sovereign]
      summary: Get privacy status and consent list
      responses:
        '200':
          description: Privacy status
          content:
            application/json:
              schema:
                type: object
                properties:
                  consent_list: { type: array, items: { type: object } }
                  data_policy: { type: string }
                  audit_log: { type: array, items: { type: object } }

  # ========== FEDERATED (Google) ==========
  /twin/federated/update:
    post:
      tags: [Federated]
      summary: Submit local gradient update
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                gradient: { type: object }
                model_version: { type: string }
      responses:
        '200':
          description: Update accepted

  /twin/federated/aggregate:
    post:
      tags: [Federated]
      summary: Aggregate gradients from multiple devices
      responses:
        '200':
          description: Aggregated model

  /twin/federated/model:
    get:
      tags: [Federated]
      summary: Get current model
      responses:
        '200':
          description: Current model with version

  # ========== EVENTS (Tesla) ==========
  /events/ingest:
    post:
      tags: [Events]
      summary: Ingest raw event
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                event_type: { type: string }
                payload: { type: object }
                timestamp: { type: string, format: date-time }
      responses:
        '200':
          description: Event ingested

  /events/compress:
    post:
      tags: [Events]
      summary: Compress events into vector summary
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                event_ids: { type: array, items: { type: string } }
                window_size: { type: string, enum: [1s, 5s, 30s] }
      responses:
        '200':
          description: Compressed vector

  /events/twin-update:
    post:
      tags: [Events]
      summary: Update Twin with compressed events
      responses:
        '200':
          description: Graph updated

  # ========== GRAPH (Palantir) ==========
  /graph/node/add:
    post:
      tags: [Graph]
      summary: Add node to graph
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                type: { type: string, enum: [User, City, Pack, Workflow, Event] }
                properties: { type: object }
      responses:
        '200':
          description: Node added

  /graph/edge/add:
    post:
      tags: [Graph]
      summary: Add edge to graph
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                from_id: { type: string }
                to_id: { type: string }
                edge_type: { type: string, enum: [influence, affects, depends_on, produces] }
      responses:
        '200':
          description: Edge added

  /graph/ontology/validate:
    post:
      tags: [Graph]
      summary: Validate graph against ontology
      responses:
        '200':
          description: Validation result

  /graph/query:
    post:
      tags: [Graph]
      summary: Query the graph
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                query: { type: string }
      responses:
        '200':
          description: Query results

  # ========== IMPACT (ByteDance) ==========
  /impact/predict:
    post:
      tags: [Impact]
      summary: Predict impact of actions
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user_id: { type: string }
                context: { type: object }
      responses:
        '200':
          description: Predictions

  /impact/update:
    post:
      tags: [Impact]
      summary: Update model with feedback
      responses:
        '200':
          description: Model updated

  /impact/ranking:
    get:
      tags: [Impact]
      summary: Get ranked recommendations
      parameters:
        - name: user_id
          in: query
          required: true
          schema: { type: string }
      responses:
        '200':
          description: Ranked items

  /impact/improvement-score:
    get:
      tags: [Impact]
      summary: Get knowledge improvement score (Deutsch)
      responses:
        '200':
          description: Improvement metrics

  # ========== TELEMETRY (OpenAI) ==========
  /telemetry/pack:
    post:
      tags: [Telemetry]
      summary: Log pack telemetry signal
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                pack_id: { type: string }
                signal_type: { type: string }
                value: { type: number }
      responses:
        '200':
          description: Signal logged

  /telemetry/workflow:
    post:
      tags: [Telemetry]
      summary: Log workflow telemetry signal
      responses:
        '200':
          description: Signal logged

  /telemetry/summary:
    get:
      tags: [Telemetry]
      summary: Get aggregated telemetry summary
      responses:
        '200':
          description: Summary signals

  # ========== PHILOSOPHY ==========
  /identity/update-intention:
    post:
      tags: [Philosophy]
      summary: Update intention vector (Arendt)
      responses:
        '200':
          description: Intention updated

  /universe/feedback-loop:
    post:
      tags: [Philosophy]
      summary: Trigger feedback loop (Luhmann)
      responses:
        '200':
          description: Feedback processed

  /twin/render:
    get:
      tags: [Philosophy]
      summary: Render Twin visualization (McLuhan)
      responses:
        '200':
          description: Render data

components:
  schemas:
    DataLevel:
      type: string
      enum: [L0, L1, L2, L3]
      description: |
        - L0: Raw data (never leaves device)
        - L1: Local processed (user owned)
        - L2: Summary (server allowed)
        - L3: Metrics (server allowed)
    
    EntityType:
      type: string
      enum: [User, City, Pack, Workflow, Event]
    
    EdgeType:
      type: string
      enum: [influence, affects, depends_on, produces]

tags:
  - name: Sovereign
    description: Apple Privacy-by-Architecture
  - name: Federated
    description: Google Federated Learning
  - name: Events
    description: Tesla Reality Event Compression
  - name: Graph
    description: Palantir Context Graph Model
  - name: Impact
    description: ByteDance Impact Prediction
  - name: Telemetry
    description: OpenAI Behavior Signals
  - name: Philosophy
    description: Arendt, Luhmann, McLuhan, Deutsch



