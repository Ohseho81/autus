<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Autus 5.1 ‚Äì Twin Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --bg: #f5f6f8; --bg-panel: #ffffff; --border-soft: #e1e3e8; --text-main: #111111; --text-muted: #6b6f7b; --accent: #007aff; --accent-soft: #e5f0ff; --danger: #ff3b30; --success: #28cd41; --shadow-soft: 0 16px 40px rgba(15,23,42,0.08); --radius-lg: 18px; --font-sans: -apple-system, BlinkMacSystemFont, system-ui, sans-serif; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: var(--font-sans); background: radial-gradient(circle at top, #fdfdff 0, #f5f6f8 55%, #edf0f5 100%); color: var(--text-main); }
    .app { min-height: 100vh; display: flex; flex-direction: column; }
    .app-header { display: flex; align-items: center; justify-content: space-between; padding: 18px 32px 10px; }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 600; letter-spacing: 0.08em; text-transform: uppercase; font-size: 13px; }
    .brand-mark { width: 26px; height: 26px; border-radius: 9px; background: linear-gradient(135deg, #111827, #1e40af); display: flex; align-items: center; justify-content: center; color: #fff; font-size: 13px; font-weight: 700; box-shadow: 0 10px 25px rgba(15,23,42,0.35); }
    .header-center { display: flex; gap: 12px; font-size: 12px; color: var(--text-muted); }
    .chip { border-radius: 999px; padding: 4px 10px; border: 1px solid var(--border-soft); background: rgba(255,255,255,0.7); display: inline-flex; align-items: center; gap: 6px; }
    .chip-live { border-color: rgba(52,211,153,0.25); background: linear-gradient(135deg, #ecfdf3, #ddfbe8); color: #047857; font-weight: 500; }
    .chip-pill-dot { width: 7px; height: 7px; border-radius: 999px; background: #22c55e; box-shadow: 0 0 0 4px rgba(52,211,153,0.35); }
    .header-right { display: flex; gap: 10px; font-size: 12px; color: var(--text-muted); }
    .metric-pill { border-radius: 999px; background: rgba(255,255,255,0.8); padding: 4px 10px; border: 1px solid var(--border-soft); display: inline-flex; align-items: center; gap: 6px; }
    .metric-pill strong { font-weight: 600; color: var(--text-main); }
    .pill-risk { background: linear-gradient(135deg, #ffe8e7, #ffe4e1); border-color: rgba(248,113,113,0.4); color: #b91c1c; font-weight: 600; }
    .layout { flex: 1; padding: 0 24px 24px; display: grid; grid-template-columns: 1.6fr 1fr; gap: 18px; max-width: 1400px; margin: 0 auto; }
    .panel { background: rgba(255,255,255,0.9); border-radius: 24px; border: 1px solid rgba(148,163,184,0.18); box-shadow: var(--shadow-soft); padding: 18px; position: relative; overflow: hidden; }
    .twin-map-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .twin-map-title { font-size: 13px; font-weight: 600; color: var(--text-muted); letter-spacing: 0.12em; text-transform: uppercase; }
    .twin-map-grid { position: relative; border-radius: 18px; border: 1px solid var(--border-soft); background-image: linear-gradient(to right, #e5e7eb 1px, transparent 1px), linear-gradient(to bottom, #e5e7eb 1px, transparent 1px); background-size: 24px 24px; min-height: 380px; padding: 18px; }
    .zone { position: absolute; border-radius: 16px; background: rgba(255,255,255,0.9); border: 1px solid rgba(148,163,184,0.65); padding: 10px 12px; font-size: 11px; color: var(--text-muted); }
    .zone-label { font-weight: 500; margin-bottom: 4px; color: var(--text-main); font-size: 11px; }
    .zone-metric { font-size: 11px; opacity: 0.7; }
    .zone-badge { position: absolute; right: 10px; bottom: 10px; border-radius: 999px; padding: 2px 8px; font-size: 11px; font-weight: 600; color: #fff; }
    .badge-safe { background: #16a34a; }
    .badge-risk { background: #dc2626; }
    .badge-warn { background: #d97706; }
    .control-panel { display: flex; flex-direction: column; gap: 10px; height: 100%; }
    .control-section { border-radius: 18px; border: 1px solid var(--border-soft); background: #fff; padding: 10px 12px; }
    .section-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 6px; }
    .section-title { font-size: 11px; text-transform: uppercase; letter-spacing: 0.14em; color: var(--text-muted); font-weight: 600; }
    .section-sub { font-size: 11px; color: var(--text-muted); }
    .realtime-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; font-size: 11px; }
    .rt-item { padding: 6px 8px; border-radius: 12px; background: var(--bg); display: flex; flex-direction: column; gap: 2px; }
    .rt-label { text-transform: uppercase; letter-spacing: 0.1em; font-size: 10px; color: var(--text-muted); }
    .rt-value { font-weight: 600; font-size: 13px; display: flex; align-items: baseline; gap: 3px; }
    .rt-trend { font-size: 11px; color: var(--text-muted); }
    .ep10-summary { display: flex; align-items: center; justify-content: space-between; gap: 8px; font-size: 11px; padding: 8px 10px; border-radius: 14px; background: var(--accent-soft); border: 1px solid rgba(37,99,235,0.25); color: #1d4ed8; }
    .ep10-main { display: flex; flex-direction: column; gap: 2px; }
    .ep10-line1 { font-weight: 600; font-size: 11px; }
    .ep10-line2 { font-size: 11px; opacity: 0.9; }
    .ep10-tag-row { display: flex; gap: 6px; flex-wrap: wrap; }
    .ep10-tag { font-size: 10px; border-radius: 999px; padding: 2px 8px; border: 1px solid rgba(37,99,235,0.25); background: rgba(255,255,255,0.65); }
    .safety-row { display: flex; gap: 8px; font-size: 11px; }
    .safety-chip { flex: 1; border-radius: 999px; padding: 5px 8px; border: 1px solid var(--border-soft); background: var(--bg); display: flex; align-items: center; justify-content: space-between; gap: 4px; }
    .safety-chip-label { display: flex; align-items: center; gap: 5px; color: var(--text-muted); }
    .safety-chip-count { font-weight: 600; font-size: 11px; color: var(--text-main); }
    .approval-card { border-radius: 16px; border: 1px solid rgba(248,113,113,0.4); background: linear-gradient(135deg, #fff7f7, #fffdfb); padding: 10px 12px; display: flex; flex-direction: column; gap: 8px; }
    .approval-header { display: flex; align-items: center; justify-content: space-between; gap: 6px; font-size: 11px; }
    .approval-label { text-transform: uppercase; letter-spacing: 0.13em; font-weight: 600; color: #b91c1c; }
    .approval-title { font-size: 13px; font-weight: 600; color: var(--text-main); }
    .approval-meta { font-size: 11px; color: var(--text-muted); }
    .approval-actions { display: flex; gap: 8px; margin-top: 4px; }
    .btn { flex: 1; padding: 7px 0; border-radius: 999px; border: none; font-size: 12px; font-weight: 600; cursor: pointer; transition: transform 0.04s, box-shadow 0.04s; }
    .btn-primary { background: linear-gradient(135deg, #16a34a, #22c55e); color: #fff; box-shadow: 0 8px 16px rgba(22,163,74,0.35); }
    .btn-secondary { background: #fff; color: #b91c1c; border: 1px solid rgba(248,113,113,0.55); }
    .btn:active:not(:disabled) { transform: translateY(1px); box-shadow: none; }
    .btn:disabled { opacity: 0.55; cursor: default; }
    .timeline { margin-top: 6px; border-radius: 14px; border: 1px solid var(--border-soft); background: var(--bg); padding: 8px 10px; max-height: 130px; overflow-y: auto; }
    .timeline-title { font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.13em; margin-bottom: 6px; }
    .timeline-item { display: flex; align-items: center; justify-content: space-between; gap: 8px; font-size: 11px; padding: 4px 0; }
    .timeline-left { display: flex; align-items: center; gap: 6px; }
    .timeline-dot { width: 9px; height: 9px; border-radius: 999px; }
    .dot-ok { background: #22c55e; }
    .dot-warn { background: #eab308; }
    .dot-bad { background: #ef4444; }
    .timeline-time { color: var(--text-muted); }
    .timeline-label { color: var(--text-main); }
    .timeline-delta { font-size: 11px; color: var(--text-muted); }
    @media (max-width: 1024px) { .layout { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="brand"><div class="brand-mark">A</div><span>AUTUS 5.1 ¬∑ TWIN CONSOLE</span></div>
      <div class="header-center">
        <span class="chip chip-live"><span class="chip-pill-dot"></span>LIVE</span>
        <span class="chip">SIM</span>
      </div>
      <div class="header-right">
        <span class="metric-pill">üë• <strong id="pill-people">15</strong></span>
        <span class="metric-pill">üè¢ <strong>5</strong></span>
        <span class="metric-pill">‚ö° <strong id="pill-load">76%</strong></span>
        <span class="metric-pill pill-risk" id="risk-pill">‚òÖ HIGH</span>
      </div>
    </header>
    <main class="layout">
      <section class="panel">
        <div class="twin-map-header">
          <div class="twin-map-title">Facility Map</div>
          <div style="font-size:11px;color:#6b6f7b;">Assembly E focus</div>
        </div>
        <div class="twin-map-grid">
          <div class="zone" style="top:24px;left:30px;width:190px;height:130px;"><div class="zone-label">Training A</div><div class="zone-metric">30%</div><div class="zone-badge badge-safe">78</div></div>
          <div class="zone" style="top:24px;left:260px;width:210px;height:150px;background:rgba(255,248,231,0.9);"><div class="zone-label">Workshop B</div><div class="zone-metric">70%</div><div class="zone-badge badge-warn">81</div></div>
          <div class="zone" style="top:190px;left:30px;width:210px;height:160px;"><div class="zone-label">Lab D</div><div class="zone-metric">55%</div><div class="zone-badge badge-safe">78</div></div>
          <div class="zone" style="top:210px;left:270px;width:200px;height:160px;background:rgba(254,242,242,0.95);"><div class="zone-label">Assembly E</div><div class="zone-metric">80%</div><div class="zone-badge badge-risk" id="zone-score">94</div></div>
        </div>
      </section>
      <aside class="panel">
        <div class="control-panel">
          <section class="control-section">
            <div class="section-header"><div class="section-title">Real-time</div><div class="section-sub">Assembly E</div></div>
            <div class="realtime-grid">
              <div class="rt-item"><div class="rt-label">Density</div><div class="rt-value"><span id="rt-density">58</span>%</div><div class="rt-trend" id="rt-density-trend">stable</div></div>
              <div class="rt-item"><div class="rt-label">Process</div><div class="rt-value"><span id="rt-process">86</span>%</div><div class="rt-trend" id="rt-process-trend">high</div></div>
              <div class="rt-item"><div class="rt-label">Safety</div><div class="rt-value"><span id="rt-safety">72</span></div><div class="rt-trend" id="rt-safety-trend">warning</div></div>
            </div>
          </section>
          <section class="control-section">
            <div class="section-header"><div class="section-title">EP10 Loop</div><div class="section-sub">Event ‚Üí Act ‚Üí Learn</div></div>
            <div class="ep10-summary">
              <div class="ep10-main">
                <div class="ep10-line1" id="ep10-line1">Assembly E ¬∑ risk 94 ¬∑ redirect_flow</div>
                <div class="ep10-line2" id="ep10-line2">8 events ¬∑ crowd 5 ¬∑ process 3</div>
              </div>
              <div class="ep10-tag-row"><span class="ep10-tag">Event</span><span class="ep10-tag">Context</span><span class="ep10-tag">Impact</span><span class="ep10-tag">Predict</span></div>
            </div>
          </section>
          <section class="control-section">
            <div class="section-header"><div class="section-title">Safety Blocks</div></div>
            <div class="safety-row">
              <div class="safety-chip"><div class="safety-chip-label">üë• crowd</div><div class="safety-chip-count" id="safety-crowd">5</div></div>
              <div class="safety-chip"><div class="safety-chip-label">‚öô process</div><div class="safety-chip-count" id="safety-process">3</div></div>
              <div class="safety-chip"><div class="safety-chip-label">üß≠ redirect</div><div class="safety-chip-count">1</div></div>
            </div>
          </section>
          <section class="control-section">
            <div class="section-header"><div class="section-title">Approval</div></div>
            <article class="approval-card" id="approval-card">
              <div class="approval-header"><div class="approval-label">redirect_flow</div><div id="approval-count">8 events</div></div>
              <div class="approval-title">Redirect people from Assembly E</div>
              <div class="approval-meta" id="approval-meta">Risk score <strong>94</strong>. EP10 recommends redirect.</div>
              <div class="approval-actions">
                <button class="btn btn-primary" id="btn-approve">Approve</button>
                <button class="btn btn-secondary" id="btn-reject">Reject</button>
              </div>
            </article>
          </section>
          <section class="control-section">
            <div class="timeline">
              <div class="timeline-title">Timeline</div>
              <div id="timeline-list">
                <div class="timeline-item"><div class="timeline-left"><div class="timeline-dot dot-ok"></div><span class="timeline-time">19:02</span><span class="timeline-label">System healthy</span></div><div class="timeline-delta">Œî +0</div></div>
              </div>
            </div>
          </section>
        </div>
      </aside>
    </main>
  </div>
  <script>
    const state = { density: 58, process: 86, safety: 72 };
    const setText = (id, t) => { const el = document.getElementById(id); if (el) el.textContent = t; };
    const addTimeline = (ts, label, delta, ok) => {
      const list = document.getElementById('timeline-list');
      const item = document.createElement('div');
      item.className = 'timeline-item';
      item.innerHTML = `<div class="timeline-left"><div class="timeline-dot ${ok ? 'dot-ok' : 'dot-warn'}"></div><span class="timeline-time">${ts}</span><span class="timeline-label">${label}</span></div><div class="timeline-delta">Œî ${delta >= 0 ? '+' : ''}${delta}</div>`;
      list.appendChild(item);
    };
    const resolve = (decision) => {
      const before = state.safety;
      if (decision === 'approved') { state.density -= 12; state.process -= 10; state.safety += 8; }
      else { state.safety -= 2; }
      const delta = state.safety - before;
      setText('rt-density', state.density);
      setText('rt-process', state.process);
      setText('rt-safety', state.safety);
      setText('rt-density-trend', decision === 'approved' ? 'down' : 'unchanged');
      setText('rt-safety-trend', state.safety >= 80 ? 'better' : 'warning');
      const ts = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      addTimeline(ts, decision === 'approved' ? 'Redirect approved' : 'Redirect rejected', delta, delta >= 0);
      const card = document.getElementById('approval-card');
      card.style.opacity = '0.7';
      card.style.background = decision === 'approved' ? 'linear-gradient(135deg,#e4f9ea,#f5fff7)' : 'linear-gradient(135deg,#fff7f7,#fffdfb)';
      setText('approval-meta', `${decision.charAt(0).toUpperCase() + decision.slice(1)} at ${ts}`);
      document.getElementById('btn-approve').disabled = true;
      document.getElementById('btn-reject').disabled = true;
      if (decision === 'approved') { setText('zone-score', '72'); document.getElementById('risk-pill').textContent = '‚óã LOW'; document.getElementById('risk-pill').style.background = 'linear-gradient(135deg,#e4f9ea,#f5fff7)'; document.getElementById('risk-pill').style.color = '#16a34a'; }
    };
    document.getElementById('btn-approve').addEventListener('click', () => resolve('approved'));
    document.getElementById('btn-reject').addEventListener('click', () => resolve('rejected'));
  </script>
</body>
</html>
