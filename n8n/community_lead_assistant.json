{
  "name": "AUTUS ì»¤ë®¤ë‹ˆí‹° ë¦¬ë“œ ì–´ì‹œìŠ¤í„´íŠ¸",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [{ "field": "hours", "hoursInterval": 6 }]
        }
      },
      "id": "schedule",
      "name": "â° 6ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [220, 300]
    },
    {
      "parameters": {
        "url": "https://search.naver.com/search.naver",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            { "name": "where", "value": "article" },
            { "name": "query", "value": "í•™ì› í‡´ì› site:cafe.daum.net" }
          ]
        }
      },
      "id": "search-churn",
      "name": "ğŸ” í‡´ì› í‚¤ì›Œë“œ ê²€ìƒ‰",
      "type": "n8n-nodes-base.httpRequest",
      "position": [440, 200]
    },
    {
      "parameters": {
        "url": "https://search.naver.com/search.naver",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            { "name": "where", "value": "article" },
            { "name": "query", "value": "í•™ì› ë¯¸ìˆ˜ê¸ˆ site:cafe.daum.net" }
          ]
        }
      },
      "id": "search-overdue",
      "name": "ğŸ” ë¯¸ìˆ˜ê¸ˆ í‚¤ì›Œë“œ ê²€ìƒ‰",
      "type": "n8n-nodes-base.httpRequest",
      "position": [440, 400]
    },
    {
      "parameters": {
        "jsCode": "// HTMLì—ì„œ ê²€ìƒ‰ ê²°ê³¼ ì¶”ì¶œ (ê°„ì†Œí™”)\nconst html = $input.first().json.data || '';\nconst results = [];\n\n// ì œëª©ê³¼ ë§í¬ ì¶”ì¶œ íŒ¨í„´\nconst titleRegex = /<a[^>]*class=\"link_tit\"[^>]*href=\"([^\"]+)\"[^>]*>([^<]+)<\\/a>/gi;\nlet match;\n\nwhile ((match = titleRegex.exec(html)) !== null) {\n  results.push({\n    link: match[1],\n    title: match[2].replace(/&amp;/g, '&').replace(/&lt;/g, '<').replace(/&gt;/g, '>'),\n    source: 'daum_cafe',\n    keyword: 'í‡´ì›',\n    found_at: new Date().toISOString()\n  });\n}\n\nreturn results.slice(0, 5).map(r => ({ json: r }));"
      },
      "id": "extract-churn",
      "name": "ğŸ“„ í‡´ì› ê²°ê³¼ ì¶”ì¶œ",
      "type": "n8n-nodes-base.code",
      "position": [660, 200]
    },
    {
      "parameters": {
        "jsCode": "const html = $input.first().json.data || '';\nconst results = [];\n\nconst titleRegex = /<a[^>]*class=\"link_tit\"[^>]*href=\"([^\"]+)\"[^>]*>([^<]+)<\\/a>/gi;\nlet match;\n\nwhile ((match = titleRegex.exec(html)) !== null) {\n  results.push({\n    link: match[1],\n    title: match[2].replace(/&amp;/g, '&'),\n    source: 'daum_cafe',\n    keyword: 'ë¯¸ìˆ˜ê¸ˆ',\n    found_at: new Date().toISOString()\n  });\n}\n\nreturn results.slice(0, 5).map(r => ({ json: r }));"
      },
      "id": "extract-overdue",
      "name": "ğŸ“„ ë¯¸ìˆ˜ê¸ˆ ê²°ê³¼ ì¶”ì¶œ",
      "type": "n8n-nodes-base.code",
      "position": [660, 400]
    },
    {
      "parameters": {
        "mode": "combine",
        "mergeByFields": {
          "values": [{ "field1": "link", "field2": "link" }]
        },
        "options": { "disableDotNotation": true }
      },
      "id": "merge",
      "name": "ğŸ”— ê²°ê³¼ í•©ì¹˜ê¸°",
      "type": "n8n-nodes-base.merge",
      "position": [880, 300]
    },
    {
      "parameters": {
        "operation": "upsert",
        "tableId": "community_insights",
        "filterByField": "link",
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "title": "={{ $json.title }}",
            "link": "={{ $json.link }}",
            "source": "={{ $json.source }}",
            "keyword": "={{ $json.keyword }}",
            "status": "new",
            "is_pilot_opportunity": true
          }
        }
      },
      "id": "supabase-save",
      "name": "ğŸ’¾ Supabase ì €ì¥",
      "type": "n8n-nodes-base.supabase",
      "position": [1100, 300]
    },
    {
      "parameters": {
        "channel": "#autus-leads",
        "text": "ğŸ¯ *ìƒˆë¡œìš´ íŒŒì¼ëŸ¿ ê¸°íšŒ ë°œê²¬*\n\n*ì œëª©:* {{ $json.title }}\n*í‚¤ì›Œë“œ:* {{ $json.keyword }}\n*ë§í¬:* {{ $json.link }}\n\nğŸ‘‰ í™•ì¸ í›„ DM í…œí”Œë¦¿ìœ¼ë¡œ ì—°ë½í•´ë³´ì„¸ìš”!",
        "otherOptions": {}
      },
      "id": "slack-notify",
      "name": "ğŸ“¢ Slack ì•Œë¦¼",
      "type": "n8n-nodes-base.slack",
      "position": [1320, 300]
    }
  ],
  "connections": {
    "â° 6ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰": {
      "main": [[
        { "node": "ğŸ” í‡´ì› í‚¤ì›Œë“œ ê²€ìƒ‰", "type": "main", "index": 0 },
        { "node": "ğŸ” ë¯¸ìˆ˜ê¸ˆ í‚¤ì›Œë“œ ê²€ìƒ‰", "type": "main", "index": 0 }
      ]]
    },
    "ğŸ” í‡´ì› í‚¤ì›Œë“œ ê²€ìƒ‰": {
      "main": [[{ "node": "ğŸ“„ í‡´ì› ê²°ê³¼ ì¶”ì¶œ", "type": "main", "index": 0 }]]
    },
    "ğŸ” ë¯¸ìˆ˜ê¸ˆ í‚¤ì›Œë“œ ê²€ìƒ‰": {
      "main": [[{ "node": "ğŸ“„ ë¯¸ìˆ˜ê¸ˆ ê²°ê³¼ ì¶”ì¶œ", "type": "main", "index": 0 }]]
    },
    "ğŸ“„ í‡´ì› ê²°ê³¼ ì¶”ì¶œ": {
      "main": [[{ "node": "ğŸ”— ê²°ê³¼ í•©ì¹˜ê¸°", "type": "main", "index": 0 }]]
    },
    "ğŸ“„ ë¯¸ìˆ˜ê¸ˆ ê²°ê³¼ ì¶”ì¶œ": {
      "main": [[{ "node": "ğŸ”— ê²°ê³¼ í•©ì¹˜ê¸°", "type": "main", "index": 1 }]]
    },
    "ğŸ”— ê²°ê³¼ í•©ì¹˜ê¸°": {
      "main": [[{ "node": "ğŸ’¾ Supabase ì €ì¥", "type": "main", "index": 0 }]]
    },
    "ğŸ’¾ Supabase ì €ì¥": {
      "main": [[{ "node": "ğŸ“¢ Slack ì•Œë¦¼", "type": "main", "index": 0 }]]
    }
  }
}
