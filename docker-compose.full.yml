version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:

version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:

version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:

version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:

version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:











version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:

version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:

version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:

version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:

version: '3.9'

# ═══════════════════════════════════════════════════════════════════════════════
# AUTUS COMPLETE SYSTEM - Docker Compose
# ═══════════════════════════════════════════════════════════════════════════════
# Components:
# - Frontend: Physics Map (Nginx)
# - CrewAI: Multi-Agent Backend (Node.js)
# - LangChain: AI Analysis Server (Node.js)
# - Neo4j: Graph Database
# - AUTUS API: FastAPI Backend
# - n8n: Workflow Engine
# - Redis: Cache
# ═══════════════════════════════════════════════════════════════════════════════

services:
  # ─────────────────────────────────────────────────────────────────────────────
  # FRONTEND - Physics Map
  # ─────────────────────────────────────────────────────────────────────────────
  frontend:
    image: nginx:alpine
    container_name: autus-frontend
    ports:
      - "80:80"
    volumes:
      - ./frontend:/usr/share/nginx/html:ro
    depends_on:
      - crewai-server
      - langchain-server
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # CREWAI SERVER - Multi-Agent System
  # ─────────────────────────────────────────────────────────────────────────────
  crewai-server:
    build:
      context: ./crewai-server
      dockerfile: Dockerfile
    container_name: autus-crewai
    ports:
      - "3002:3002"
    environment:
      - PORT=3002
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # LANGCHAIN SERVER - AI Analysis
  # ─────────────────────────────────────────────────────────────────────────────
  langchain-server:
    build:
      context: ./langchain-server
      dockerfile: Dockerfile
    container_name: autus-langchain
    ports:
      - "3001:3001"
    environment:
      - PORT=3001
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - XAI_API_KEY=${XAI_API_KEY}
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # NEO4J - Graph Database
  # ─────────────────────────────────────────────────────────────────────────────
  neo4j:
    image: neo4j:5.15-community
    container_name: autus-neo4j
    ports:
      - "7474:7474"  # Browser UI
      - "7687:7687"  # Bolt protocol
    environment:
      - NEO4J_AUTH=neo4j/${NEO4J_PASSWORD:-autus123}
      - NEO4J_PLUGINS=["apoc"]
      - NEO4J_dbms_security_procedures_unrestricted=apoc.*
    volumes:
      - neo4j_data:/data
      - neo4j_logs:/logs
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # AUTUS API - FastAPI Backend
  # ─────────────────────────────────────────────────────────────────────────────
  autus-api:
    build:
      context: ./autus_realtime
      dockerfile: Dockerfile
    container_name: autus-api
    ports:
      - "8001:8000"
    environment:
      - ENV=production
      - NEO4J_URI=bolt://neo4j:7687
      - NEO4J_USER=neo4j
      - NEO4J_PASSWORD=${NEO4J_PASSWORD:-autus123}
    volumes:
      - ./autus_realtime/data:/app/data
    depends_on:
      - neo4j
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # N8N - Workflow Automation
  # ─────────────────────────────────────────────────────────────────────────────
  n8n:
    image: n8nio/n8n:latest
    container_name: autus-n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=${N8N_USER:-admin}
      - N8N_BASIC_AUTH_PASSWORD=${N8N_PASSWORD:-autus123}
      - GENERIC_TIMEZONE=Asia/Seoul
    volumes:
      - n8n_data:/home/node/.n8n
    restart: unless-stopped
    networks:
      - autus-network

  # ─────────────────────────────────────────────────────────────────────────────
  # REDIS - Cache
  # ─────────────────────────────────────────────────────────────────────────────
  redis:
    image: redis:7-alpine
    container_name: autus-redis
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    restart: unless-stopped
    networks:
      - autus-network

# ─────────────────────────────────────────────────────────────────────────────
# NETWORKS
# ─────────────────────────────────────────────────────────────────────────────
networks:
  autus-network:
    driver: bridge

# ─────────────────────────────────────────────────────────────────────────────
# VOLUMES
# ─────────────────────────────────────────────────────────────────────────────
volumes:
  neo4j_data:
  neo4j_logs:
  n8n_data:
  redis_data:
















